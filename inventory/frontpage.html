<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>盤點單管理</title>
    <link rel="stylesheet" href="fronpage.css">
    <script src="../ApiURL.js"></script>
    <script src="../ChatHub.js"></script>
    <script src="../Function/WebApiFunc.js"></script>
    <script src="../svg/mySVG.js"></script>
    <script src="../Function/Basic.js"></script>
    <script src="../popup/loading.js"></script>
    <script src="jsonFunc.js"></script>
    <script src="frontpage.js"></script>
    <script src="frontpage_addform.js"></script>
    <script src="../UI/H5_Date/map.js"></script>
    <!-- <script src="../session_check.js"></script> -->
    
</head>
<body>
  <div class="form" id="form" style="width: 100%; height: 100%;">
    <script>
     
    const form = document.querySelector("#form");
    form.style.display = "flex";
    form.style.width = "100%";
    form.style.justifyContent = "top";
    form.style.flexDirection = "column";
    form.style.backgroundColor = "#";
 
    const header_div = get_header();
    form.appendChild(header_div);

    const main_div = get_main();
    form.appendChild(main_div);
    
    </script>
  </div>
  
  
<div class="under-line">
  <B> Copyright ©2023 鴻森整合機電有限公司 </B>
</div>
<script>

   $(function()
   {
        $('.find_start_date_input').focus(function(event) 
        {
          /* Act on the event */
          $(this).date(
          {
            beginyear : 2022,
            curdate:true
          },function()
          {
            //按下確定
          },function()
          {
            //按下取消
          });
        });
        $('.find_end_date_input').focus(function(event) 
        {
          /* Act on the event */
          $(this).date(
          {
            beginyear : 2022,
            curdate:true
          },function()
          {
            //按下確定
          },function()
          {
            //按下取消
          });
        });

  }) 
  


  signalR_init(`${api_ip}chatHub`);
  document.addEventListener('ReceivedEvent', function (event) 
  {   
     var jsonObject = JSON.parse(event.detail.message); 
     console.log('ReceivedEvent',jsonObject);

     const GUID = jsonObject.Data.GUID;
     
     if(jsonObject.Method == "creat_lock_by_IC_SN" || jsonObject.Method == "creat_unlock_by_IC_SN")
     {
        for (var i = 0; i < data.Data.length; i++)
        {
            if (data.Data[i].GUID == GUID)
            {
              data.Data[i] = { ...jsonObject.Data };
            }
        }
     }
     if(jsonObject.Method == "creat_delete_by_IC_SN" || jsonObject.Method == "creat_auto_add")
     {
        location.reload();
        return;
     }

    page_Init(data);
     
  }); 

</script>
</body>

</html>
