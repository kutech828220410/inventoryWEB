(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function ed(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ta={exports:{}},Hs={},Ia={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ur=Symbol.for("react.element"),td=Symbol.for("react.portal"),nd=Symbol.for("react.fragment"),rd=Symbol.for("react.strict_mode"),sd=Symbol.for("react.profiler"),od=Symbol.for("react.provider"),ld=Symbol.for("react.context"),id=Symbol.for("react.forward_ref"),ad=Symbol.for("react.suspense"),ud=Symbol.for("react.memo"),cd=Symbol.for("react.lazy"),ji=Symbol.iterator;function dd(e){return e===null||typeof e!="object"?null:(e=ji&&e[ji]||e["@@iterator"],typeof e=="function"?e:null)}var $a={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Aa=Object.assign,La={};function Zn(e,t,n){this.props=e,this.context=t,this.refs=La,this.updater=n||$a}Zn.prototype.isReactComponent={};Zn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function za(){}za.prototype=Zn.prototype;function Ml(e,t,n){this.props=e,this.context=t,this.refs=La,this.updater=n||$a}var bl=Ml.prototype=new za;bl.constructor=Ml;Aa(bl,Zn.prototype);bl.isPureReactComponent=!0;var Ci=Array.isArray,Oa=Object.prototype.hasOwnProperty,Dl={current:null},Ua={key:!0,ref:!0,__self:!0,__source:!0};function Ba(e,t,n){var r,s={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Oa.call(t,r)&&!Ua.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),d=0;d<a;d++)u[d]=arguments[d+2];s.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ur,type:e,key:o,ref:i,props:s,_owner:Dl.current}}function fd(e,t){return{$$typeof:Ur,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function El(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ur}function pd(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ki=/\/+/g;function io(e,t){return typeof e=="object"&&e!==null&&e.key!=null?pd(""+e.key):t.toString(36)}function us(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Ur:case td:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+io(i,0):r,Ci(s)?(n="",e!=null&&(n=e.replace(ki,"$&/")+"/"),us(s,t,n,"",function(d){return d})):s!=null&&(El(s)&&(s=fd(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(ki,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",Ci(e))for(var a=0;a<e.length;a++){o=e[a];var u=r+io(o,a);i+=us(o,t,n,u,s)}else if(u=dd(e),typeof u=="function")for(e=u.call(e),a=0;!(o=e.next()).done;)o=o.value,u=r+io(o,a++),i+=us(o,t,n,u,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Hr(e,t,n){if(e==null)return e;var r=[],s=0;return us(e,r,"","",function(o){return t.call(n,o,s++)}),r}function hd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var We={current:null},cs={transition:null},md={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:cs,ReactCurrentOwner:Dl};function Fa(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Hr,forEach:function(e,t,n){Hr(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Hr(e,function(){t++}),t},toArray:function(e){return Hr(e,function(t){return t})||[]},only:function(e){if(!El(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ce.Component=Zn;ce.Fragment=nd;ce.Profiler=sd;ce.PureComponent=Ml;ce.StrictMode=rd;ce.Suspense=ad;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=md;ce.act=Fa;ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Aa({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Dl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Oa.call(t,u)&&!Ua.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var d=0;d<u;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Ur,type:e.type,key:s,ref:o,props:r,_owner:i}};ce.createContext=function(e){return e={$$typeof:ld,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:od,_context:e},e.Consumer=e};ce.createElement=Ba;ce.createFactory=function(e){var t=Ba.bind(null,e);return t.type=e,t};ce.createRef=function(){return{current:null}};ce.forwardRef=function(e){return{$$typeof:id,render:e}};ce.isValidElement=El;ce.lazy=function(e){return{$$typeof:cd,_payload:{_status:-1,_result:e},_init:hd}};ce.memo=function(e,t){return{$$typeof:ud,type:e,compare:t===void 0?null:t}};ce.startTransition=function(e){var t=cs.transition;cs.transition={};try{e()}finally{cs.transition=t}};ce.unstable_act=Fa;ce.useCallback=function(e,t){return We.current.useCallback(e,t)};ce.useContext=function(e){return We.current.useContext(e)};ce.useDebugValue=function(){};ce.useDeferredValue=function(e){return We.current.useDeferredValue(e)};ce.useEffect=function(e,t){return We.current.useEffect(e,t)};ce.useId=function(){return We.current.useId()};ce.useImperativeHandle=function(e,t,n){return We.current.useImperativeHandle(e,t,n)};ce.useInsertionEffect=function(e,t){return We.current.useInsertionEffect(e,t)};ce.useLayoutEffect=function(e,t){return We.current.useLayoutEffect(e,t)};ce.useMemo=function(e,t){return We.current.useMemo(e,t)};ce.useReducer=function(e,t,n){return We.current.useReducer(e,t,n)};ce.useRef=function(e){return We.current.useRef(e)};ce.useState=function(e){return We.current.useState(e)};ce.useSyncExternalStore=function(e,t,n){return We.current.useSyncExternalStore(e,t,n)};ce.useTransition=function(){return We.current.useTransition()};ce.version="18.3.1";Ia.exports=ce;var j=Ia.exports;const gd=ed(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yd=j,xd=Symbol.for("react.element"),vd=Symbol.for("react.fragment"),wd=Object.prototype.hasOwnProperty,Nd=yd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Sd={key:!0,ref:!0,__self:!0,__source:!0};function Ga(e,t,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)wd.call(t,r)&&!Sd.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:xd,type:e,key:o,ref:i,props:s,_owner:Nd.current}}Hs.Fragment=vd;Hs.jsx=Ga;Hs.jsxs=Ga;Ta.exports=Hs;var l=Ta.exports,Va={exports:{}},lt={},Ha={exports:{}},Wa={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(m,M){var z=m.length;m.push(M);e:for(;0<z;){var R=z-1>>>1,B=m[R];if(0<s(B,M))m[R]=M,m[z]=B,z=R;else break e}}function n(m){return m.length===0?null:m[0]}function r(m){if(m.length===0)return null;var M=m[0],z=m.pop();if(z!==M){m[0]=z;e:for(var R=0,B=m.length,Z=B>>>1;R<Z;){var K=2*(R+1)-1,se=m[K],te=K+1,pe=m[te];if(0>s(se,z))te<B&&0>s(pe,se)?(m[R]=pe,m[te]=z,R=te):(m[R]=se,m[K]=z,R=K);else if(te<B&&0>s(pe,z))m[R]=pe,m[te]=z,R=te;else break e}}return M}function s(m,M){var z=m.sortIndex-M.sortIndex;return z!==0?z:m.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var u=[],d=[],p=1,v=null,h=3,E=!1,k=!1,T=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(m){for(var M=n(d);M!==null;){if(M.callback===null)r(d);else if(M.startTime<=m)r(d),M.sortIndex=M.expirationTime,t(u,M);else break;M=n(d)}}function S(m){if(T=!1,y(m),!k)if(n(u)!==null)k=!0,fe(D);else{var M=n(d);M!==null&&P(S,M.startTime-m)}}function D(m,M){k=!1,T&&(T=!1,g(H),H=-1),E=!0;var z=h;try{for(y(M),v=n(u);v!==null&&(!(v.expirationTime>M)||m&&!J());){var R=v.callback;if(typeof R=="function"){v.callback=null,h=v.priorityLevel;var B=R(v.expirationTime<=M);M=e.unstable_now(),typeof B=="function"?v.callback=B:v===n(u)&&r(u),y(M)}else r(u);v=n(u)}if(v!==null)var Z=!0;else{var K=n(d);K!==null&&P(S,K.startTime-M),Z=!1}return Z}finally{v=null,h=z,E=!1}}var _=!1,O=null,H=-1,le=5,b=-1;function J(){return!(e.unstable_now()-b<le)}function q(){if(O!==null){var m=e.unstable_now();b=m;var M=!0;try{M=O(!0,m)}finally{M?L():(_=!1,O=null)}}else _=!1}var L;if(typeof c=="function")L=function(){c(q)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,oe=X.port2;X.port1.onmessage=q,L=function(){oe.postMessage(null)}}else L=function(){x(q,0)};function fe(m){O=m,_||(_=!0,L())}function P(m,M){H=x(function(){m(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(m){m.callback=null},e.unstable_continueExecution=function(){k||E||(k=!0,fe(D))},e.unstable_forceFrameRate=function(m){0>m||125<m?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<m?Math.floor(1e3/m):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(m){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var z=h;h=M;try{return m()}finally{h=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(m,M){switch(m){case 1:case 2:case 3:case 4:case 5:break;default:m=3}var z=h;h=m;try{return M()}finally{h=z}},e.unstable_scheduleCallback=function(m,M,z){var R=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?R+z:R):z=R,m){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=z+B,m={id:p++,callback:M,priorityLevel:m,startTime:z,expirationTime:B,sortIndex:-1},z>R?(m.sortIndex=z,t(d,m),n(u)===null&&m===n(d)&&(T?(g(H),H=-1):T=!0,P(S,z-R))):(m.sortIndex=B,t(u,m),k||E||(k=!0,fe(D))),m},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(m){var M=h;return function(){var z=h;h=M;try{return m.apply(this,arguments)}finally{h=z}}}})(Wa);Ha.exports=Wa;var jd=Ha.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cd=j,ot=jd;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xa=new Set,jr={};function Cn(e,t){Hn(e,t),Hn(e+"Capture",t)}function Hn(e,t){for(jr[e]=t,e=0;e<t.length;e++)Xa.add(t[e])}var zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Io=Object.prototype.hasOwnProperty,kd=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_i={},Mi={};function _d(e){return Io.call(Mi,e)?!0:Io.call(_i,e)?!1:kd.test(e)?Mi[e]=!0:(_i[e]=!0,!1)}function Md(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bd(e,t,n,r){if(t===null||typeof t>"u"||Md(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xe(e,t,n,r,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ze[e]=new Xe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ze[t]=new Xe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ze[e]=new Xe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ze[e]=new Xe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ze[e]=new Xe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ze[e]=new Xe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ze[e]=new Xe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ze[e]=new Xe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ze[e]=new Xe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Pl=/[\-:]([a-z])/g;function Rl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Pl,Rl);ze[t]=new Xe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Pl,Rl);ze[t]=new Xe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Pl,Rl);ze[t]=new Xe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ze[e]=new Xe(e,1,!1,e.toLowerCase(),null,!1,!1)});ze.xlinkHref=new Xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ze[e]=new Xe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Tl(e,t,n,r){var s=ze.hasOwnProperty(t)?ze[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bd(t,n,s,r)&&(n=null),r||s===null?_d(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ft=Cd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wr=Symbol.for("react.element"),Mn=Symbol.for("react.portal"),bn=Symbol.for("react.fragment"),Il=Symbol.for("react.strict_mode"),$o=Symbol.for("react.profiler"),Ya=Symbol.for("react.provider"),Qa=Symbol.for("react.context"),$l=Symbol.for("react.forward_ref"),Ao=Symbol.for("react.suspense"),Lo=Symbol.for("react.suspense_list"),Al=Symbol.for("react.memo"),Ht=Symbol.for("react.lazy"),Ka=Symbol.for("react.offscreen"),bi=Symbol.iterator;function nr(e){return e===null||typeof e!="object"?null:(e=bi&&e[bi]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,ao;function cr(e){if(ao===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ao=t&&t[1]||""}return`
`+ao+e}var uo=!1;function co(e,t){if(!e||uo)return"";uo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,a=o.length-1;1<=i&&0<=a&&s[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==o[a]){var u=`
`+s[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=a);break}}}finally{uo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?cr(e):""}function Dd(e){switch(e.tag){case 5:return cr(e.type);case 16:return cr("Lazy");case 13:return cr("Suspense");case 19:return cr("SuspenseList");case 0:case 2:case 15:return e=co(e.type,!1),e;case 11:return e=co(e.type.render,!1),e;case 1:return e=co(e.type,!0),e;default:return""}}function zo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bn:return"Fragment";case Mn:return"Portal";case $o:return"Profiler";case Il:return"StrictMode";case Ao:return"Suspense";case Lo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qa:return(e.displayName||"Context")+".Consumer";case Ya:return(e._context.displayName||"Context")+".Provider";case $l:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Al:return t=e.displayName||null,t!==null?t:zo(e.type)||"Memo";case Ht:t=e._payload,e=e._init;try{return zo(e(t))}catch{}}return null}function Ed(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zo(t);case 8:return t===Il?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function on(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ja(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Pd(e){var t=Ja(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xr(e){e._valueTracker||(e._valueTracker=Pd(e))}function Za(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ja(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ns(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Oo(e,t){var n=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Di(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=on(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qa(e,t){t=t.checked,t!=null&&Tl(e,"checked",t,!1)}function Uo(e,t){qa(e,t);var n=on(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Bo(e,t.type,n):t.hasOwnProperty("defaultValue")&&Bo(e,t.type,on(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ei(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Bo(e,t,n){(t!=="number"||Ns(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var dr=Array.isArray;function On(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+on(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Fo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Pi(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(G(92));if(dr(n)){if(1<n.length)throw Error(G(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:on(n)}}function eu(e,t){var n=on(t.value),r=on(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ri(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function tu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Go(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?tu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yr,nu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yr=Yr||document.createElement("div"),Yr.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rd=["Webkit","ms","Moz","O"];Object.keys(hr).forEach(function(e){Rd.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),hr[t]=hr[e]})});function ru(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||hr.hasOwnProperty(e)&&hr[e]?(""+t).trim():t+"px"}function su(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ru(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Td=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vo(e,t){if(t){if(Td[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function Ho(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wo=null;function Ll(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xo=null,Un=null,Bn=null;function Ti(e){if(e=Gr(e)){if(typeof Xo!="function")throw Error(G(280));var t=e.stateNode;t&&(t=Ks(t),Xo(e.stateNode,e.type,t))}}function ou(e){Un?Bn?Bn.push(e):Bn=[e]:Un=e}function lu(){if(Un){var e=Un,t=Bn;if(Bn=Un=null,Ti(e),t)for(e=0;e<t.length;e++)Ti(t[e])}}function iu(e,t){return e(t)}function au(){}var fo=!1;function uu(e,t,n){if(fo)return e(t,n);fo=!0;try{return iu(e,t,n)}finally{fo=!1,(Un!==null||Bn!==null)&&(au(),lu())}}function kr(e,t){var n=e.stateNode;if(n===null)return null;var r=Ks(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(G(231,t,typeof n));return n}var Yo=!1;if(zt)try{var rr={};Object.defineProperty(rr,"passive",{get:function(){Yo=!0}}),window.addEventListener("test",rr,rr),window.removeEventListener("test",rr,rr)}catch{Yo=!1}function Id(e,t,n,r,s,o,i,a,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(p){this.onError(p)}}var mr=!1,Ss=null,js=!1,Qo=null,$d={onError:function(e){mr=!0,Ss=e}};function Ad(e,t,n,r,s,o,i,a,u){mr=!1,Ss=null,Id.apply($d,arguments)}function Ld(e,t,n,r,s,o,i,a,u){if(Ad.apply(this,arguments),mr){if(mr){var d=Ss;mr=!1,Ss=null}else throw Error(G(198));js||(js=!0,Qo=d)}}function kn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function cu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ii(e){if(kn(e)!==e)throw Error(G(188))}function zd(e){var t=e.alternate;if(!t){if(t=kn(e),t===null)throw Error(G(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Ii(s),e;if(o===r)return Ii(s),t;o=o.sibling}throw Error(G(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?e:t}function du(e){return e=zd(e),e!==null?fu(e):null}function fu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=fu(e);if(t!==null)return t;e=e.sibling}return null}var pu=ot.unstable_scheduleCallback,$i=ot.unstable_cancelCallback,Od=ot.unstable_shouldYield,Ud=ot.unstable_requestPaint,De=ot.unstable_now,Bd=ot.unstable_getCurrentPriorityLevel,zl=ot.unstable_ImmediatePriority,hu=ot.unstable_UserBlockingPriority,Cs=ot.unstable_NormalPriority,Fd=ot.unstable_LowPriority,mu=ot.unstable_IdlePriority,Ws=null,Dt=null;function Gd(e){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Ws,e,void 0,(e.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:Wd,Vd=Math.log,Hd=Math.LN2;function Wd(e){return e>>>=0,e===0?32:31-(Vd(e)/Hd|0)|0}var Qr=64,Kr=4194304;function fr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ks(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~s;a!==0?r=fr(a):(o&=i,o!==0&&(r=fr(o)))}else i=n&~s,i!==0?r=fr(i):o!==0&&(r=fr(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Nt(t),s=1<<n,r|=e[n],t&=~s;return r}function Xd(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Nt(o),a=1<<i,u=s[i];u===-1?(!(a&n)||a&r)&&(s[i]=Xd(a,t)):u<=t&&(e.expiredLanes|=a),o&=~a}}function Ko(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gu(){var e=Qr;return Qr<<=1,!(Qr&4194240)&&(Qr=64),e}function po(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Br(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nt(t),e[t]=n}function Qd(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Nt(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Ol(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Nt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ye=0;function yu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var xu,Ul,vu,wu,Nu,Jo=!1,Jr=[],Jt=null,Zt=null,qt=null,_r=new Map,Mr=new Map,Xt=[],Kd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ai(e,t){switch(e){case"focusin":case"focusout":Jt=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":qt=null;break;case"pointerover":case"pointerout":_r.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mr.delete(t.pointerId)}}function sr(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Gr(t),t!==null&&Ul(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Jd(e,t,n,r,s){switch(t){case"focusin":return Jt=sr(Jt,e,t,n,r,s),!0;case"dragenter":return Zt=sr(Zt,e,t,n,r,s),!0;case"mouseover":return qt=sr(qt,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return _r.set(o,sr(_r.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Mr.set(o,sr(Mr.get(o)||null,e,t,n,r,s)),!0}return!1}function Su(e){var t=hn(e.target);if(t!==null){var n=kn(t);if(n!==null){if(t=n.tag,t===13){if(t=cu(n),t!==null){e.blockedOn=t,Nu(e.priority,function(){vu(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ds(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Wo=r,n.target.dispatchEvent(r),Wo=null}else return t=Gr(n),t!==null&&Ul(t),e.blockedOn=n,!1;t.shift()}return!0}function Li(e,t,n){ds(e)&&n.delete(t)}function Zd(){Jo=!1,Jt!==null&&ds(Jt)&&(Jt=null),Zt!==null&&ds(Zt)&&(Zt=null),qt!==null&&ds(qt)&&(qt=null),_r.forEach(Li),Mr.forEach(Li)}function or(e,t){e.blockedOn===t&&(e.blockedOn=null,Jo||(Jo=!0,ot.unstable_scheduleCallback(ot.unstable_NormalPriority,Zd)))}function br(e){function t(s){return or(s,e)}if(0<Jr.length){or(Jr[0],e);for(var n=1;n<Jr.length;n++){var r=Jr[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Jt!==null&&or(Jt,e),Zt!==null&&or(Zt,e),qt!==null&&or(qt,e),_r.forEach(t),Mr.forEach(t),n=0;n<Xt.length;n++)r=Xt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xt.length&&(n=Xt[0],n.blockedOn===null);)Su(n),n.blockedOn===null&&Xt.shift()}var Fn=Ft.ReactCurrentBatchConfig,_s=!0;function qd(e,t,n,r){var s=ye,o=Fn.transition;Fn.transition=null;try{ye=1,Bl(e,t,n,r)}finally{ye=s,Fn.transition=o}}function ef(e,t,n,r){var s=ye,o=Fn.transition;Fn.transition=null;try{ye=4,Bl(e,t,n,r)}finally{ye=s,Fn.transition=o}}function Bl(e,t,n,r){if(_s){var s=Zo(e,t,n,r);if(s===null)jo(e,t,r,Ms,n),Ai(e,r);else if(Jd(s,e,t,n,r))r.stopPropagation();else if(Ai(e,r),t&4&&-1<Kd.indexOf(e)){for(;s!==null;){var o=Gr(s);if(o!==null&&xu(o),o=Zo(e,t,n,r),o===null&&jo(e,t,r,Ms,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else jo(e,t,r,null,n)}}var Ms=null;function Zo(e,t,n,r){if(Ms=null,e=Ll(r),e=hn(e),e!==null)if(t=kn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=cu(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ms=e,null}function ju(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bd()){case zl:return 1;case hu:return 4;case Cs:case Fd:return 16;case mu:return 536870912;default:return 16}default:return 16}}var Qt=null,Fl=null,fs=null;function Cu(){if(fs)return fs;var e,t=Fl,n=t.length,r,s="value"in Qt?Qt.value:Qt.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[o-r];r++);return fs=s.slice(e,1<r?1-r:void 0)}function ps(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zr(){return!0}function zi(){return!1}function it(e){function t(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Zr:zi,this.isPropagationStopped=zi,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zr)},persist:function(){},isPersistent:Zr}),t}var qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gl=it(qn),Fr=_e({},qn,{view:0,detail:0}),tf=it(Fr),ho,mo,lr,Xs=_e({},Fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lr&&(lr&&e.type==="mousemove"?(ho=e.screenX-lr.screenX,mo=e.screenY-lr.screenY):mo=ho=0,lr=e),ho)},movementY:function(e){return"movementY"in e?e.movementY:mo}}),Oi=it(Xs),nf=_e({},Xs,{dataTransfer:0}),rf=it(nf),sf=_e({},Fr,{relatedTarget:0}),go=it(sf),of=_e({},qn,{animationName:0,elapsedTime:0,pseudoElement:0}),lf=it(of),af=_e({},qn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uf=it(af),cf=_e({},qn,{data:0}),Ui=it(cf),df={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ff={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pf[e])?!!t[e]:!1}function Vl(){return hf}var mf=_e({},Fr,{key:function(e){if(e.key){var t=df[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ps(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ff[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vl,charCode:function(e){return e.type==="keypress"?ps(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ps(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gf=it(mf),yf=_e({},Xs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bi=it(yf),xf=_e({},Fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vl}),vf=it(xf),wf=_e({},qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nf=it(wf),Sf=_e({},Xs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jf=it(Sf),Cf=[9,13,27,32],Hl=zt&&"CompositionEvent"in window,gr=null;zt&&"documentMode"in document&&(gr=document.documentMode);var kf=zt&&"TextEvent"in window&&!gr,ku=zt&&(!Hl||gr&&8<gr&&11>=gr),Fi=" ",Gi=!1;function _u(e,t){switch(e){case"keyup":return Cf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Dn=!1;function _f(e,t){switch(e){case"compositionend":return Mu(t);case"keypress":return t.which!==32?null:(Gi=!0,Fi);case"textInput":return e=t.data,e===Fi&&Gi?null:e;default:return null}}function Mf(e,t){if(Dn)return e==="compositionend"||!Hl&&_u(e,t)?(e=Cu(),fs=Fl=Qt=null,Dn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ku&&t.locale!=="ko"?null:t.data;default:return null}}var bf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bf[e.type]:t==="textarea"}function bu(e,t,n,r){ou(r),t=bs(t,"onChange"),0<t.length&&(n=new Gl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var yr=null,Dr=null;function Df(e){Ou(e,0)}function Ys(e){var t=Rn(e);if(Za(t))return e}function Ef(e,t){if(e==="change")return t}var Du=!1;if(zt){var yo;if(zt){var xo="oninput"in document;if(!xo){var Hi=document.createElement("div");Hi.setAttribute("oninput","return;"),xo=typeof Hi.oninput=="function"}yo=xo}else yo=!1;Du=yo&&(!document.documentMode||9<document.documentMode)}function Wi(){yr&&(yr.detachEvent("onpropertychange",Eu),Dr=yr=null)}function Eu(e){if(e.propertyName==="value"&&Ys(Dr)){var t=[];bu(t,Dr,e,Ll(e)),uu(Df,t)}}function Pf(e,t,n){e==="focusin"?(Wi(),yr=t,Dr=n,yr.attachEvent("onpropertychange",Eu)):e==="focusout"&&Wi()}function Rf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ys(Dr)}function Tf(e,t){if(e==="click")return Ys(t)}function If(e,t){if(e==="input"||e==="change")return Ys(t)}function $f(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jt=typeof Object.is=="function"?Object.is:$f;function Er(e,t){if(jt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Io.call(t,s)||!jt(e[s],t[s]))return!1}return!0}function Xi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yi(e,t){var n=Xi(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xi(n)}}function Pu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ru(){for(var e=window,t=Ns();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ns(e.document)}return t}function Wl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Af(e){var t=Ru(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Pu(n.ownerDocument.documentElement,n)){if(r!==null&&Wl(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=Yi(n,o);var i=Yi(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Lf=zt&&"documentMode"in document&&11>=document.documentMode,En=null,qo=null,xr=null,el=!1;function Qi(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;el||En==null||En!==Ns(r)||(r=En,"selectionStart"in r&&Wl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xr&&Er(xr,r)||(xr=r,r=bs(qo,"onSelect"),0<r.length&&(t=new Gl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=En)))}function qr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pn={animationend:qr("Animation","AnimationEnd"),animationiteration:qr("Animation","AnimationIteration"),animationstart:qr("Animation","AnimationStart"),transitionend:qr("Transition","TransitionEnd")},vo={},Tu={};zt&&(Tu=document.createElement("div").style,"AnimationEvent"in window||(delete Pn.animationend.animation,delete Pn.animationiteration.animation,delete Pn.animationstart.animation),"TransitionEvent"in window||delete Pn.transitionend.transition);function Qs(e){if(vo[e])return vo[e];if(!Pn[e])return e;var t=Pn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Tu)return vo[e]=t[n];return e}var Iu=Qs("animationend"),$u=Qs("animationiteration"),Au=Qs("animationstart"),Lu=Qs("transitionend"),zu=new Map,Ki="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function un(e,t){zu.set(e,t),Cn(t,[e])}for(var wo=0;wo<Ki.length;wo++){var No=Ki[wo],zf=No.toLowerCase(),Of=No[0].toUpperCase()+No.slice(1);un(zf,"on"+Of)}un(Iu,"onAnimationEnd");un($u,"onAnimationIteration");un(Au,"onAnimationStart");un("dblclick","onDoubleClick");un("focusin","onFocus");un("focusout","onBlur");un(Lu,"onTransitionEnd");Hn("onMouseEnter",["mouseout","mouseover"]);Hn("onMouseLeave",["mouseout","mouseover"]);Hn("onPointerEnter",["pointerout","pointerover"]);Hn("onPointerLeave",["pointerout","pointerover"]);Cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uf=new Set("cancel close invalid load scroll toggle".split(" ").concat(pr));function Ji(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ld(r,t,void 0,e),e.currentTarget=null}function Ou(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],u=a.instance,d=a.currentTarget;if(a=a.listener,u!==o&&s.isPropagationStopped())break e;Ji(s,a,d),o=u}else for(i=0;i<r.length;i++){if(a=r[i],u=a.instance,d=a.currentTarget,a=a.listener,u!==o&&s.isPropagationStopped())break e;Ji(s,a,d),o=u}}}if(js)throw e=Qo,js=!1,Qo=null,e}function ve(e,t){var n=t[ol];n===void 0&&(n=t[ol]=new Set);var r=e+"__bubble";n.has(r)||(Uu(t,e,2,!1),n.add(r))}function So(e,t,n){var r=0;t&&(r|=4),Uu(n,e,r,t)}var es="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){if(!e[es]){e[es]=!0,Xa.forEach(function(n){n!=="selectionchange"&&(Uf.has(n)||So(n,!1,e),So(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[es]||(t[es]=!0,So("selectionchange",!1,t))}}function Uu(e,t,n,r){switch(ju(t)){case 1:var s=qd;break;case 4:s=ef;break;default:s=Bl}n=s.bind(null,t,n,e),s=void 0,!Yo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function jo(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;i=i.return}for(;a!==null;){if(i=hn(a),i===null)return;if(u=i.tag,u===5||u===6){r=o=i;continue e}a=a.parentNode}}r=r.return}uu(function(){var d=o,p=Ll(n),v=[];e:{var h=zu.get(e);if(h!==void 0){var E=Gl,k=e;switch(e){case"keypress":if(ps(n)===0)break e;case"keydown":case"keyup":E=gf;break;case"focusin":k="focus",E=go;break;case"focusout":k="blur",E=go;break;case"beforeblur":case"afterblur":E=go;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Oi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=rf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=vf;break;case Iu:case $u:case Au:E=lf;break;case Lu:E=Nf;break;case"scroll":E=tf;break;case"wheel":E=jf;break;case"copy":case"cut":case"paste":E=uf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Bi}var T=(t&4)!==0,x=!T&&e==="scroll",g=T?h!==null?h+"Capture":null:h;T=[];for(var c=d,y;c!==null;){y=c;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,g!==null&&(S=kr(c,g),S!=null&&T.push(Rr(c,S,y)))),x)break;c=c.return}0<T.length&&(h=new E(h,k,null,n,p),v.push({event:h,listeners:T}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",E=e==="mouseout"||e==="pointerout",h&&n!==Wo&&(k=n.relatedTarget||n.fromElement)&&(hn(k)||k[Ot]))break e;if((E||h)&&(h=p.window===p?p:(h=p.ownerDocument)?h.defaultView||h.parentWindow:window,E?(k=n.relatedTarget||n.toElement,E=d,k=k?hn(k):null,k!==null&&(x=kn(k),k!==x||k.tag!==5&&k.tag!==6)&&(k=null)):(E=null,k=d),E!==k)){if(T=Oi,S="onMouseLeave",g="onMouseEnter",c="mouse",(e==="pointerout"||e==="pointerover")&&(T=Bi,S="onPointerLeave",g="onPointerEnter",c="pointer"),x=E==null?h:Rn(E),y=k==null?h:Rn(k),h=new T(S,c+"leave",E,n,p),h.target=x,h.relatedTarget=y,S=null,hn(p)===d&&(T=new T(g,c+"enter",k,n,p),T.target=y,T.relatedTarget=x,S=T),x=S,E&&k)t:{for(T=E,g=k,c=0,y=T;y;y=_n(y))c++;for(y=0,S=g;S;S=_n(S))y++;for(;0<c-y;)T=_n(T),c--;for(;0<y-c;)g=_n(g),y--;for(;c--;){if(T===g||g!==null&&T===g.alternate)break t;T=_n(T),g=_n(g)}T=null}else T=null;E!==null&&Zi(v,h,E,T,!1),k!==null&&x!==null&&Zi(v,x,k,T,!0)}}e:{if(h=d?Rn(d):window,E=h.nodeName&&h.nodeName.toLowerCase(),E==="select"||E==="input"&&h.type==="file")var D=Ef;else if(Vi(h))if(Du)D=If;else{D=Rf;var _=Pf}else(E=h.nodeName)&&E.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(D=Tf);if(D&&(D=D(e,d))){bu(v,D,n,p);break e}_&&_(e,h,d),e==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&Bo(h,"number",h.value)}switch(_=d?Rn(d):window,e){case"focusin":(Vi(_)||_.contentEditable==="true")&&(En=_,qo=d,xr=null);break;case"focusout":xr=qo=En=null;break;case"mousedown":el=!0;break;case"contextmenu":case"mouseup":case"dragend":el=!1,Qi(v,n,p);break;case"selectionchange":if(Lf)break;case"keydown":case"keyup":Qi(v,n,p)}var O;if(Hl)e:{switch(e){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else Dn?_u(e,n)&&(H="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(H="onCompositionStart");H&&(ku&&n.locale!=="ko"&&(Dn||H!=="onCompositionStart"?H==="onCompositionEnd"&&Dn&&(O=Cu()):(Qt=p,Fl="value"in Qt?Qt.value:Qt.textContent,Dn=!0)),_=bs(d,H),0<_.length&&(H=new Ui(H,e,null,n,p),v.push({event:H,listeners:_}),O?H.data=O:(O=Mu(n),O!==null&&(H.data=O)))),(O=kf?_f(e,n):Mf(e,n))&&(d=bs(d,"onBeforeInput"),0<d.length&&(p=new Ui("onBeforeInput","beforeinput",null,n,p),v.push({event:p,listeners:d}),p.data=O))}Ou(v,t)})}function Rr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function bs(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=kr(e,n),o!=null&&r.unshift(Rr(e,o,s)),o=kr(e,t),o!=null&&r.push(Rr(e,o,s))),e=e.return}return r}function _n(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zi(e,t,n,r,s){for(var o=t._reactName,i=[];n!==null&&n!==r;){var a=n,u=a.alternate,d=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&d!==null&&(a=d,s?(u=kr(n,o),u!=null&&i.unshift(Rr(n,u,a))):s||(u=kr(n,o),u!=null&&i.push(Rr(n,u,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Bf=/\r\n?/g,Ff=/\u0000|\uFFFD/g;function qi(e){return(typeof e=="string"?e:""+e).replace(Bf,`
`).replace(Ff,"")}function ts(e,t,n){if(t=qi(t),qi(e)!==t&&n)throw Error(G(425))}function Ds(){}var tl=null,nl=null;function rl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sl=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,ea=typeof Promise=="function"?Promise:void 0,Vf=typeof queueMicrotask=="function"?queueMicrotask:typeof ea<"u"?function(e){return ea.resolve(null).then(e).catch(Hf)}:sl;function Hf(e){setTimeout(function(){throw e})}function Co(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),br(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);br(t)}function en(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ta(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var er=Math.random().toString(36).slice(2),bt="__reactFiber$"+er,Tr="__reactProps$"+er,Ot="__reactContainer$"+er,ol="__reactEvents$"+er,Wf="__reactListeners$"+er,Xf="__reactHandles$"+er;function hn(e){var t=e[bt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ot]||n[bt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ta(e);e!==null;){if(n=e[bt])return n;e=ta(e)}return t}e=n,n=e.parentNode}return null}function Gr(e){return e=e[bt]||e[Ot],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function Ks(e){return e[Tr]||null}var ll=[],Tn=-1;function cn(e){return{current:e}}function we(e){0>Tn||(e.current=ll[Tn],ll[Tn]=null,Tn--)}function xe(e,t){Tn++,ll[Tn]=e.current,e.current=t}var ln={},Fe=cn(ln),Je=cn(!1),vn=ln;function Wn(e,t){var n=e.type.contextTypes;if(!n)return ln;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ze(e){return e=e.childContextTypes,e!=null}function Es(){we(Je),we(Fe)}function na(e,t,n){if(Fe.current!==ln)throw Error(G(168));xe(Fe,t),xe(Je,n)}function Bu(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(G(108,Ed(e)||"Unknown",s));return _e({},n,r)}function Ps(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ln,vn=Fe.current,xe(Fe,e),xe(Je,Je.current),!0}function ra(e,t,n){var r=e.stateNode;if(!r)throw Error(G(169));n?(e=Bu(e,t,vn),r.__reactInternalMemoizedMergedChildContext=e,we(Je),we(Fe),xe(Fe,e)):we(Je),xe(Je,n)}var Tt=null,Js=!1,ko=!1;function Fu(e){Tt===null?Tt=[e]:Tt.push(e)}function Yf(e){Js=!0,Fu(e)}function dn(){if(!ko&&Tt!==null){ko=!0;var e=0,t=ye;try{var n=Tt;for(ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Tt=null,Js=!1}catch(s){throw Tt!==null&&(Tt=Tt.slice(e+1)),pu(zl,dn),s}finally{ye=t,ko=!1}}return null}var In=[],$n=0,Rs=null,Ts=0,ut=[],ct=0,wn=null,It=1,$t="";function fn(e,t){In[$n++]=Ts,In[$n++]=Rs,Rs=e,Ts=t}function Gu(e,t,n){ut[ct++]=It,ut[ct++]=$t,ut[ct++]=wn,wn=e;var r=It;e=$t;var s=32-Nt(r)-1;r&=~(1<<s),n+=1;var o=32-Nt(t)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,It=1<<32-Nt(t)+s|n<<s|r,$t=o+e}else It=1<<o|n<<s|r,$t=e}function Xl(e){e.return!==null&&(fn(e,1),Gu(e,1,0))}function Yl(e){for(;e===Rs;)Rs=In[--$n],In[$n]=null,Ts=In[--$n],In[$n]=null;for(;e===wn;)wn=ut[--ct],ut[ct]=null,$t=ut[--ct],ut[ct]=null,It=ut[--ct],ut[ct]=null}var st=null,rt=null,Ne=!1,vt=null;function Vu(e,t){var n=dt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,st=e,rt=en(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,st=e,rt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=wn!==null?{id:It,overflow:$t}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=dt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,st=e,rt=null,!0):!1;default:return!1}}function il(e){return(e.mode&1)!==0&&(e.flags&128)===0}function al(e){if(Ne){var t=rt;if(t){var n=t;if(!sa(e,t)){if(il(e))throw Error(G(418));t=en(n.nextSibling);var r=st;t&&sa(e,t)?Vu(r,n):(e.flags=e.flags&-4097|2,Ne=!1,st=e)}}else{if(il(e))throw Error(G(418));e.flags=e.flags&-4097|2,Ne=!1,st=e}}}function oa(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;st=e}function ns(e){if(e!==st)return!1;if(!Ne)return oa(e),Ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!rl(e.type,e.memoizedProps)),t&&(t=rt)){if(il(e))throw Hu(),Error(G(418));for(;t;)Vu(e,t),t=en(t.nextSibling)}if(oa(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){rt=en(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}rt=null}}else rt=st?en(e.stateNode.nextSibling):null;return!0}function Hu(){for(var e=rt;e;)e=en(e.nextSibling)}function Xn(){rt=st=null,Ne=!1}function Ql(e){vt===null?vt=[e]:vt.push(e)}var Qf=Ft.ReactCurrentBatchConfig;function ir(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=s.refs;i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,e))}return e}function rs(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function la(e){var t=e._init;return t(e._payload)}function Wu(e){function t(g,c){if(e){var y=g.deletions;y===null?(g.deletions=[c],g.flags|=16):y.push(c)}}function n(g,c){if(!e)return null;for(;c!==null;)t(g,c),c=c.sibling;return null}function r(g,c){for(g=new Map;c!==null;)c.key!==null?g.set(c.key,c):g.set(c.index,c),c=c.sibling;return g}function s(g,c){return g=sn(g,c),g.index=0,g.sibling=null,g}function o(g,c,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<c?(g.flags|=2,c):y):(g.flags|=2,c)):(g.flags|=1048576,c)}function i(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,c,y,S){return c===null||c.tag!==6?(c=Ro(y,g.mode,S),c.return=g,c):(c=s(c,y),c.return=g,c)}function u(g,c,y,S){var D=y.type;return D===bn?p(g,c,y.props.children,S,y.key):c!==null&&(c.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ht&&la(D)===c.type)?(S=s(c,y.props),S.ref=ir(g,c,y),S.return=g,S):(S=ws(y.type,y.key,y.props,null,g.mode,S),S.ref=ir(g,c,y),S.return=g,S)}function d(g,c,y,S){return c===null||c.tag!==4||c.stateNode.containerInfo!==y.containerInfo||c.stateNode.implementation!==y.implementation?(c=To(y,g.mode,S),c.return=g,c):(c=s(c,y.children||[]),c.return=g,c)}function p(g,c,y,S,D){return c===null||c.tag!==7?(c=xn(y,g.mode,S,D),c.return=g,c):(c=s(c,y),c.return=g,c)}function v(g,c,y){if(typeof c=="string"&&c!==""||typeof c=="number")return c=Ro(""+c,g.mode,y),c.return=g,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case Wr:return y=ws(c.type,c.key,c.props,null,g.mode,y),y.ref=ir(g,null,c),y.return=g,y;case Mn:return c=To(c,g.mode,y),c.return=g,c;case Ht:var S=c._init;return v(g,S(c._payload),y)}if(dr(c)||nr(c))return c=xn(c,g.mode,y,null),c.return=g,c;rs(g,c)}return null}function h(g,c,y,S){var D=c!==null?c.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return D!==null?null:a(g,c,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Wr:return y.key===D?u(g,c,y,S):null;case Mn:return y.key===D?d(g,c,y,S):null;case Ht:return D=y._init,h(g,c,D(y._payload),S)}if(dr(y)||nr(y))return D!==null?null:p(g,c,y,S,null);rs(g,y)}return null}function E(g,c,y,S,D){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(y)||null,a(c,g,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Wr:return g=g.get(S.key===null?y:S.key)||null,u(c,g,S,D);case Mn:return g=g.get(S.key===null?y:S.key)||null,d(c,g,S,D);case Ht:var _=S._init;return E(g,c,y,_(S._payload),D)}if(dr(S)||nr(S))return g=g.get(y)||null,p(c,g,S,D,null);rs(c,S)}return null}function k(g,c,y,S){for(var D=null,_=null,O=c,H=c=0,le=null;O!==null&&H<y.length;H++){O.index>H?(le=O,O=null):le=O.sibling;var b=h(g,O,y[H],S);if(b===null){O===null&&(O=le);break}e&&O&&b.alternate===null&&t(g,O),c=o(b,c,H),_===null?D=b:_.sibling=b,_=b,O=le}if(H===y.length)return n(g,O),Ne&&fn(g,H),D;if(O===null){for(;H<y.length;H++)O=v(g,y[H],S),O!==null&&(c=o(O,c,H),_===null?D=O:_.sibling=O,_=O);return Ne&&fn(g,H),D}for(O=r(g,O);H<y.length;H++)le=E(O,g,H,y[H],S),le!==null&&(e&&le.alternate!==null&&O.delete(le.key===null?H:le.key),c=o(le,c,H),_===null?D=le:_.sibling=le,_=le);return e&&O.forEach(function(J){return t(g,J)}),Ne&&fn(g,H),D}function T(g,c,y,S){var D=nr(y);if(typeof D!="function")throw Error(G(150));if(y=D.call(y),y==null)throw Error(G(151));for(var _=D=null,O=c,H=c=0,le=null,b=y.next();O!==null&&!b.done;H++,b=y.next()){O.index>H?(le=O,O=null):le=O.sibling;var J=h(g,O,b.value,S);if(J===null){O===null&&(O=le);break}e&&O&&J.alternate===null&&t(g,O),c=o(J,c,H),_===null?D=J:_.sibling=J,_=J,O=le}if(b.done)return n(g,O),Ne&&fn(g,H),D;if(O===null){for(;!b.done;H++,b=y.next())b=v(g,b.value,S),b!==null&&(c=o(b,c,H),_===null?D=b:_.sibling=b,_=b);return Ne&&fn(g,H),D}for(O=r(g,O);!b.done;H++,b=y.next())b=E(O,g,H,b.value,S),b!==null&&(e&&b.alternate!==null&&O.delete(b.key===null?H:b.key),c=o(b,c,H),_===null?D=b:_.sibling=b,_=b);return e&&O.forEach(function(q){return t(g,q)}),Ne&&fn(g,H),D}function x(g,c,y,S){if(typeof y=="object"&&y!==null&&y.type===bn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Wr:e:{for(var D=y.key,_=c;_!==null;){if(_.key===D){if(D=y.type,D===bn){if(_.tag===7){n(g,_.sibling),c=s(_,y.props.children),c.return=g,g=c;break e}}else if(_.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ht&&la(D)===_.type){n(g,_.sibling),c=s(_,y.props),c.ref=ir(g,_,y),c.return=g,g=c;break e}n(g,_);break}else t(g,_);_=_.sibling}y.type===bn?(c=xn(y.props.children,g.mode,S,y.key),c.return=g,g=c):(S=ws(y.type,y.key,y.props,null,g.mode,S),S.ref=ir(g,c,y),S.return=g,g=S)}return i(g);case Mn:e:{for(_=y.key;c!==null;){if(c.key===_)if(c.tag===4&&c.stateNode.containerInfo===y.containerInfo&&c.stateNode.implementation===y.implementation){n(g,c.sibling),c=s(c,y.children||[]),c.return=g,g=c;break e}else{n(g,c);break}else t(g,c);c=c.sibling}c=To(y,g.mode,S),c.return=g,g=c}return i(g);case Ht:return _=y._init,x(g,c,_(y._payload),S)}if(dr(y))return k(g,c,y,S);if(nr(y))return T(g,c,y,S);rs(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,c!==null&&c.tag===6?(n(g,c.sibling),c=s(c,y),c.return=g,g=c):(n(g,c),c=Ro(y,g.mode,S),c.return=g,g=c),i(g)):n(g,c)}return x}var Yn=Wu(!0),Xu=Wu(!1),Is=cn(null),$s=null,An=null,Kl=null;function Jl(){Kl=An=$s=null}function Zl(e){var t=Is.current;we(Is),e._currentValue=t}function ul(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Gn(e,t){$s=e,Kl=An=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ke=!0),e.firstContext=null)}function pt(e){var t=e._currentValue;if(Kl!==e)if(e={context:e,memoizedValue:t,next:null},An===null){if($s===null)throw Error(G(308));An=e,$s.dependencies={lanes:0,firstContext:e}}else An=An.next=e;return t}var mn=null;function ql(e){mn===null?mn=[e]:mn.push(e)}function Yu(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ql(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ut(e,r)}function Ut(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Wt=!1;function ei(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function At(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function tn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ut(e,n)}return s=r.interleaved,s===null?(t.next=t,ql(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ut(e,n)}function hs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ol(e,n)}}function ia(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function As(e,t,n,r){var s=e.updateQueue;Wt=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,d=u.next;u.next=null,i===null?o=d:i.next=d,i=u;var p=e.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==i&&(a===null?p.firstBaseUpdate=d:a.next=d,p.lastBaseUpdate=u))}if(o!==null){var v=s.baseState;i=0,p=d=u=null,a=o;do{var h=a.lane,E=a.eventTime;if((r&h)===h){p!==null&&(p=p.next={eventTime:E,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var k=e,T=a;switch(h=t,E=n,T.tag){case 1:if(k=T.payload,typeof k=="function"){v=k.call(E,v,h);break e}v=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=T.payload,h=typeof k=="function"?k.call(E,v,h):k,h==null)break e;v=_e({},v,h);break e;case 2:Wt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else E={eventTime:E,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(d=p=E,u=v):p=p.next=E,i|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(p===null&&(u=v),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Sn|=i,e.lanes=i,e.memoizedState=v}}function aa(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var Vr={},Et=cn(Vr),Ir=cn(Vr),$r=cn(Vr);function gn(e){if(e===Vr)throw Error(G(174));return e}function ti(e,t){switch(xe($r,t),xe(Ir,e),xe(Et,Vr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Go(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Go(t,e)}we(Et),xe(Et,t)}function Qn(){we(Et),we(Ir),we($r)}function Ku(e){gn($r.current);var t=gn(Et.current),n=Go(t,e.type);t!==n&&(xe(Ir,e),xe(Et,n))}function ni(e){Ir.current===e&&(we(Et),we(Ir))}var Ce=cn(0);function Ls(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _o=[];function ri(){for(var e=0;e<_o.length;e++)_o[e]._workInProgressVersionPrimary=null;_o.length=0}var ms=Ft.ReactCurrentDispatcher,Mo=Ft.ReactCurrentBatchConfig,Nn=0,ke=null,Re=null,Ie=null,zs=!1,vr=!1,Ar=0,Kf=0;function Oe(){throw Error(G(321))}function si(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jt(e[n],t[n]))return!1;return!0}function oi(e,t,n,r,s,o){if(Nn=o,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ms.current=e===null||e.memoizedState===null?ep:tp,e=n(r,s),vr){o=0;do{if(vr=!1,Ar=0,25<=o)throw Error(G(301));o+=1,Ie=Re=null,t.updateQueue=null,ms.current=np,e=n(r,s)}while(vr)}if(ms.current=Os,t=Re!==null&&Re.next!==null,Nn=0,Ie=Re=ke=null,zs=!1,t)throw Error(G(300));return e}function li(){var e=Ar!==0;return Ar=0,e}function Mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?ke.memoizedState=Ie=e:Ie=Ie.next=e,Ie}function ht(){if(Re===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=Re.next;var t=Ie===null?ke.memoizedState:Ie.next;if(t!==null)Ie=t,Re=e;else{if(e===null)throw Error(G(310));Re=e,e={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Ie===null?ke.memoizedState=Ie=e:Ie=Ie.next=e}return Ie}function Lr(e,t){return typeof t=="function"?t(e):t}function bo(e){var t=ht(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=Re,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var a=i=null,u=null,d=o;do{var p=d.lane;if((Nn&p)===p)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var v={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(a=u=v,i=r):u=u.next=v,ke.lanes|=p,Sn|=p}d=d.next}while(d!==null&&d!==o);u===null?i=r:u.next=a,jt(r,t.memoizedState)||(Ke=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,ke.lanes|=o,Sn|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Do(e){var t=ht(),n=t.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);jt(o,t.memoizedState)||(Ke=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ju(){}function Zu(e,t){var n=ke,r=ht(),s=t(),o=!jt(r.memoizedState,s);if(o&&(r.memoizedState=s,Ke=!0),r=r.queue,ii(tc.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ie!==null&&Ie.memoizedState.tag&1){if(n.flags|=2048,zr(9,ec.bind(null,n,r,s,t),void 0,null),$e===null)throw Error(G(349));Nn&30||qu(n,t,s)}return s}function qu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ec(e,t,n,r){t.value=n,t.getSnapshot=r,nc(t)&&rc(e)}function tc(e,t,n){return n(function(){nc(t)&&rc(e)})}function nc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jt(e,n)}catch{return!0}}function rc(e){var t=Ut(e,1);t!==null&&St(t,e,1,-1)}function ua(e){var t=Mt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:e},t.queue=e,e=e.dispatch=qf.bind(null,ke,e),[t.memoizedState,e]}function zr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function sc(){return ht().memoizedState}function gs(e,t,n,r){var s=Mt();ke.flags|=e,s.memoizedState=zr(1|t,n,void 0,r===void 0?null:r)}function Zs(e,t,n,r){var s=ht();r=r===void 0?null:r;var o=void 0;if(Re!==null){var i=Re.memoizedState;if(o=i.destroy,r!==null&&si(r,i.deps)){s.memoizedState=zr(t,n,o,r);return}}ke.flags|=e,s.memoizedState=zr(1|t,n,o,r)}function ca(e,t){return gs(8390656,8,e,t)}function ii(e,t){return Zs(2048,8,e,t)}function oc(e,t){return Zs(4,2,e,t)}function lc(e,t){return Zs(4,4,e,t)}function ic(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ac(e,t,n){return n=n!=null?n.concat([e]):null,Zs(4,4,ic.bind(null,t,e),n)}function ai(){}function uc(e,t){var n=ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&si(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function cc(e,t){var n=ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&si(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function dc(e,t,n){return Nn&21?(jt(n,t)||(n=gu(),ke.lanes|=n,Sn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ke=!0),e.memoizedState=n)}function Jf(e,t){var n=ye;ye=n!==0&&4>n?n:4,e(!0);var r=Mo.transition;Mo.transition={};try{e(!1),t()}finally{ye=n,Mo.transition=r}}function fc(){return ht().memoizedState}function Zf(e,t,n){var r=rn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pc(e))hc(t,n);else if(n=Yu(e,t,n,r),n!==null){var s=He();St(n,e,r,s),mc(n,t,r)}}function qf(e,t,n){var r=rn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pc(e))hc(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,a=o(i,n);if(s.hasEagerState=!0,s.eagerState=a,jt(a,i)){var u=t.interleaved;u===null?(s.next=s,ql(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=Yu(e,t,s,r),n!==null&&(s=He(),St(n,e,r,s),mc(n,t,r))}}function pc(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function hc(e,t){vr=zs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mc(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ol(e,n)}}var Os={readContext:pt,useCallback:Oe,useContext:Oe,useEffect:Oe,useImperativeHandle:Oe,useInsertionEffect:Oe,useLayoutEffect:Oe,useMemo:Oe,useReducer:Oe,useRef:Oe,useState:Oe,useDebugValue:Oe,useDeferredValue:Oe,useTransition:Oe,useMutableSource:Oe,useSyncExternalStore:Oe,useId:Oe,unstable_isNewReconciler:!1},ep={readContext:pt,useCallback:function(e,t){return Mt().memoizedState=[e,t===void 0?null:t],e},useContext:pt,useEffect:ca,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,gs(4194308,4,ic.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gs(4194308,4,e,t)},useInsertionEffect:function(e,t){return gs(4,2,e,t)},useMemo:function(e,t){var n=Mt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Mt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Zf.bind(null,ke,e),[r.memoizedState,e]},useRef:function(e){var t=Mt();return e={current:e},t.memoizedState=e},useState:ua,useDebugValue:ai,useDeferredValue:function(e){return Mt().memoizedState=e},useTransition:function(){var e=ua(!1),t=e[0];return e=Jf.bind(null,e[1]),Mt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ke,s=Mt();if(Ne){if(n===void 0)throw Error(G(407));n=n()}else{if(n=t(),$e===null)throw Error(G(349));Nn&30||qu(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,ca(tc.bind(null,r,o,e),[e]),r.flags|=2048,zr(9,ec.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Mt(),t=$e.identifierPrefix;if(Ne){var n=$t,r=It;n=(r&~(1<<32-Nt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ar++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Kf++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},tp={readContext:pt,useCallback:uc,useContext:pt,useEffect:ii,useImperativeHandle:ac,useInsertionEffect:oc,useLayoutEffect:lc,useMemo:cc,useReducer:bo,useRef:sc,useState:function(){return bo(Lr)},useDebugValue:ai,useDeferredValue:function(e){var t=ht();return dc(t,Re.memoizedState,e)},useTransition:function(){var e=bo(Lr)[0],t=ht().memoizedState;return[e,t]},useMutableSource:Ju,useSyncExternalStore:Zu,useId:fc,unstable_isNewReconciler:!1},np={readContext:pt,useCallback:uc,useContext:pt,useEffect:ii,useImperativeHandle:ac,useInsertionEffect:oc,useLayoutEffect:lc,useMemo:cc,useReducer:Do,useRef:sc,useState:function(){return Do(Lr)},useDebugValue:ai,useDeferredValue:function(e){var t=ht();return Re===null?t.memoizedState=e:dc(t,Re.memoizedState,e)},useTransition:function(){var e=Do(Lr)[0],t=ht().memoizedState;return[e,t]},useMutableSource:Ju,useSyncExternalStore:Zu,useId:fc,unstable_isNewReconciler:!1};function yt(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function cl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var qs={isMounted:function(e){return(e=e._reactInternals)?kn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=He(),s=rn(e),o=At(r,s);o.payload=t,n!=null&&(o.callback=n),t=tn(e,o,s),t!==null&&(St(t,e,s,r),hs(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=He(),s=rn(e),o=At(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=tn(e,o,s),t!==null&&(St(t,e,s,r),hs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=He(),r=rn(e),s=At(n,r);s.tag=2,t!=null&&(s.callback=t),t=tn(e,s,r),t!==null&&(St(t,e,r,n),hs(t,e,r))}};function da(e,t,n,r,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!Er(n,r)||!Er(s,o):!0}function gc(e,t,n){var r=!1,s=ln,o=t.contextType;return typeof o=="object"&&o!==null?o=pt(o):(s=Ze(t)?vn:Fe.current,r=t.contextTypes,o=(r=r!=null)?Wn(e,s):ln),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qs,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function fa(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qs.enqueueReplaceState(t,t.state,null)}function dl(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ei(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=pt(o):(o=Ze(t)?vn:Fe.current,s.context=Wn(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(cl(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&qs.enqueueReplaceState(s,s.state,null),As(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Kn(e,t){try{var n="",r=t;do n+=Dd(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Eo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function fl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var rp=typeof WeakMap=="function"?WeakMap:Map;function yc(e,t,n){n=At(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bs||(Bs=!0,Sl=r),fl(e,t)},n}function xc(e,t,n){n=At(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){fl(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){fl(e,t),typeof r!="function"&&(nn===null?nn=new Set([this]):nn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function pa(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new rp;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=yp.bind(null,e,t,n),t.then(e,e))}function ha(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ma(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=At(-1,1),t.tag=2,tn(n,t,1))),n.lanes|=1),e)}var sp=Ft.ReactCurrentOwner,Ke=!1;function Ve(e,t,n,r){t.child=e===null?Xu(t,null,n,r):Yn(t,e.child,n,r)}function ga(e,t,n,r,s){n=n.render;var o=t.ref;return Gn(t,s),r=oi(e,t,n,r,o,s),n=li(),e!==null&&!Ke?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bt(e,t,s)):(Ne&&n&&Xl(t),t.flags|=1,Ve(e,t,r,s),t.child)}function ya(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!gi(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,vc(e,t,o,r,s)):(e=ws(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Er,n(i,r)&&e.ref===t.ref)return Bt(e,t,s)}return t.flags|=1,e=sn(o,r),e.ref=t.ref,e.return=t,t.child=e}function vc(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Er(o,r)&&e.ref===t.ref)if(Ke=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(Ke=!0);else return t.lanes=e.lanes,Bt(e,t,s)}return pl(e,t,n,r,s)}function wc(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(zn,nt),nt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xe(zn,nt),nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,xe(zn,nt),nt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,xe(zn,nt),nt|=r;return Ve(e,t,s,n),t.child}function Nc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function pl(e,t,n,r,s){var o=Ze(n)?vn:Fe.current;return o=Wn(t,o),Gn(t,s),n=oi(e,t,n,r,o,s),r=li(),e!==null&&!Ke?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bt(e,t,s)):(Ne&&r&&Xl(t),t.flags|=1,Ve(e,t,n,s),t.child)}function xa(e,t,n,r,s){if(Ze(n)){var o=!0;Ps(t)}else o=!1;if(Gn(t,s),t.stateNode===null)ys(e,t),gc(t,n,r),dl(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var u=i.context,d=n.contextType;typeof d=="object"&&d!==null?d=pt(d):(d=Ze(n)?vn:Fe.current,d=Wn(t,d));var p=n.getDerivedStateFromProps,v=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function";v||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||u!==d)&&fa(t,i,r,d),Wt=!1;var h=t.memoizedState;i.state=h,As(t,r,i,s),u=t.memoizedState,a!==r||h!==u||Je.current||Wt?(typeof p=="function"&&(cl(t,n,p,r),u=t.memoizedState),(a=Wt||da(t,n,a,r,h,u,d))?(v||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=d,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Qu(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:yt(t.type,a),i.props=d,v=t.pendingProps,h=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=pt(u):(u=Ze(n)?vn:Fe.current,u=Wn(t,u));var E=n.getDerivedStateFromProps;(p=typeof E=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==v||h!==u)&&fa(t,i,r,u),Wt=!1,h=t.memoizedState,i.state=h,As(t,r,i,s);var k=t.memoizedState;a!==v||h!==k||Je.current||Wt?(typeof E=="function"&&(cl(t,n,E,r),k=t.memoizedState),(d=Wt||da(t,n,d,r,h,k,u)||!1)?(p||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,k,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,k,u)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),i.props=r,i.state=k,i.context=u,r=d):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return hl(e,t,n,r,o,s)}function hl(e,t,n,r,s,o){Nc(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&ra(t,n,!1),Bt(e,t,o);r=t.stateNode,sp.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Yn(t,e.child,null,o),t.child=Yn(t,null,a,o)):Ve(e,t,a,o),t.memoizedState=r.state,s&&ra(t,n,!0),t.child}function Sc(e){var t=e.stateNode;t.pendingContext?na(e,t.pendingContext,t.pendingContext!==t.context):t.context&&na(e,t.context,!1),ti(e,t.containerInfo)}function va(e,t,n,r,s){return Xn(),Ql(s),t.flags|=256,Ve(e,t,n,r),t.child}var ml={dehydrated:null,treeContext:null,retryLane:0};function gl(e){return{baseLanes:e,cachePool:null,transitions:null}}function jc(e,t,n){var r=t.pendingProps,s=Ce.current,o=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),xe(Ce,s&1),e===null)return al(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=no(i,r,0,null),e=xn(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=gl(n),t.memoizedState=ml,e):ui(t,i));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return op(e,t,i,r,a,s,n);if(o){o=r.fallback,i=t.mode,s=e.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=sn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=sn(a,o):(o=xn(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?gl(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=ml,r}return o=e.child,e=o.sibling,r=sn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ui(e,t){return t=no({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ss(e,t,n,r){return r!==null&&Ql(r),Yn(t,e.child,null,n),e=ui(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function op(e,t,n,r,s,o,i){if(n)return t.flags&256?(t.flags&=-257,r=Eo(Error(G(422))),ss(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=no({mode:"visible",children:r.children},s,0,null),o=xn(o,s,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Yn(t,e.child,null,i),t.child.memoizedState=gl(i),t.memoizedState=ml,o);if(!(t.mode&1))return ss(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(G(419)),r=Eo(o,r,void 0),ss(e,t,i,r)}if(a=(i&e.childLanes)!==0,Ke||a){if(r=$e,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ut(e,s),St(r,e,s,-1))}return mi(),r=Eo(Error(G(421))),ss(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=xp.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,rt=en(s.nextSibling),st=t,Ne=!0,vt=null,e!==null&&(ut[ct++]=It,ut[ct++]=$t,ut[ct++]=wn,It=e.id,$t=e.overflow,wn=t),t=ui(t,r.children),t.flags|=4096,t)}function wa(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ul(e.return,t,n)}function Po(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function Cc(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(Ve(e,t,r.children,n),r=Ce.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wa(e,n,t);else if(e.tag===19)wa(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xe(Ce,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ls(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Po(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ls(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Po(t,!0,n,null,o);break;case"together":Po(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ys(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Sn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,n=sn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=sn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function lp(e,t,n){switch(t.tag){case 3:Sc(t),Xn();break;case 5:Ku(t);break;case 1:Ze(t.type)&&Ps(t);break;case 4:ti(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;xe(Is,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(xe(Ce,Ce.current&1),t.flags|=128,null):n&t.child.childLanes?jc(e,t,n):(xe(Ce,Ce.current&1),e=Bt(e,t,n),e!==null?e.sibling:null);xe(Ce,Ce.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Cc(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),xe(Ce,Ce.current),r)break;return null;case 22:case 23:return t.lanes=0,wc(e,t,n)}return Bt(e,t,n)}var kc,yl,_c,Mc;kc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yl=function(){};_c=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,gn(Et.current);var o=null;switch(n){case"input":s=Oo(e,s),r=Oo(e,r),o=[];break;case"select":s=_e({},s,{value:void 0}),r=_e({},r,{value:void 0}),o=[];break;case"textarea":s=Fo(e,s),r=Fo(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ds)}Vo(n,r);var i;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(jr.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var u=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==a&&(u!=null||a!=null))if(d==="style")if(a){for(i in a)!a.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&a[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(o||(o=[]),o.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(jr.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ve("scroll",e),o||a===u||(o=[])):(o=o||[]).push(d,u))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};Mc=function(e,t,n,r){n!==r&&(t.flags|=4)};function ar(e,t){if(!Ne)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ue(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ip(e,t,n){var r=t.pendingProps;switch(Yl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(t),null;case 1:return Ze(t.type)&&Es(),Ue(t),null;case 3:return r=t.stateNode,Qn(),we(Je),we(Fe),ri(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ns(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vt!==null&&(kl(vt),vt=null))),yl(e,t),Ue(t),null;case 5:ni(t);var s=gn($r.current);if(n=t.type,e!==null&&t.stateNode!=null)_c(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(G(166));return Ue(t),null}if(e=gn(Et.current),ns(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[bt]=t,r[Tr]=o,e=(t.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(s=0;s<pr.length;s++)ve(pr[s],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":Di(r,o),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ve("invalid",r);break;case"textarea":Pi(r,o),ve("invalid",r)}Vo(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&ts(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&ts(r.textContent,a,e),s=["children",""+a]):jr.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&ve("scroll",r)}switch(n){case"input":Xr(r),Ei(r,o,!0);break;case"textarea":Xr(r),Ri(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ds)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=tu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[bt]=t,e[Tr]=r,kc(e,t,!1,!1),t.stateNode=e;e:{switch(i=Ho(n,r),n){case"dialog":ve("cancel",e),ve("close",e),s=r;break;case"iframe":case"object":case"embed":ve("load",e),s=r;break;case"video":case"audio":for(s=0;s<pr.length;s++)ve(pr[s],e);s=r;break;case"source":ve("error",e),s=r;break;case"img":case"image":case"link":ve("error",e),ve("load",e),s=r;break;case"details":ve("toggle",e),s=r;break;case"input":Di(e,r),s=Oo(e,r),ve("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=_e({},r,{value:void 0}),ve("invalid",e);break;case"textarea":Pi(e,r),s=Fo(e,r),ve("invalid",e);break;default:s=r}Vo(n,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?su(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&nu(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Cr(e,u):typeof u=="number"&&Cr(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(jr.hasOwnProperty(o)?u!=null&&o==="onScroll"&&ve("scroll",e):u!=null&&Tl(e,o,u,i))}switch(n){case"input":Xr(e),Ei(e,r,!1);break;case"textarea":Xr(e),Ri(e);break;case"option":r.value!=null&&e.setAttribute("value",""+on(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?On(e,!!r.multiple,o,!1):r.defaultValue!=null&&On(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ds)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ue(t),null;case 6:if(e&&t.stateNode!=null)Mc(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(G(166));if(n=gn($r.current),gn(Et.current),ns(t)){if(r=t.stateNode,n=t.memoizedProps,r[bt]=t,(o=r.nodeValue!==n)&&(e=st,e!==null))switch(e.tag){case 3:ts(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ts(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bt]=t,t.stateNode=r}return Ue(t),null;case 13:if(we(Ce),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ne&&rt!==null&&t.mode&1&&!(t.flags&128))Hu(),Xn(),t.flags|=98560,o=!1;else if(o=ns(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(G(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(G(317));o[bt]=t}else Xn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ue(t),o=!1}else vt!==null&&(kl(vt),vt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ce.current&1?Te===0&&(Te=3):mi())),t.updateQueue!==null&&(t.flags|=4),Ue(t),null);case 4:return Qn(),yl(e,t),e===null&&Pr(t.stateNode.containerInfo),Ue(t),null;case 10:return Zl(t.type._context),Ue(t),null;case 17:return Ze(t.type)&&Es(),Ue(t),null;case 19:if(we(Ce),o=t.memoizedState,o===null)return Ue(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)ar(o,!1);else{if(Te!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Ls(e),i!==null){for(t.flags|=128,ar(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xe(Ce,Ce.current&1|2),t.child}e=e.sibling}o.tail!==null&&De()>Jn&&(t.flags|=128,r=!0,ar(o,!1),t.lanes=4194304)}else{if(!r)if(e=Ls(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ar(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Ne)return Ue(t),null}else 2*De()-o.renderingStartTime>Jn&&n!==1073741824&&(t.flags|=128,r=!0,ar(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=De(),t.sibling=null,n=Ce.current,xe(Ce,r?n&1|2:n&1),t):(Ue(t),null);case 22:case 23:return hi(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?nt&1073741824&&(Ue(t),t.subtreeFlags&6&&(t.flags|=8192)):Ue(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function ap(e,t){switch(Yl(t),t.tag){case 1:return Ze(t.type)&&Es(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qn(),we(Je),we(Fe),ri(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ni(t),null;case 13:if(we(Ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));Xn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return we(Ce),null;case 4:return Qn(),null;case 10:return Zl(t.type._context),null;case 22:case 23:return hi(),null;case 24:return null;default:return null}}var os=!1,Be=!1,up=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Ln(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(e,t,r)}else n.current=null}function xl(e,t,n){try{n()}catch(r){Me(e,t,r)}}var Na=!1;function cp(e,t){if(tl=_s,e=Ru(),Wl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,a=-1,u=-1,d=0,p=0,v=e,h=null;t:for(;;){for(var E;v!==n||s!==0&&v.nodeType!==3||(a=i+s),v!==o||r!==0&&v.nodeType!==3||(u=i+r),v.nodeType===3&&(i+=v.nodeValue.length),(E=v.firstChild)!==null;)h=v,v=E;for(;;){if(v===e)break t;if(h===n&&++d===s&&(a=i),h===o&&++p===r&&(u=i),(E=v.nextSibling)!==null)break;v=h,h=v.parentNode}v=E}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nl={focusedElem:e,selectionRange:n},_s=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var T=k.memoizedProps,x=k.memoizedState,g=t.stateNode,c=g.getSnapshotBeforeUpdate(t.elementType===t.type?T:yt(t.type,T),x);g.__reactInternalSnapshotBeforeUpdate=c}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(S){Me(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return k=Na,Na=!1,k}function wr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&xl(t,n,o)}s=s.next}while(s!==r)}}function eo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function vl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function bc(e){var t=e.alternate;t!==null&&(e.alternate=null,bc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bt],delete t[Tr],delete t[ol],delete t[Wf],delete t[Xf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Dc(e){return e.tag===5||e.tag===3||e.tag===4}function Sa(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ds));else if(r!==4&&(e=e.child,e!==null))for(wl(e,t,n),e=e.sibling;e!==null;)wl(e,t,n),e=e.sibling}function Nl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Nl(e,t,n),e=e.sibling;e!==null;)Nl(e,t,n),e=e.sibling}var Ae=null,xt=!1;function Gt(e,t,n){for(n=n.child;n!==null;)Ec(e,t,n),n=n.sibling}function Ec(e,t,n){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Ws,n)}catch{}switch(n.tag){case 5:Be||Ln(n,t);case 6:var r=Ae,s=xt;Ae=null,Gt(e,t,n),Ae=r,xt=s,Ae!==null&&(xt?(e=Ae,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ae.removeChild(n.stateNode));break;case 18:Ae!==null&&(xt?(e=Ae,n=n.stateNode,e.nodeType===8?Co(e.parentNode,n):e.nodeType===1&&Co(e,n),br(e)):Co(Ae,n.stateNode));break;case 4:r=Ae,s=xt,Ae=n.stateNode.containerInfo,xt=!0,Gt(e,t,n),Ae=r,xt=s;break;case 0:case 11:case 14:case 15:if(!Be&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&xl(n,t,i),s=s.next}while(s!==r)}Gt(e,t,n);break;case 1:if(!Be&&(Ln(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Me(n,t,a)}Gt(e,t,n);break;case 21:Gt(e,t,n);break;case 22:n.mode&1?(Be=(r=Be)||n.memoizedState!==null,Gt(e,t,n),Be=r):Gt(e,t,n);break;default:Gt(e,t,n)}}function ja(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new up),t.forEach(function(r){var s=vp.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function gt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:Ae=a.stateNode,xt=!1;break e;case 3:Ae=a.stateNode.containerInfo,xt=!0;break e;case 4:Ae=a.stateNode.containerInfo,xt=!0;break e}a=a.return}if(Ae===null)throw Error(G(160));Ec(o,i,s),Ae=null,xt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Me(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Pc(t,e),t=t.sibling}function Pc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gt(t,e),_t(e),r&4){try{wr(3,e,e.return),eo(3,e)}catch(T){Me(e,e.return,T)}try{wr(5,e,e.return)}catch(T){Me(e,e.return,T)}}break;case 1:gt(t,e),_t(e),r&512&&n!==null&&Ln(n,n.return);break;case 5:if(gt(t,e),_t(e),r&512&&n!==null&&Ln(n,n.return),e.flags&32){var s=e.stateNode;try{Cr(s,"")}catch(T){Me(e,e.return,T)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&qa(s,o),Ho(a,i);var d=Ho(a,o);for(i=0;i<u.length;i+=2){var p=u[i],v=u[i+1];p==="style"?su(s,v):p==="dangerouslySetInnerHTML"?nu(s,v):p==="children"?Cr(s,v):Tl(s,p,v,d)}switch(a){case"input":Uo(s,o);break;case"textarea":eu(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?On(s,!!o.multiple,E,!1):h!==!!o.multiple&&(o.defaultValue!=null?On(s,!!o.multiple,o.defaultValue,!0):On(s,!!o.multiple,o.multiple?[]:"",!1))}s[Tr]=o}catch(T){Me(e,e.return,T)}}break;case 6:if(gt(t,e),_t(e),r&4){if(e.stateNode===null)throw Error(G(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(T){Me(e,e.return,T)}}break;case 3:if(gt(t,e),_t(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{br(t.containerInfo)}catch(T){Me(e,e.return,T)}break;case 4:gt(t,e),_t(e);break;case 13:gt(t,e),_t(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(fi=De())),r&4&&ja(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(Be=(d=Be)||p,gt(t,e),Be=d):gt(t,e),_t(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(Y=e,p=e.child;p!==null;){for(v=Y=p;Y!==null;){switch(h=Y,E=h.child,h.tag){case 0:case 11:case 14:case 15:wr(4,h,h.return);break;case 1:Ln(h,h.return);var k=h.stateNode;if(typeof k.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(T){Me(r,n,T)}}break;case 5:Ln(h,h.return);break;case 22:if(h.memoizedState!==null){ka(v);continue}}E!==null?(E.return=h,Y=E):ka(v)}p=p.sibling}e:for(p=null,v=e;;){if(v.tag===5){if(p===null){p=v;try{s=v.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=v.stateNode,u=v.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=ru("display",i))}catch(T){Me(e,e.return,T)}}}else if(v.tag===6){if(p===null)try{v.stateNode.nodeValue=d?"":v.memoizedProps}catch(T){Me(e,e.return,T)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;p===v&&(p=null),v=v.return}p===v&&(p=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:gt(t,e),_t(e),r&4&&ja(e);break;case 21:break;default:gt(t,e),_t(e)}}function _t(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Dc(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Cr(s,""),r.flags&=-33);var o=Sa(e);Nl(e,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,a=Sa(e);wl(e,a,i);break;default:throw Error(G(161))}}catch(u){Me(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dp(e,t,n){Y=e,Rc(e)}function Rc(e,t,n){for(var r=(e.mode&1)!==0;Y!==null;){var s=Y,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||os;if(!i){var a=s.alternate,u=a!==null&&a.memoizedState!==null||Be;a=os;var d=Be;if(os=i,(Be=u)&&!d)for(Y=s;Y!==null;)i=Y,u=i.child,i.tag===22&&i.memoizedState!==null?_a(s):u!==null?(u.return=i,Y=u):_a(s);for(;o!==null;)Y=o,Rc(o),o=o.sibling;Y=s,os=a,Be=d}Ca(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Y=o):Ca(e)}}function Ca(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Be||eo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Be)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:yt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&aa(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}aa(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var v=p.dehydrated;v!==null&&br(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Be||t.flags&512&&vl(t)}catch(h){Me(t,t.return,h)}}if(t===e){Y=null;break}if(n=t.sibling,n!==null){n.return=t.return,Y=n;break}Y=t.return}}function ka(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Y=n;break}Y=t.return}}function _a(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{eo(4,t)}catch(u){Me(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){Me(t,s,u)}}var o=t.return;try{vl(t)}catch(u){Me(t,o,u)}break;case 5:var i=t.return;try{vl(t)}catch(u){Me(t,i,u)}}}catch(u){Me(t,t.return,u)}if(t===e){Y=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Y=a;break}Y=t.return}}var fp=Math.ceil,Us=Ft.ReactCurrentDispatcher,ci=Ft.ReactCurrentOwner,ft=Ft.ReactCurrentBatchConfig,he=0,$e=null,Ee=null,Le=0,nt=0,zn=cn(0),Te=0,Or=null,Sn=0,to=0,di=0,Nr=null,Qe=null,fi=0,Jn=1/0,Rt=null,Bs=!1,Sl=null,nn=null,ls=!1,Kt=null,Fs=0,Sr=0,jl=null,xs=-1,vs=0;function He(){return he&6?De():xs!==-1?xs:xs=De()}function rn(e){return e.mode&1?he&2&&Le!==0?Le&-Le:Qf.transition!==null?(vs===0&&(vs=gu()),vs):(e=ye,e!==0||(e=window.event,e=e===void 0?16:ju(e.type)),e):1}function St(e,t,n,r){if(50<Sr)throw Sr=0,jl=null,Error(G(185));Br(e,n,r),(!(he&2)||e!==$e)&&(e===$e&&(!(he&2)&&(to|=n),Te===4&&Yt(e,Le)),qe(e,r),n===1&&he===0&&!(t.mode&1)&&(Jn=De()+500,Js&&dn()))}function qe(e,t){var n=e.callbackNode;Yd(e,t);var r=ks(e,e===$e?Le:0);if(r===0)n!==null&&$i(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&$i(n),t===1)e.tag===0?Yf(Ma.bind(null,e)):Fu(Ma.bind(null,e)),Vf(function(){!(he&6)&&dn()}),n=null;else{switch(yu(r)){case 1:n=zl;break;case 4:n=hu;break;case 16:n=Cs;break;case 536870912:n=mu;break;default:n=Cs}n=Uc(n,Tc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Tc(e,t){if(xs=-1,vs=0,he&6)throw Error(G(327));var n=e.callbackNode;if(Vn()&&e.callbackNode!==n)return null;var r=ks(e,e===$e?Le:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Gs(e,r);else{t=r;var s=he;he|=2;var o=$c();($e!==e||Le!==t)&&(Rt=null,Jn=De()+500,yn(e,t));do try{mp();break}catch(a){Ic(e,a)}while(!0);Jl(),Us.current=o,he=s,Ee!==null?t=0:($e=null,Le=0,t=Te)}if(t!==0){if(t===2&&(s=Ko(e),s!==0&&(r=s,t=Cl(e,s))),t===1)throw n=Or,yn(e,0),Yt(e,r),qe(e,De()),n;if(t===6)Yt(e,r);else{if(s=e.current.alternate,!(r&30)&&!pp(s)&&(t=Gs(e,r),t===2&&(o=Ko(e),o!==0&&(r=o,t=Cl(e,o))),t===1))throw n=Or,yn(e,0),Yt(e,r),qe(e,De()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(G(345));case 2:pn(e,Qe,Rt);break;case 3:if(Yt(e,r),(r&130023424)===r&&(t=fi+500-De(),10<t)){if(ks(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){He(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=sl(pn.bind(null,e,Qe,Rt),t);break}pn(e,Qe,Rt);break;case 4:if(Yt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-Nt(r);o=1<<i,i=t[i],i>s&&(s=i),r&=~o}if(r=s,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fp(r/1960))-r,10<r){e.timeoutHandle=sl(pn.bind(null,e,Qe,Rt),r);break}pn(e,Qe,Rt);break;case 5:pn(e,Qe,Rt);break;default:throw Error(G(329))}}}return qe(e,De()),e.callbackNode===n?Tc.bind(null,e):null}function Cl(e,t){var n=Nr;return e.current.memoizedState.isDehydrated&&(yn(e,t).flags|=256),e=Gs(e,t),e!==2&&(t=Qe,Qe=n,t!==null&&kl(t)),e}function kl(e){Qe===null?Qe=e:Qe.push.apply(Qe,e)}function pp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!jt(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yt(e,t){for(t&=~di,t&=~to,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Nt(t),r=1<<n;e[n]=-1,t&=~r}}function Ma(e){if(he&6)throw Error(G(327));Vn();var t=ks(e,0);if(!(t&1))return qe(e,De()),null;var n=Gs(e,t);if(e.tag!==0&&n===2){var r=Ko(e);r!==0&&(t=r,n=Cl(e,r))}if(n===1)throw n=Or,yn(e,0),Yt(e,t),qe(e,De()),n;if(n===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pn(e,Qe,Rt),qe(e,De()),null}function pi(e,t){var n=he;he|=1;try{return e(t)}finally{he=n,he===0&&(Jn=De()+500,Js&&dn())}}function jn(e){Kt!==null&&Kt.tag===0&&!(he&6)&&Vn();var t=he;he|=1;var n=ft.transition,r=ye;try{if(ft.transition=null,ye=1,e)return e()}finally{ye=r,ft.transition=n,he=t,!(he&6)&&dn()}}function hi(){nt=zn.current,we(zn)}function yn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Gf(n)),Ee!==null)for(n=Ee.return;n!==null;){var r=n;switch(Yl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Es();break;case 3:Qn(),we(Je),we(Fe),ri();break;case 5:ni(r);break;case 4:Qn();break;case 13:we(Ce);break;case 19:we(Ce);break;case 10:Zl(r.type._context);break;case 22:case 23:hi()}n=n.return}if($e=e,Ee=e=sn(e.current,null),Le=nt=t,Te=0,Or=null,di=to=Sn=0,Qe=Nr=null,mn!==null){for(t=0;t<mn.length;t++)if(n=mn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}mn=null}return e}function Ic(e,t){do{var n=Ee;try{if(Jl(),ms.current=Os,zs){for(var r=ke.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}zs=!1}if(Nn=0,Ie=Re=ke=null,vr=!1,Ar=0,ci.current=null,n===null||n.return===null){Te=1,Or=t,Ee=null;break}e:{var o=e,i=n.return,a=n,u=t;if(t=Le,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,p=a,v=p.tag;if(!(p.mode&1)&&(v===0||v===11||v===15)){var h=p.alternate;h?(p.updateQueue=h.updateQueue,p.memoizedState=h.memoizedState,p.lanes=h.lanes):(p.updateQueue=null,p.memoizedState=null)}var E=ha(i);if(E!==null){E.flags&=-257,ma(E,i,a,o,t),E.mode&1&&pa(o,d,t),t=E,u=d;var k=t.updateQueue;if(k===null){var T=new Set;T.add(u),t.updateQueue=T}else k.add(u);break e}else{if(!(t&1)){pa(o,d,t),mi();break e}u=Error(G(426))}}else if(Ne&&a.mode&1){var x=ha(i);if(x!==null){!(x.flags&65536)&&(x.flags|=256),ma(x,i,a,o,t),Ql(Kn(u,a));break e}}o=u=Kn(u,a),Te!==4&&(Te=2),Nr===null?Nr=[o]:Nr.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=yc(o,u,t);ia(o,g);break e;case 1:a=u;var c=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof c.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(nn===null||!nn.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=xc(o,a,t);ia(o,S);break e}}o=o.return}while(o!==null)}Lc(n)}catch(D){t=D,Ee===n&&n!==null&&(Ee=n=n.return);continue}break}while(!0)}function $c(){var e=Us.current;return Us.current=Os,e===null?Os:e}function mi(){(Te===0||Te===3||Te===2)&&(Te=4),$e===null||!(Sn&268435455)&&!(to&268435455)||Yt($e,Le)}function Gs(e,t){var n=he;he|=2;var r=$c();($e!==e||Le!==t)&&(Rt=null,yn(e,t));do try{hp();break}catch(s){Ic(e,s)}while(!0);if(Jl(),he=n,Us.current=r,Ee!==null)throw Error(G(261));return $e=null,Le=0,Te}function hp(){for(;Ee!==null;)Ac(Ee)}function mp(){for(;Ee!==null&&!Od();)Ac(Ee)}function Ac(e){var t=Oc(e.alternate,e,nt);e.memoizedProps=e.pendingProps,t===null?Lc(e):Ee=t,ci.current=null}function Lc(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ap(n,t),n!==null){n.flags&=32767,Ee=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Te=6,Ee=null;return}}else if(n=ip(n,t,nt),n!==null){Ee=n;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);Te===0&&(Te=5)}function pn(e,t,n){var r=ye,s=ft.transition;try{ft.transition=null,ye=1,gp(e,t,n,r)}finally{ft.transition=s,ye=r}return null}function gp(e,t,n,r){do Vn();while(Kt!==null);if(he&6)throw Error(G(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Qd(e,o),e===$e&&(Ee=$e=null,Le=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ls||(ls=!0,Uc(Cs,function(){return Vn(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ft.transition,ft.transition=null;var i=ye;ye=1;var a=he;he|=4,ci.current=null,cp(e,n),Pc(n,e),Af(nl),_s=!!tl,nl=tl=null,e.current=n,dp(n),Ud(),he=a,ye=i,ft.transition=o}else e.current=n;if(ls&&(ls=!1,Kt=e,Fs=s),o=e.pendingLanes,o===0&&(nn=null),Gd(n.stateNode),qe(e,De()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Bs)throw Bs=!1,e=Sl,Sl=null,e;return Fs&1&&e.tag!==0&&Vn(),o=e.pendingLanes,o&1?e===jl?Sr++:(Sr=0,jl=e):Sr=0,dn(),null}function Vn(){if(Kt!==null){var e=yu(Fs),t=ft.transition,n=ye;try{if(ft.transition=null,ye=16>e?16:e,Kt===null)var r=!1;else{if(e=Kt,Kt=null,Fs=0,he&6)throw Error(G(331));var s=he;for(he|=4,Y=e.current;Y!==null;){var o=Y,i=o.child;if(Y.flags&16){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var d=a[u];for(Y=d;Y!==null;){var p=Y;switch(p.tag){case 0:case 11:case 15:wr(8,p,o)}var v=p.child;if(v!==null)v.return=p,Y=v;else for(;Y!==null;){p=Y;var h=p.sibling,E=p.return;if(bc(p),p===d){Y=null;break}if(h!==null){h.return=E,Y=h;break}Y=E}}}var k=o.alternate;if(k!==null){var T=k.child;if(T!==null){k.child=null;do{var x=T.sibling;T.sibling=null,T=x}while(T!==null)}}Y=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Y=i;else e:for(;Y!==null;){if(o=Y,o.flags&2048)switch(o.tag){case 0:case 11:case 15:wr(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,Y=g;break e}Y=o.return}}var c=e.current;for(Y=c;Y!==null;){i=Y;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,Y=y;else e:for(i=c;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:eo(9,a)}}catch(D){Me(a,a.return,D)}if(a===i){Y=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Y=S;break e}Y=a.return}}if(he=s,dn(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Ws,e)}catch{}r=!0}return r}finally{ye=n,ft.transition=t}}return!1}function ba(e,t,n){t=Kn(n,t),t=yc(e,t,1),e=tn(e,t,1),t=He(),e!==null&&(Br(e,1,t),qe(e,t))}function Me(e,t,n){if(e.tag===3)ba(e,e,n);else for(;t!==null;){if(t.tag===3){ba(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(nn===null||!nn.has(r))){e=Kn(n,e),e=xc(t,e,1),t=tn(t,e,1),e=He(),t!==null&&(Br(t,1,e),qe(t,e));break}}t=t.return}}function yp(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=He(),e.pingedLanes|=e.suspendedLanes&n,$e===e&&(Le&n)===n&&(Te===4||Te===3&&(Le&130023424)===Le&&500>De()-fi?yn(e,0):di|=n),qe(e,t)}function zc(e,t){t===0&&(e.mode&1?(t=Kr,Kr<<=1,!(Kr&130023424)&&(Kr=4194304)):t=1);var n=He();e=Ut(e,t),e!==null&&(Br(e,t,n),qe(e,n))}function xp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),zc(e,n)}function vp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(t),zc(e,n)}var Oc;Oc=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Je.current)Ke=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ke=!1,lp(e,t,n);Ke=!!(e.flags&131072)}else Ke=!1,Ne&&t.flags&1048576&&Gu(t,Ts,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ys(e,t),e=t.pendingProps;var s=Wn(t,Fe.current);Gn(t,n),s=oi(null,t,r,e,s,n);var o=li();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ze(r)?(o=!0,Ps(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ei(t),s.updater=qs,t.stateNode=s,s._reactInternals=t,dl(t,r,e,n),t=hl(null,t,r,!0,o,n)):(t.tag=0,Ne&&o&&Xl(t),Ve(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ys(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Np(r),e=yt(r,e),s){case 0:t=pl(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=ga(null,t,r,e,n);break e;case 14:t=ya(null,t,r,yt(r.type,e),n);break e}throw Error(G(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yt(r,s),pl(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yt(r,s),xa(e,t,r,s,n);case 3:e:{if(Sc(t),e===null)throw Error(G(387));r=t.pendingProps,o=t.memoizedState,s=o.element,Qu(e,t),As(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Kn(Error(G(423)),t),t=va(e,t,r,n,s);break e}else if(r!==s){s=Kn(Error(G(424)),t),t=va(e,t,r,n,s);break e}else for(rt=en(t.stateNode.containerInfo.firstChild),st=t,Ne=!0,vt=null,n=Xu(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xn(),r===s){t=Bt(e,t,n);break e}Ve(e,t,r,n)}t=t.child}return t;case 5:return Ku(t),e===null&&al(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,rl(r,s)?i=null:o!==null&&rl(r,o)&&(t.flags|=32),Nc(e,t),Ve(e,t,i,n),t.child;case 6:return e===null&&al(t),null;case 13:return jc(e,t,n);case 4:return ti(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Yn(t,null,r,n):Ve(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yt(r,s),ga(e,t,r,s,n);case 7:return Ve(e,t,t.pendingProps,n),t.child;case 8:return Ve(e,t,t.pendingProps.children,n),t.child;case 12:return Ve(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,xe(Is,r._currentValue),r._currentValue=i,o!==null)if(jt(o.value,i)){if(o.children===s.children&&!Je.current){t=Bt(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=At(-1,n&-n),u.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?u.next=u:(u.next=p.next,p.next=u),d.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),ul(o.return,n,t),a.lanes|=n;break}u=u.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(G(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),ul(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Ve(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Gn(t,n),s=pt(s),r=r(s),t.flags|=1,Ve(e,t,r,n),t.child;case 14:return r=t.type,s=yt(r,t.pendingProps),s=yt(r.type,s),ya(e,t,r,s,n);case 15:return vc(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yt(r,s),ys(e,t),t.tag=1,Ze(r)?(e=!0,Ps(t)):e=!1,Gn(t,n),gc(t,r,s),dl(t,r,s,n),hl(null,t,r,!0,e,n);case 19:return Cc(e,t,n);case 22:return wc(e,t,n)}throw Error(G(156,t.tag))};function Uc(e,t){return pu(e,t)}function wp(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dt(e,t,n,r){return new wp(e,t,n,r)}function gi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Np(e){if(typeof e=="function")return gi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$l)return 11;if(e===Al)return 14}return 2}function sn(e,t){var n=e.alternate;return n===null?(n=dt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ws(e,t,n,r,s,o){var i=2;if(r=e,typeof e=="function")gi(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case bn:return xn(n.children,s,o,t);case Il:i=8,s|=8;break;case $o:return e=dt(12,n,t,s|2),e.elementType=$o,e.lanes=o,e;case Ao:return e=dt(13,n,t,s),e.elementType=Ao,e.lanes=o,e;case Lo:return e=dt(19,n,t,s),e.elementType=Lo,e.lanes=o,e;case Ka:return no(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ya:i=10;break e;case Qa:i=9;break e;case $l:i=11;break e;case Al:i=14;break e;case Ht:i=16,r=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=dt(i,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function xn(e,t,n,r){return e=dt(7,e,r,t),e.lanes=n,e}function no(e,t,n,r){return e=dt(22,e,r,t),e.elementType=Ka,e.lanes=n,e.stateNode={isHidden:!1},e}function Ro(e,t,n){return e=dt(6,e,null,t),e.lanes=n,e}function To(e,t,n){return t=dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Sp(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=po(0),this.expirationTimes=po(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=po(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yi(e,t,n,r,s,o,i,a,u){return e=new Sp(e,t,n,a,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=dt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ei(o),e}function jp(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return ln;e=e._reactInternals;e:{if(kn(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ze(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var n=e.type;if(Ze(n))return Bu(e,n,t)}return t}function Fc(e,t,n,r,s,o,i,a,u){return e=yi(n,r,!0,e,s,o,i,a,u),e.context=Bc(null),n=e.current,r=He(),s=rn(n),o=At(r,s),o.callback=t??null,tn(n,o,s),e.current.lanes=s,Br(e,s,r),qe(e,r),e}function ro(e,t,n,r){var s=t.current,o=He(),i=rn(s);return n=Bc(n),t.context===null?t.context=n:t.pendingContext=n,t=At(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=tn(s,t,i),e!==null&&(St(e,s,i,o),hs(e,s,i)),i}function Vs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Da(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xi(e,t){Da(e,t),(e=e.alternate)&&Da(e,t)}function Cp(){return null}var Gc=typeof reportError=="function"?reportError:function(e){console.error(e)};function vi(e){this._internalRoot=e}so.prototype.render=vi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));ro(e,t,null,null)};so.prototype.unmount=vi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jn(function(){ro(null,e,null,null)}),t[Ot]=null}};function so(e){this._internalRoot=e}so.prototype.unstable_scheduleHydration=function(e){if(e){var t=wu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xt.length&&t!==0&&t<Xt[n].priority;n++);Xt.splice(n,0,e),n===0&&Su(e)}};function wi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function oo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ea(){}function kp(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var d=Vs(i);o.call(d)}}var i=Fc(t,r,e,0,null,!1,!1,"",Ea);return e._reactRootContainer=i,e[Ot]=i.current,Pr(e.nodeType===8?e.parentNode:e),jn(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=Vs(u);a.call(d)}}var u=yi(e,0,!1,null,null,!1,!1,"",Ea);return e._reactRootContainer=u,e[Ot]=u.current,Pr(e.nodeType===8?e.parentNode:e),jn(function(){ro(t,u,n,r)}),u}function lo(e,t,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var a=s;s=function(){var u=Vs(i);a.call(u)}}ro(t,i,e,s)}else i=kp(n,t,e,s,r);return Vs(i)}xu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=fr(t.pendingLanes);n!==0&&(Ol(t,n|1),qe(t,De()),!(he&6)&&(Jn=De()+500,dn()))}break;case 13:jn(function(){var r=Ut(e,1);if(r!==null){var s=He();St(r,e,1,s)}}),xi(e,1)}};Ul=function(e){if(e.tag===13){var t=Ut(e,134217728);if(t!==null){var n=He();St(t,e,134217728,n)}xi(e,134217728)}};vu=function(e){if(e.tag===13){var t=rn(e),n=Ut(e,t);if(n!==null){var r=He();St(n,e,t,r)}xi(e,t)}};wu=function(){return ye};Nu=function(e,t){var n=ye;try{return ye=e,t()}finally{ye=n}};Xo=function(e,t,n){switch(t){case"input":if(Uo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Ks(r);if(!s)throw Error(G(90));Za(r),Uo(r,s)}}}break;case"textarea":eu(e,n);break;case"select":t=n.value,t!=null&&On(e,!!n.multiple,t,!1)}};iu=pi;au=jn;var _p={usingClientEntryPoint:!1,Events:[Gr,Rn,Ks,ou,lu,pi]},ur={findFiberByHostInstance:hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mp={bundleType:ur.bundleType,version:ur.version,rendererPackageName:ur.rendererPackageName,rendererConfig:ur.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ft.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=du(e),e===null?null:e.stateNode},findFiberByHostInstance:ur.findFiberByHostInstance||Cp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var is=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!is.isDisabled&&is.supportsFiber)try{Ws=is.inject(Mp),Dt=is}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_p;lt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wi(t))throw Error(G(200));return jp(e,t,null,n)};lt.createRoot=function(e,t){if(!wi(e))throw Error(G(299));var n=!1,r="",s=Gc;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=yi(e,1,!1,null,null,n,!1,r,s),e[Ot]=t.current,Pr(e.nodeType===8?e.parentNode:e),new vi(t)};lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=du(t),e=e===null?null:e.stateNode,e};lt.flushSync=function(e){return jn(e)};lt.hydrate=function(e,t,n){if(!oo(t))throw Error(G(200));return lo(null,e,t,!0,n)};lt.hydrateRoot=function(e,t,n){if(!wi(e))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=Gc;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Fc(t,null,e,1,n??null,s,!1,o,i),e[Ot]=t.current,Pr(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new so(t)};lt.render=function(e,t,n){if(!oo(t))throw Error(G(200));return lo(null,e,t,!1,n)};lt.unmountComponentAtNode=function(e){if(!oo(e))throw Error(G(40));return e._reactRootContainer?(jn(function(){lo(null,null,e,!1,function(){e._reactRootContainer=null,e[Ot]=null})}),!0):!1};lt.unstable_batchedUpdates=pi;lt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!oo(n))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return lo(e,t,n,!1,r)};lt.version="18.3.1-next-f1338f8080-20240426";function Vc(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vc)}catch(e){console.error(e)}}Vc(),Va.exports=lt;var bp=Va.exports,Hc,Pa=bp;Hc=Pa.createRoot,Pa.hydrateRoot;const Wc=j.createContext(void 0),Dp=({children:e})=>{const[t,n]=j.useState(!1),[r,s]=j.useState(null),[o,i]=j.useState(!1),[a,u]=j.useState(null),[d,p]=j.useState(null),[v,h]=j.useState("medicine"),[E,k]=j.useState(0),[T,x]=j.useState({message:"",type:"success",isVisible:!1}),[g,c]=j.useState(!1),[y,S]=j.useState(null),[D,_]=j.useState("edit"),[O,H]=j.useState(!1),[le,b]=j.useState(null),[J,q]=j.useState(!1),[L,X]=j.useState(null),[oe,fe]=j.useState(!1),[P,m]=j.useState(!1),[M,z]=j.useState(null),[R,B]=j.useState(!1),[Z,K]=j.useState(null),[se,te]=j.useState(!1),[pe,me]=j.useState(null),Ge=()=>{sessionStorage.removeItem("user_session"),n(!1),s(null)},je=()=>{k(C=>C+1)},kt=(C,I)=>{x({message:C,type:I,isVisible:!0})},tt=()=>{x(C=>({...C,isVisible:!1}))},mt=C=>{S(C),_("edit"),c(!0)},Pt=()=>{const C={GUID:`new_medbox_${Date.now()}`,name:"",box_type:"",width:[],width_index:0,med_info:[]};S(C),_("add"),c(!0)},F=()=>{c(!1),S(null),_("edit")},Q=C=>{b(C),H(!0)},re=()=>{H(!1),b(null)},ue=C=>{X(C),q(!0)},ie=()=>{q(!1),X(null)},de=C=>{z(C),m(!0)},ae=()=>{m(!1),z(null)},f=C=>{K(C),B(!0)},$=()=>{B(!1),K(null)},N=C=>{me(C),te(!0)},w=()=>{te(!1),me(null)};return l.jsx(Wc.Provider,{value:{isAuthenticated:t,setIsAuthenticated:n,currentUser:r,setCurrentUser:s,logout:Ge,sidebarOpen:o,setSidebarOpen:i,selectedDepartmentType:a,setSelectedDepartmentType:u,apiDepartmentData:d,setApiDepartmentData:p,viewMode:v,setViewMode:h,refreshTrigger:E,triggerRefresh:je,notification:T,showNotification:kt,hideNotification:tt,medBoxModalOpen:g,setMedBoxModalOpen:c,selectedMedBox:y,setSelectedMedBox:S,openMedBoxModal:mt,closeMedBoxModal:F,modalMode:D,setModalMode:_,openAddMedBoxModal:Pt,listDrawModalOpen:O,setListDrawModalOpen:H,selectedListDraw:le,setSelectedListDraw:b,openListDrawModal:Q,closeListDrawModal:re,gridDrawModalOpen:J,setGridDrawModalOpen:q,selectedGridDraw:L,setSelectedGridDraw:X,openGridDrawModal:ue,closeGridDrawModal:ie,isLoadingMedMap:oe,setIsLoadingMedMap:fe,addParentContainerModalOpen:P,setAddParentContainerModalOpen:m,selectedDepartmentForAdd:M,setSelectedDepartmentForAdd:z,openAddParentContainerModal:de,closeAddParentContainerModal:ae,addShelfDrawContainerModalOpen:R,setAddShelfDrawContainerModalOpen:B,selectedSubContainerForAdd:Z,setSelectedSubContainerForAdd:K,openAddShelfDrawContainerModal:f,closeAddShelfDrawContainerModal:$,addSubContainerModalOpen:se,setAddSubContainerModalOpen:te,selectedParentContainerForAdd:pe,setSelectedParentContainerForAdd:me,openAddSubContainerModal:N,closeAddSubContainerModal:w},children:e})},et=()=>{const e=j.useContext(Wc);if(e===void 0)throw new Error("useDrugMap must be used within a DrugMapProvider");return e},Ep={"zh-TW":{"nav.title":"藥品地圖","nav.home":"返回首頁","nav.expandSidebar":"展開側邊欄","nav.collapseSidebar":"收合側邊欄","topbar.medicine":"藥品","topbar.department":"部門","topbar.language":"中文","topbar.logout":"登出","sidebar.drugMap":"藥品地圖","sidebar.closeSidebar":"關閉側邊欄","sidebar.departmentCategories":"部門分類","sidebar.departments":"個部門","canvas.lockCanvas":"鎖定畫布","canvas.unlockCanvas":"解鎖畫布","type.dispensingStation":"調劑台","type.warehouse":"藥庫","type.medBoxShelf":"藥盒層架","type.storeShelf":"藥品層架","type.parentContainer":"櫃體","type.subContainer":"虛擬容器","type.gridDraw":"格線抽屜","type.listDraw":"抽屜","type.medBox":"藥盒","type.containers":"個容器","modal.medBoxSettings":"藥盒設定","modal.addMedBox":"新增藥盒","modal.listDrawSettings":"抽屜設定","modal.gridDrawSettings":"格線抽屜設定","modal.settings":"編輯設定","modal.add":"新增藥盒","form.medBoxName":"藥盒名稱","form.medBoxType":"藥盒類型","form.widthSelection":"寬度選擇","form.ipAddress":"IP 位址","form.drugInfo":"藥品資料","form.drawerName":"抽屜名稱","form.drugList":"藥品清單","form.drugCode":"藥碼","form.drugName":"藥名","form.chineseName":"中文名","form.drugSearch":"藥品搜尋","placeholder.medBoxName":"請輸入 藥盒名稱 位址","placeholder.ipAddress":"請輸入 IP 位址","placeholder.drawerName":"請輸入抽屜名稱","placeholder.gridDrawName":"請輸入格線抽屜名稱","placeholder.drugSearch":"請輸入 藥碼/藥名/中文名","button.cancel":"取消","button.save":"儲存","button.add":"新增","button.edit":"編輯","button.change":"變更","button.remove":"移除藥品","button.search":"搜尋","button.merge":"合併","button.unmerge":"取消合併","status.noDrugData":"此藥盒尚未配置藥品資料","status.newMedBoxNoDrug":"新藥盒尚未配置藥品資料","status.drawerNoDrug":"此抽屜尚未配置藥品","status.gridDrawNotConfigured":"此格線抽屜尚未配置","status.noDrugInfo":"無藥品資料","status.drugListEmpty":"藥品清單為空","status.noContent":"No content available","status.notSet":"未設定","status.notAdded":"未加入藥品","status.searchResults":"搜尋結果將顯示於此區域","status.selectCellsForDrug":"請選取合併格子以顯示藥品資訊","status.selectedCellsNoDrug":"選取的格子無藥品資料","status.loadingMedMapData":"正在載入藥品地圖資料...","status.loadingMedMapHint":"請稍候，系統正在處理部門資料","footer.copyright":"Copyright ©2025 鴻森智能科技","login.title":"藥品地圖系統","login.subtitle":"請登入以繼續使用系統","login.userId":"帳號","login.userIdPlaceholder":"請輸入使用者帳號","login.password":"密碼","login.passwordPlaceholder":"請輸入密碼","login.loginButton":"登入","login.loggingIn":"登入中..."},en:{"nav.title":"Drug Map","nav.home":"Back to Home","nav.expandSidebar":"Expand Sidebar","nav.collapseSidebar":"Collapse Sidebar","topbar.medicine":"Medicine","topbar.department":"Department","topbar.language":"English","topbar.logout":"Logout","sidebar.drugMap":"Drug Map","sidebar.closeSidebar":"Close Sidebar","sidebar.departmentCategories":"Department Categories","sidebar.departments":"Departments","canvas.lockCanvas":"Lock Canvas","canvas.unlockCanvas":"Unlock Canvas","type.dispensingStation":"Dispensing Station","type.warehouse":"Warehouse","type.medBoxShelf":"Medicine Box Shelf","type.parentContainer":"Cabinet","type.subContainer":"sub container","type.gridDraw":"Grid Drawer","type.listDraw":"List Drawer","type.medBox":"Medicine Box","type.containers":"Containers","modal.medBoxSettings":"Medicine Box Settings","modal.addMedBox":"Add Medicine Box","modal.listDrawSettings":"Drawer Settings","modal.gridDrawSettings":"Grid Drawer Settings","modal.settings":"Edit Settings","modal.add":"Add Medicine Box","form.medBoxName":"Medicine Box Name","form.medBoxType":"Medicine Box Type","form.widthSelection":"Width Selection","form.ipAddress":"IP Address","form.drugInfo":"Drug Information","form.drawerName":"Drawer Name","form.drugList":"Drug List","form.drugCode":"Drug Code","form.drugName":"Drug Name","form.chineseName":"Chinese Name","form.drugSearch":"Drug Search","placeholder.medBoxName":"Enter medicine box name","placeholder.ipAddress":"Enter IP address","placeholder.drawerName":"Enter drawer name","placeholder.gridDrawName":"Enter grid drawer name","placeholder.drugSearch":"Enter drug code/name/Chinese name","button.cancel":"Cancel","button.save":"Save","button.add":"Add","button.edit":"Edit","button.change":"Change","button.remove":"Remove Drug","button.search":"Search","button.merge":"Merge","button.unmerge":"Unmerge","status.noDrugData":"This medicine box has no drug data configured","status.newMedBoxNoDrug":"New medicine box has no drug data configured","status.drawerNoDrug":"This drawer has no drugs configured","status.gridDrawNotConfigured":"This grid drawer is not configured","status.noDrugInfo":"No drug information","status.drugListEmpty":"Drug list is empty","status.noContent":"No content available","status.notSet":"Not set","status.notAdded":"No drugs added","status.searchResults":"Search results will be displayed here","status.selectCellsForDrug":"Select merged cells to display drug information","status.selectedCellsNoDrug":"Selected cells have no drug data","status.searching":"Searching...","status.noSearchResults":"No search results found","status.loadingMedMapData":"Loading medicine map data...","status.loadingMedMapHint":"Please wait while we process department data","footer.copyright":"Copyright ©2025 Hongsen Intelligent Technology","login.title":"Drug Map System","login.subtitle":"Please login to continue","login.userId":"ID","login.userIdPlaceholder":"Enter your user ID","login.password":"Password","login.passwordPlaceholder":"Enter your password","login.loginButton":"Login","login.loggingIn":"Logging in..."}},Xc=j.createContext(void 0),Pp=({children:e})=>{const[t,n]=j.useState("zh-TW"),r=s=>Ep[t][s]||s;return l.jsx(Xc.Provider,{value:{language:t,setLanguage:n,t:r},children:e})},Ye=()=>{const e=j.useContext(Xc);if(e===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Se=(e,t)=>{const n=j.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:a="",children:u,...d},p)=>j.createElement("svg",{ref:p,...Rp,width:s,height:s,stroke:r,strokeWidth:i?Number(o)*24/Number(s):o,className:["lucide",`lucide-${Tp(e)}`,a].join(" "),...d},[...t.map(([v,h])=>j.createElement(v,h)),...Array.isArray(u)?u:[u]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=Se("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=Se("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=Se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=Se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=Se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=Se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=Se("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=Se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=Se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=Se("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=Se("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=Se("ListX",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"m19 10-4 4",key:"1tz659"}],["path",{d:"m15 10 4 4",key:"1n7nei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=Se("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=Se("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=Se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=Se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=Se("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=Se("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=Se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=Se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=Se("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=Se("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=Se("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Xp=()=>{const{sidebarOpen:e,setSidebarOpen:t}=et(),{t:n}=Ye();return l.jsx("div",{className:"fixed top-4 left-4 z-30",children:l.jsx("nav",{className:"bg-white/95 backdrop-blur-sm border border-gray-200/50 rounded-xl shadow-lg px-2 py-1",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("a",{href:"../frontpage",className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg transition-colors",title:n("nav.home"),children:l.jsx(Ni,{className:"w-5 h-5"})}),l.jsx("div",{className:"ml-2 text-lg font-semibold text-gray-900",children:n("nav.title")}),l.jsx("button",{onClick:()=>t(!e),className:"ml-8 p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg transition-colors",title:n(e?"nav.collapseSidebar":"nav.expandSidebar"),children:e?l.jsx(_l,{className:"w-6 h-6"}):l.jsx(_l,{className:"w-6 h-6"})})]})})})},Yp=()=>{const{viewMode:e,setViewMode:t,logout:n,currentUser:r}=et(),{language:s,setLanguage:o,t:i}=Ye(),[a,u]=gd.useState(!1),d=()=>{o(s==="zh-TW"?"en":"zh-TW")};return l.jsx("div",{className:"fixed top-4 right-4 z-30",children:l.jsx("div",{className:"bg-white/95 backdrop-blur-sm border border-gray-200/50 rounded-xl shadow-lg px-2 py-1 sm:px-3 sm:py-2",children:l.jsxs("div",{className:"flex items-center gap-2 lg:gap-0 lg:space-x-2 flex-col lg:flex-row relative",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[l.jsxs("button",{onClick:()=>t("medicine"),className:`flex items-center space-x-2 px-3 py-1.5 rounded-md transition-all duration-300 ease-in-out transform ${e==="medicine"?"bg-white text-green-600 shadow-sm scale-105":"text-gray-600 hover:text-gray-900 hover:bg-gray-50 hover:scale-102"}`,children:[l.jsx(Vp,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:i("topbar.medicine")})]}),l.jsxs("button",{onClick:()=>t("department"),className:`flex items-center space-x-2 px-3 py-1.5 rounded-md transition-all duration-300 ease-in-out transform ${e==="department"?"bg-white text-blue-600 shadow-sm scale-105":"text-gray-600 hover:text-gray-900 hover:bg-gray-50 hover:scale-102"}`,children:[l.jsx(Yc,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:i("topbar.department")})]})]}),l.jsx("button",{onClick:()=>u(!a),className:"lg:hidden flex items-center justify-center p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg transition-colors",children:a?l.jsx(Lp,{className:"w-4 h-4"}):l.jsx(Qc,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:`
            flex items-center gap-2 lg:gap-0 lg:space-x-2 flex-col lg:flex-row
            lg:flex lg:opacity-100 lg:max-h-none
            transition-all duration-300 ease-in-out overflow-hidden
            ${a?"flex opacity-100 max-h-96":"hidden opacity-0 max-h-0 lg:flex lg:opacity-100 lg:max-h-none"}
          `,children:[l.jsx("div",{className:"mx-1 w-full lg:w-px lg:h-6 h-px bg-gray-300"}),l.jsxs("button",{onClick:d,className:"w-full lg:w-auto flex justify-center items-center space-x-2 px-3 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg transition-colors border",children:[l.jsx(Up,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:i("topbar.language")})]}),l.jsx("div",{className:"w-full lg:w-px lg:h-6 h-px bg-gray-300"}),r&&l.jsx("div",{className:"w-full lg:w-auto flex justify-center items-center space-x-2 px-3 py-1.5 bg-gray-50 border border-gray-200 rounded-lg",children:l.jsx("span",{className:"text-sm font-medium text-gray-700",children:r.Name})}),l.jsxs("button",{onClick:n,className:"w-full lg:w-auto flex items-center space-x-2 px-3 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 hover:text-red-700 border border-red-200 rounded-lg transition-colors justify-center",children:[l.jsx(Fp,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:i("topbar.logout")})]})]})]})})})};class Qp{constructor(){this.config=null,this.isConfigLoaded=!1}async loadConfig(){var t;if(this.config&&this.isConfigLoaded)return this.config;try{const n=await fetch("../config.txt");if(!n.ok)throw new Error(`Failed to load config: ${n.status}`);const r=await n.text();if(this.config=JSON.parse(r),this.isConfigLoaded=!0,!((t=this.config)!=null&&t.domain))throw new Error("Invalid config: missing domain");return this.config}catch(n){throw console.error("Failed to load API config:",n),new Error("API configuration not available")}}async request(t,n={}){const s=`${(await this.loadConfig()).domain}${t}`,o={method:"POST",headers:{"Content-Type":"application/json",...n.headers},...n};try{const i=await fetch(s,o);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return await i.json()}catch(i){throw console.error(`API request failed for ${t}:`,i),i}}async login(t){const n={Data:{ID:t.ID.trim(),Password:t.Password}};return this.request("/api/session/login",{method:"POST",body:JSON.stringify(n)})}async getDepartments(t={}){return this.request("/api/ServerSetting/get_name",{method:"POST",body:JSON.stringify(t)})}async getMedicineCloud(t={}){return this.request("/api/MED_page/get_med_cloud",{method:"POST",body:JSON.stringify({})})}async searchMedicine(t="",n="N"){try{const r=await this.getMedicineCloud();if(r.Code!==200||!r.Data)return console.error("API returned error:",r),[];let s=r.Data;if(s=s.filter(o=>o.DRUGKIND===n),s=s.filter(o=>o.FILE_STATUS!=="關檔中"),t.trim()){const o=t.toLowerCase();s=s.filter(i=>i.CODE&&i.CODE.toLowerCase().includes(o)||i.CHT_NAME&&i.CHT_NAME.toLowerCase().includes(o)||i.NAME&&i.NAME.toLowerCase().includes(o))}return s}catch(r){return console.error("Medicine search failed:",r),[]}}async getMedMapByDepartment(t){const n={Data:{},ValueAry:[t]};return this.request("/api/medMap/get_medMap_by_department",{method:"POST",body:JSON.stringify(n)})}async updateContainerPosition(t){const n={Data:[t]};return this.request("/api/medMap/update_medMap_section",{method:"POST",body:JSON.stringify(n)})}async updateMedMapBox(t){const n={Data:t};return this.request("/api/medMap/update_medMap_box",{method:"POST",body:JSON.stringify(n)})}async updateMedMapDrawer(t){const n={Data:t};return this.request("/api/medMap/update_medMap_drawer",{method:"POST",body:JSON.stringify(n)})}async updateMedMapShelf(t){const n={Data:t};return this.request("/api/medMap/update_medMap_shelf",{method:"POST",body:JSON.stringify(n)})}async addMedMapSection(t,n){const r={ValueAry:[t,n]};return this.request("/api/medMap/add_medMap_section",{method:"POST",body:JSON.stringify(r)})}async addMedMapShelf(t){const n={Data:t};return this.request("/api/medMap/add_medMap_shelf",{method:"POST",body:JSON.stringify(n)})}async addMedMapDrawer(t){const n={Data:t};return this.request("/api/medMap/add_medMap_drawer",{method:"POST",body:JSON.stringify(n)})}async addSubSection(t,n){const r={ValueAry:[t,n]};return this.request("/api/medMap/add_sub_section",{method:"POST",body:JSON.stringify(r)})}async getConfig(){return this.loadConfig()}async checkConnection(){try{return await this.loadConfig(),!0}catch(t){return console.error("API connection check failed:",t),!1}}resetConfig(){this.config=null,this.isConfigLoaded=!1}}const Pe=new Qp;class Kp{convertMedMapApiToFakeData(t){console.log("🔄 開始轉換 MedMap API 資料到假資料格式"),console.log("📥 原始 API 資料:",t);try{Array.isArray(t)||(console.warn("⚠️ API 資料不是陣列格式，嘗試包裝成陣列"),t=[t]);const r=t.map((s,o)=>this.convertSingleDepartment(s,o)).filter(s=>{if(Object.keys(s).length!==0)return s});return console.log("✅ MedMap 資料轉換完成，結果:",r),r}catch(n){return console.error("❌ MedMap 資料轉換失敗:",n),[]}}convertSingleDepartment(t,n){if(Object.keys(t).length!==0){let r;t.absolute_position?r=t.absolute_position.split(","):r=[0,0];const s={GUID:t.GUID||t.guid||`dept_${n}_${Date.now()}`,Master_GUID:t.Master_GUID,type:t.sys_ServerSetting.type||"",name:t.sys_ServerSetting.name||"",gird_position:t.position,position:{x:r[0],y:r[1]},contents:t.medMap_Section,department_type:t.sys_ServerSetting["department_type "],class:0};return Array.isArray(t.medMap_Section)&&t.medMap_Section.forEach((o,i)=>{let a;o.absolute_position?a=o.absolute_position.split(","):a=[0,0],s.contents[i]={GUID:o.GUID,MASTER_GUID:o.Master_GUID,name:`父容器_${i}`,type:"parent_container",class:1,gird_position:o.position,position:{x:a[0],y:a[1]},serverName:t.sys_ServerSetting.name,serverType:t.sys_ServerSetting.type,contents:[]},Array.isArray(o.sub_section)&&o.sub_section.forEach((u,d)=>{let p={GUID:u.GUID,MASTER_GUID:u.Master_GUID,name:`子容器_${d}`,type:"sub_container",class:2,gird_position:u.position,contents:[],serverName:t.sys_ServerSetting.name,serverType:t.sys_ServerSetting.type,oriMaxCol:0};s.contents[i].contents[d]=p;let v=0;Array.isArray(u.shelf)&&Array.isArray(u.drawer)&&(u.shelf.forEach((h,E)=>{let k={GUID:h.GUID,MASTER_GUID:h.Master_GUID,name:`層架_${E}`,class:3,gird_position:h.position,serverName:h.serverName,serverType:h.serverType,type:h.type,contents:[]};k.serverName&&(k.serverName=t.sys_ServerSetting.name),k.serverType&&(k.serverType=t.sys_ServerSetting.type),h.type=="dispensing_shelves"||h.type=="shelf"?(h.type=="shelf"&&(k.type="dispensing_shelves"),Array.isArray(h.medMapBox)&&h.medMapBox.forEach((x,g)=>{let c={GUID:x.GUID,MASTER_GUID:x.Master_GUID,name:"藥盒",class:4,gird_position:x.position,ip:x.ip_box,box_type:"2.13",width:x.width,height:x.height,serverType:x.serverType,serverName:x.serverName,med_info:[],type:"med_box",device_type:x.storage.DeviceType},y={name:x.storage.Name,code:x.storage.Code,cht_name:x.storage.ChineseName};c.med_info[0]=y,k.contents.push(c)})):k.type="store_shelves";let T=h.position.split(",")[1];v<+T&&(v=+T,s.contents[i].contents[d].oriMaxCol=+v),console.log(">>>>>>",k),s.contents[i].contents[d].contents.push(k)}),u.drawer.forEach((h,E)=>{let k={GUID:h.GUID,MASTER_GUID:h.Master_GUID,name:`抽屜 ${E}`,class:3,gird_position:h.position,ip:h.ip_drawer,serverName:h.serverName,serverType:h.serverType};if(k.serverName&&(k.serverName=t.sys_ServerSetting.name),k.serverType&&(k.serverType=t.sys_ServerSetting.type),h.drawer){if(k.drawer=h.drawer,h.drawer.Boxes)if(k.type="grid_draw",k.name=h.drawer.Name,k.Boxes=[],Array.isArray(h.drawer.Boxes)){let x=h.drawer.Boxes;console.log(x),x.forEach((g,c)=>{let y=[];Array.isArray(g)&&g.forEach((S,D)=>{let _={Row:S.Row,Column:S.Column,Width:1,Height:1,Slave:S.Slave,SlaveBox_Row:S.SlaveBox_Row,SlaveBox_Column:S.SlaveBox_Column,MasterBox_Column:S.MasterBox_Column,MasterBox_Row:S.MasterBox_Row,Name:S.Name,Code:S.Code,ChineseName:S.ChineseName,GUID:S.GUID};y.push(_)}),k.Boxes.push(y)})}else k.Boxes=h.drawer.Boxes}else k.type="list_draw",k.name=`清單抽屜 ${E}`;let T=h.position.split(",")[1];v<+T&&(v=+T,s.contents[i].contents[d].oriMaxCol=+v),s.contents[i].contents[d].contents.push(k)}))})}),s}else return{}}convertSingleComponent(t,n,r){var o,i,a,u,d;const s={GUID:t.GUID||t.guid||`comp_${n}_${Date.now()}`,type:this.mapComponentType(t.type||t.component_type||"unknown"),name:t.name||t.component_name||`組件_${n}`,position:{x:((o=t.position)==null?void 0:o.x)||t.x||50+n*200,y:((i=t.position)==null?void 0:i.y)||t.y||50+n*150},dimensions:{width:((a=t.dimensions)==null?void 0:a.width)||t.width||180,height:((u=t.dimensions)==null?void 0:u.height)||t.height||120,depth:((d=t.dimensions)==null?void 0:d.depth)||t.depth||30},med_box:t.med_box||t.medBox||t.medicine_boxes||[],MASTER_GUID:r};return t.components&&Array.isArray(t.components)&&(s.components=t.components.map((p,v)=>this.convertSingleComponent(p,v,s.GUID))),Object.keys(t).forEach(p=>{["GUID","type","name","position","dimensions","med_box","components"].includes(p)||(s[p]=t[p])}),s}mapDepartmentType(t){return{dispensing_station:"調劑台",warehouse:"藥庫",pharmacy:"藥局",storage:"儲存區"}[t]||t}mapComponentType(t){return{medicine_box_shelf:"med_box_shelf",medicine_shelf:"normal_shelf",grid_drawer:"grid_draw",list_drawer:"list_draw",medicine_box:"med_box",parent_container:"parent_container",sub_container:"sub_container",dispensing_shelves:"dispensing_shelves",store_shelves:"store_shelves"}[t]||t}validateConvertedData(t){try{if(!Array.isArray(t))return console.error("❌ 轉換後的資料不是陣列格式"),!1;for(const n of t){if(!n.GUID||!n.type||!n.name)return console.error("❌ 部門資料缺少必要欄位:",n),!1;if(!n.gird_position||typeof n.gird_position!="string")return console.error("❌ 部門位置資料格式錯誤:",n.gird_position),!1;if(n.components&&Array.isArray(n.components)){for(const r of n.components)if(!r.GUID||!r.type)return console.error("❌ 組件資料缺少必要欄位:",r),!1}}return console.log("✅ 轉換後的資料結構驗證通過"),!0}catch(n){return console.error("❌ 資料驗證過程中發生錯誤:",n),!1}}generateConversionReport(t,n){const r={timestamp:new Date().toISOString(),originalDataCount:Array.isArray(t)?t.length:0,convertedDataCount:n.length,conversionSuccess:n.length>0,totalComponents:n.reduce((s,o)=>{var i;return s+(((i=o.components)==null?void 0:i.length)||0)},0),departmentTypes:[...new Set(n.map(s=>s.type))],componentTypes:[...new Set(n.flatMap(s=>{var o;return((o=s.components)==null?void 0:o.map(i=>i.type))||[]}))]};return console.log("📊 資料轉換報告:",r),r}}const Lt=new Kp,Jp=()=>{const{sidebarOpen:e,setSidebarOpen:t,selectedDepartmentType:n,setSelectedDepartmentType:r,setApiDepartmentData:s,isLoadingMedMap:o,setIsLoadingMedMap:i}=et(),{t:a}=Ye(),[u,d]=j.useState(new Set),[p,v]=j.useState([]),[h,E]=j.useState(!0),[k,T]=j.useState([]);j.useEffect(()=>{(async()=>{E(!0);try{const D=await Pe.getDepartments();D.Code===200&&D.Data?(console.log(D.Data),v(D.Data)):(console.error("API returned error:",D),v([]))}catch(D){console.error("Failed to fetch department data:",D),v([])}finally{E(!1)}})()},[]);const x=p.reduce((S,D)=>{const _=D["department_type "];return S[_]||(S[_]=[]),S[_].push(D),S},{}),g=S=>{const D=new Set(u);D.has(S)?D.delete(S):D.add(S),d(D)},c=async S=>{console.log("🏢 選擇部門:",S),r(S),await y(S),t(!1)},y=async S=>{console.log("🚀 開始取得藥品地圖資料，部門類型:",S),i(!0);try{const D=await Pe.getMedMapByDepartment(S);if(D.Code===200&&D.Data){console.log("📡 API 回傳成功:",D.Data);const _=Lt.convertMedMapApiToFakeData(D.Data);if(!Lt.validateConvertedData(_)){console.error("❌ 轉換後的資料驗證失敗"),T([]);return}const H=Lt.generateConversionReport(D.Data,_);T(_),s(_),console.log("💾 已暫存轉換後的資料到狀態中"),console.log("📊 最終轉換結果:",_),console.log("📋 轉換報告:",H)}else console.error("❌ API 回傳錯誤:",D),T([]),s(null)}catch(D){console.error("💥 取得藥品地圖資料失敗:",D),T([]),s(null)}finally{i(!1)}};return l.jsxs(l.Fragment,{children:[e&&l.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:()=>t(!1)}),l.jsx("div",{className:`fixed w-80 bg-white/95 backdrop-blur-sm shadow-xl border border-gray-200/50 z-50 transform transition-all duration-300 ease-in-out h-screen h-svh ${e?"translate-x-0 opacity-100":"-translate-x-full opacity-0"}`,children:l.jsxs("div",{className:"flex flex-col h-screen h-svh",children:[l.jsx("div",{className:"flex-shrink-0 px-4 py-2 border-b border-gray-200/50",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("a",{href:"../front_page",className:"text-gray-600 hover:text-gray-900 transition-colors p-2 rounded-lg hover:bg-gray-100/50",title:a("nav.home"),children:l.jsx(Ni,{className:"w-5 h-5"})}),l.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:a("sidebar.drugMap")})]}),l.jsx("button",{onClick:()=>t(!e),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100/50 rounded-lg transition-colors",title:a("sidebar.closeSidebar"),children:l.jsx(Bp,{className:"w-6 h-6"})})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:h?l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsx("div",{className:"text-gray-500",children:"Loading departments..."})}):l.jsxs("div",{className:"space-y-2",children:[l.jsx("h3",{className:"text-base font-semibold text-gray-700 mb-4",children:a("sidebar.departmentCategories")}),Object.entries(x).map(([S,D])=>l.jsxs("div",{className:"space-y-1",children:[l.jsxs("button",{onClick:()=>c(S),disabled:o,className:`w-full flex items-center justify-between p-3 rounded-lg transition-all duration-200 border ${n===S?"bg-blue-50 text-blue-700 border-blue-200 shadow-sm":"text-gray-700 hover:bg-gray-50 hover:shadow-sm border-transparent"} ${o?"opacity-50 cursor-not-allowed":""}`,children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[S==="B1F"?l.jsx(Yc,{className:"w-4 h-4"}):l.jsx(Hp,{className:"w-4 h-4"}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-medium",children:S}),l.jsxs("div",{className:"text-xs text-gray-500",children:[D.length," ",a("sidebar.departments")]})]})]}),l.jsx("div",{onClick:_=>{_.stopPropagation(),g(S)},className:"p-1 hover:bg-gray-200/50 rounded transition-colors",children:u.has(S)?l.jsx(Qc,{className:"w-4 h-4"}):l.jsx(Ap,{className:"w-4 h-4"})})]}),u.has(S)&&l.jsx("div",{className:"ml-6 space-y-2",children:D.map(_=>l.jsx("div",{className:"p-3 text-base text-gray-600 bg-gray-50 rounded-lg",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"font-medium text-gray-800",children:_.name}),l.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${_.type==="調劑台"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:_.type})]})},_.GUID))})]},S))]})})]})})]})},Zp=()=>{const{t:e}=Ye();return l.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-30",children:l.jsx("div",{className:"bg-white/95 backdrop-blur-sm border border-gray-200/50 rounded-xl shadow-lg px-4 py-2",children:l.jsx("p",{className:"text-sm text-gray-600 font-medium whitespace-nowrap",children:e("footer.copyright")})})})},qp=({component:e,scale:t,isLocked:n})=>{const r=j.useRef(null),{t:s}=Ye(),{apiDepartmentData:o,setApiDepartmentData:i,showNotification:a}=et(),[u,d]=j.useState(!1),[p,v]=j.useState({x:0,y:0}),[h,E]=j.useState(e.position),[k,T]=j.useState(null),[x,g]=j.useState({x:0,y:0}),c=j.useCallback(async(m,M)=>{if(!o)return;console.log("🔄 更新組件位置:",m,M);const z=JSON.parse(JSON.stringify(o)),R=Z=>{for(const K of Z){if(K.GUID===m)return K.position={x:M.x.toFixed(3),y:M.y.toFixed(3)},console.log("✅ 組件位置已更新:",K.name,M.x.toFixed(3),M.y.toFixed(3)),!0;if(K.components&&Array.isArray(K.components)&&R(K.components)||K.contents&&Array.isArray(K.contents)&&R(K.contents))return!0}return!1};if(R(z)){i(z),console.log("💾 全域資料已更新");try{console.log("📡 開始同步後端位置資料...");const Z=await Pe.updateContainerPosition({GUID:m,absolute_position:`${M.x.toFixed(3)},${M.y.toFixed(3)}`});Z.Code===200?(console.log("✅ 後端位置同步成功",Z),a("位置更新成功","success")):(console.error("❌ 後端位置同步失敗:",Z),a(`位置更新失敗: ${Z.Result||"未知錯誤"}`,"error"))}catch(Z){console.error("💥 後端位置同步發生錯誤:",Z),a("位置更新失敗: 網路錯誤","error")}}else console.warn("⚠️ 未找到要更新的組件:",m)},[o,i,a]),{position:y,dimensions:S,name:D,type:_}=e,O=j.useCallback(m=>{if(!n)return;m.preventDefault(),m.stopPropagation();const M=r.current;if(!M)return;M.setPointerCapture(m.pointerId);const z=M.getBoundingClientRect(),R=m.clientX-z.left,B=m.clientY-z.top;v({x:R,y:B}),d(!0)},[n]),H=j.useCallback(m=>{if(!u||!n)return;m.preventDefault(),m.stopPropagation();const M=r.current;if(!M)return;const z=M.closest("[data-canvas-content]");if(!z)return;const R=z.getBoundingClientRect(),B=(m.clientX-R.left-p.x)/t,Z=(m.clientY-R.top-p.y)/t;E({x:B,y:Z})},[u,p,t,n]),le=j.useCallback(m=>{if(!u||!n)return;m.preventDefault(),m.stopPropagation();const M=r.current;M&&M.releasePointerCapture(m.pointerId),d(!1),c(e.GUID,h)},[u,n,c,e.GUID,h]),b=j.useCallback(m=>{if(!n)return;m.preventDefault(),m.stopPropagation();const M=r.current;if(!M)return;const z=m.touches[0];if(!z)return;T(z.identifier);const R=M.getBoundingClientRect(),B=z.clientX-R.left,Z=z.clientY-R.top;v({x:B,y:Z}),g({x:z.clientX,y:z.clientY}),d(!0)},[n]),J=j.useCallback(m=>{if(!u||!n||k===null)return;m.preventDefault(),m.stopPropagation();const M=r.current;if(!M)return;const z=Array.from(m.touches).find(se=>se.identifier===k);if(!z)return;const R=M.closest("[data-canvas-content]");if(!R)return;const B=R.getBoundingClientRect(),Z=(z.clientX-B.left-p.x)/t,K=(z.clientY-B.top-p.y)/t;E({x:Z,y:K})},[u,p,t,n,k]),q=j.useCallback(m=>{!u||!n||k===null||!Array.from(m.changedTouches).some(z=>z.identifier===k)||(m.preventDefault(),m.stopPropagation(),d(!1),T(null),g({x:0,y:0}),console.log(e.GUID),c(e.GUID,h))},[u,n,k,c,e.GUID,h]),L=j.useCallback(m=>{!u||!n||k===null||!Array.from(m.changedTouches).some(z=>z.identifier===k)||(m.preventDefault(),m.stopPropagation(),E(e.position),d(!1),T(null),g({x:0,y:0}))},[u,n,k,e.position]),X=m=>{switch(m){case"調劑台":return"bg-orange-50 border-orange-400";case"藥庫":return"bg-indigo-50 border-indigo-400";case"parent_container":return"bg-indigo-50 border-indigo-400";default:return"bg-gray-50 border-gray-400"}},oe=m=>{switch(m){case"調劑台":return"bg-orange-200 text-gray-900";case"藥庫":return"bg-indigo-200 text-gray-900";case"parent_container":return"bg-indigo-200 text-gray-900";default:return"bg-gray-100 text-gray-800"}},fe=m=>{switch(m){case"調劑台":return"bg-orange-600 text-white";case"藥庫":return"bg-indigo-600 text-white";case"parent_container":return"bg-indigo-600 text-white";default:return"bg-gray-600 text-white"}},P=m=>{const M=m==="調劑台"?"type.dispensingStation":m==="藥庫"?"type.warehouse":m==="parent_container"?"櫃體":"type."+m;return s(M)||m};return l.jsx("div",{ref:r,className:`flex flex-col absolute border-2 rounded-lg shadow-lg hover:shadow-xl ${X(_)} overflow-hidden ${n?"cursor-move":"cursor-default"} ${u?"shadow-2xl scale-105 z-50":""}`,style:{left:`${h.x}px`,top:`${h.y}px`,minWidth:_==="調劑台"||_==="藥庫"?"120px":"180px",minHeight:_==="調劑台"||_==="藥庫"?"60px":"120px",userSelect:"none",touchAction:"none",transition:u?"none":"transform 0.2s ease-out, box-shadow 0.2s ease-out"},onPointerDown:O,onPointerMove:H,onPointerUp:le,onTouchStart:b,onTouchMove:J,onTouchEnd:q,onTouchCancel:L,children:l.jsx("div",{className:`w-full min-w-[400px] h-auto flex items-start flex-1 justify-between p-2 border-b border-gray-200 ${oe(_)}`,children:l.jsx("div",{className:"flex space-x-2 flex-1 min-w-0",children:l.jsxs("div",{className:"min-w-0 flex gap-4",children:[l.jsx("div",{className:"font-semibold text-lg truncate",children:D}),l.jsx("div",{className:`text-sm truncate py-1 px-3 rounded-2xl ${fe(_)}`,children:P(_)})]})})})})},eh=({children:e})=>{const t=j.useRef(null),{selectedDepartmentType:n,apiDepartmentData:r}=et(),{t:s}=Ye(),[o,i]=j.useState({x:0,y:0,scale:1}),[a,u]=j.useState(!1),[d,p]=j.useState(!1),[v,h]=j.useState({x:0,y:0}),[E,k]=j.useState(!1),T=()=>{try{const P=localStorage.getItem("med_map_anchor");return P?JSON.parse(P):[]}catch(P){return console.error("Error reading canvas states from localStorage:",P),[]}},x=(P,m,M,z)=>{try{const R=T(),B=R.findIndex(K=>K.department===P&&K.canvasType===m),Z={department:P,canvasType:m,scale:M,position:z};B>=0?R[B]=Z:R.push(Z),localStorage.setItem("med_map_anchor",JSON.stringify(R))}catch(R){console.error("Error saving canvas state to localStorage:",R)}},g=(P,m)=>T().find(z=>z.department===P&&z.canvasType===m)||null;j.useEffect(()=>{if(n){const P=g(n,"InfiniteCanvas");if(P)i({x:P.position.x,y:P.position.y,scale:P.scale});else{const m={x:0,y:0,scale:1};i(m),x(n,"InfiniteCanvas",m.scale,m)}}},[n]),j.useEffect(()=>{if(!n)return;const P=setTimeout(()=>{x(n,"InfiniteCanvas",o.scale,{x:o.x,y:o.y})},500);return()=>clearTimeout(P)},[o,n]),j.useEffect(()=>{const P=M=>{M.code==="Space"&&!M.repeat&&(M.preventDefault(),k(!0))},m=M=>{M.code==="Space"&&(M.preventDefault(),k(!1),u(!1))};return window.addEventListener("keydown",P),window.addEventListener("keyup",m),()=>{window.removeEventListener("keydown",P),window.removeEventListener("keyup",m)}},[]);const c=j.useCallback(P=>{var M;if(d)return;if(P.altKey&&!navigator.userAgent.includes("Mac")||P.metaKey&&navigator.userAgent.includes("Mac")){P.preventDefault();const z=(M=t.current)==null?void 0:M.getBoundingClientRect();if(!z)return;const R=P.clientX-z.left,B=P.clientY-z.top,Z=P.deltaY>0?.9:1.1,K=Math.max(.1,Math.min(5,o.scale*Z)),se=K/o.scale,te=R-(R-o.x)*se,pe=B-(B-o.y)*se;i({x:te,y:pe,scale:K})}},[o,d]),y=j.useCallback(P=>{d||!E||(u(!0),h({x:P.clientX,y:P.clientY}),P.preventDefault())},[d,E]),S=j.useCallback(P=>{if(!a||d)return;const m=P.clientX-v.x,M=P.clientY-v.y;i(z=>({...z,x:z.x+m,y:z.y+M})),h({x:P.clientX,y:P.clientY})},[a,v,d]),D=j.useCallback(()=>{u(!1)},[]),[_,O]=j.useState(null),[H,le]=j.useState({x:0,y:0}),b=P=>{if(P.length<2)return null;const m=P[0],M=P[1];return Math.sqrt(Math.pow(M.clientX-m.clientX,2)+Math.pow(M.clientY-m.clientY,2))},J=P=>{if(P.length===1)return{x:P[0].clientX,y:P[0].clientY};const m=P[0],M=P[1];return{x:(m.clientX+M.clientX)/2,y:(m.clientY+M.clientY)/2}},q=j.useCallback(P=>{if(!d){if(P.touches.length===2){const m=b(P.touches),M=J(P.touches);O(m),le(M)}else if(P.touches.length===1){const m=P.touches[0];h({x:m.clientX,y:m.clientY}),u(!0)}}},[d]),L=j.useCallback(P=>{var m;if(!d){if(P.preventDefault(),P.touches.length===2&&_!==null){const M=b(P.touches),z=J(P.touches);if(M&&_){const R=(m=t.current)==null?void 0:m.getBoundingClientRect();if(!R)return;const B=M/_,Z=Math.max(.1,Math.min(5,o.scale*B)),K=z.x-R.left,se=z.y-R.top,te=Z/o.scale,pe=K-(K-o.x)*te,me=se-(se-o.y)*te;i({x:pe,y:me,scale:Z}),O(M),le(z)}}else if(P.touches.length===1&&a){const M=P.touches[0],z=M.clientX-v.x,R=M.clientY-v.y;i(B=>({...B,x:B.x+z,y:B.y+R})),h({x:M.clientX,y:M.clientY})}}},[o,_,a,v,d]),X=j.useCallback(()=>{O(null),u(!1)},[]);j.useEffect(()=>{const P=t.current;if(P)return P.addEventListener("wheel",c,{passive:!1}),()=>P.removeEventListener("wheel",c)},[c]),j.useCallback(()=>{i({x:0,y:0,scale:1})},[]);const fe=(()=>{if(!r||r.length===0)return[];const P=r,m=[];for(const M of P)if(M.type==="調劑台"||M.type==="藥庫")for(const z of M.contents)m.push({GUID:z.GUID,type:z.type,name:`${M.name}-${z.name}`,position:z.position,dimensions:z.dimensions,med_box:[],MASTER_GUID:M.GUID,components:M.components||[]});else M.components&&M.components.length>0&&m.push(...M.components);return m})();return l.jsxs("div",{className:"relative w-full h-full overflow-hidden bg-gray-50",children:[l.jsx("div",{className:"absolute bottom-4 right-4 z-10 flex gap-2",children:l.jsx("button",{onClick:()=>p(!d),className:`p-3 rounded-lg shadow-lg transition-colors ${d?"bg-red-500 text-white hover:bg-red-600":"bg-white text-gray-700 hover:bg-gray-50"}`,title:s(d?"canvas.unlockCanvas":"canvas.lockCanvas"),children:d?l.jsx(Jc,{className:"w-6 h-6"}):l.jsx(Zc,{className:"w-6 h-6"})})}),l.jsx("div",{ref:t,className:`w-full h-full relative ${E&&!d?"cursor-grab":"cursor-default"} ${a?"cursor-grabbing":""}`,onMouseDown:y,onMouseMove:S,onMouseUp:D,onMouseLeave:D,onTouchStart:q,onTouchMove:L,onTouchEnd:X,children:l.jsxs("div",{className:"absolute inset-0 origin-top-left",style:{transform:`translate(${o.x}px, ${o.y}px) scale(${o.scale})`,transformOrigin:"0 0"},children:[l.jsx("div",{className:"absolute",style:{left:-1e4,top:-1e4,width:2e4,height:2e4,backgroundImage:`
                linear-gradient(to right, #e5e7eb 1px, transparent 1px),
                linear-gradient(to bottom, #e5e7eb 1px, transparent 1px)
              `,backgroundSize:"50px 50px"}}),l.jsxs("div",{className:"relative","data-canvas-content":!0,children:[fe.map(P=>l.jsx(qp,{component:P,scale:o.scale,isLocked:d},P.GUID)),e]})]})})]})},as=({content:e})=>{const{openMedBoxModal:t,openAddMedBoxModal:n,openListDrawModal:r,openGridDrawModal:s,openAddShelfDrawContainerModal:o,openAddSubContainerModal:i}=et(),{t:a}=Ye(),u=h=>{switch(h){case"parent_container":return"bg-pink-100";case"sub_container":return"bg-blue-100";case"dispensing_shelves":case"store_shelves":return"bg-green-100";case"med_box":return"bg-yellow-100";case"grid_draw":case"list_draw":return"bg-violet-100";default:return"bg-gray-100"}},d=h=>{switch(h){case"parent_container":return"border-pink-200";case"sub_container":return"border-blue-200";case"dispensing_shelves":case"store_shelves":return"border-green-200";case"med_box":return"border-yellow-200";case"grid_draw":case"list_draw":return"border-violet-200";default:return"border-gray-200"}},p=h=>{switch(h){case"parent_container":return"bg-pink-400";case"sub_container":return"bg-blue-400";case"dispensing_shelves":case"store_shelves":return"bg-green-400";case"med_box":return"bg-yellow-400";case"grid_draw":case"list_draw":return"bg-violet-400";default:return"bg-gray-200"}},v=h=>{switch(h){case"parent_container":return a("type.parentContainer");case"sub_container":return a("type.subContainer");case"dispensing_shelves":return a("type.medBoxShelf");case"store_shelves":return a("type.storeShelf");case"grid_draw":return a("type.gridDraw");case"list_draw":return a("type.listDraw");case"med_box":return a("type.medBox");default:return h}};switch(e.type){case"sub_container":return l.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${u(e.type||0)} ${d(e.type||0)}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 mr-6",children:[l.jsx("span",{className:"text-base font-semibold text-gray-800 whitespace-nowrap",children:e.name}),e.type!="parent_container"?l.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${p(e.type)}`,children:v(e.type)}):null]}),e.type!=="none"&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:h=>{h.stopPropagation(),o(e)},title:a("modal.add"),children:l.jsx(wt,{className:"w-6 h-6 text-green-700"})}),l.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",title:a("modal.settings"),children:l.jsx(at,{className:"w-6 h-6 text-gray-600"})})]})]});case"parent_container":return l.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${u(e.type||0)} ${d(e.type||0)}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 mr-6",children:[l.jsx("span",{className:"text-base font-semibold text-gray-800 whitespace-nowrap",children:e.name}),e.type!="parent_container"?l.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${p(e.type)}`,children:v(e.type)}):null]}),e.type!=="none"&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:h=>{h.stopPropagation(),i(e)},title:a("modal.add"),children:l.jsx(wt,{className:"w-6 h-6 text-green-700"})}),l.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",title:a("modal.settings"),children:l.jsx(at,{className:"w-6 h-6 text-gray-600"})})]})]});case"med_box":return l.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${u(e.type||0)} ${d(e.type||0)}`,children:[l.jsx("div",{className:"flex items-center mr-4",children:e.type!="parent_container"?l.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${p(e.type)}`,children:v(e.type)}):null}),l.jsx("div",{className:"flex items-center space-x-1",children:l.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:h=>{h.stopPropagation(),t(e)},title:a("modal.settings"),children:l.jsx(at,{className:"w-6 h-6 text-gray-600"})})})]});case"dispensing_shelves":return l.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${u(e.type||0)} ${d(e.type||0)}`,children:[l.jsx("div",{className:"flex items-center mr-4 space-x-3",children:e.type!="parent_container"?l.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${p(e.type)}`,children:v(e.type)}):null}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:h=>{h.stopPropagation(),n()},title:a("modal.add"),children:l.jsx(wt,{className:"w-6 h-6 text-green-700"})}),l.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:h=>{},title:a("modal.settings"),children:l.jsx(at,{className:"w-6 h-6 text-gray-600"})})]})]});case"store_shelves":return l.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${u(e.type||0)} ${d(e.type||0)}`,children:[l.jsx("div",{className:"flex items-center mr-4 space-x-3",children:e.type!="parent_container"?l.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${p(e.type)}`,children:v(e.type)}):null}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:h=>{h.stopPropagation()},title:a("modal.add"),children:l.jsx(wt,{className:"w-6 h-6 text-green-700"})}),l.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:h=>{},title:a("modal.settings"),children:l.jsx(at,{className:"w-6 h-6 text-gray-600"})})]})]});case"list_draw":return l.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${u(e.type||0)} ${d(e.type||0)}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 mr-6",children:[l.jsx("span",{className:"text-base font-semibold text-gray-800 whitespace-nowrap",children:e.name}),e.type!="parent_container"?l.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${p(e.type)}`,children:v(e.type)}):null]}),l.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:h=>{h.stopPropagation(),r(e)},title:a("modal.settings"),children:l.jsx(at,{className:"w-6 h-6 text-gray-600"})})]});case"grid_draw":return l.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${u(e.type||0)} ${d(e.type||0)}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 mr-6",children:[l.jsx("span",{className:"text-base font-semibold text-gray-800 whitespace-nowrap",children:e.name}),e.type!="parent_container"?l.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${p(e.type)}`,children:v(e.type)}):null]}),l.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:h=>{h.stopPropagation(),s(e)},title:a("modal.settings"),children:l.jsx(at,{className:"w-6 h-6 text-gray-600"})})]});default:return l.jsxs("div",{className:`flex items-center justify-between px-3 py-2 border-b-2 ${u(e.type||0)} ${d(e.type||0)}`,children:[l.jsx("div",{className:"flex items-center space-x-2 mr-6",children:e.type!="parent_container"?l.jsx("span",{className:`text-sm px-3 py-1 rounded-full whitespace-nowrap ${p(e.type)}`,children:v(e.type)}):null}),e.type!=="none"&&l.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",title:a("modal.settings"),children:l.jsx(at,{className:"w-6 h-6 text-gray-600"})})]})}},th=({children:e})=>{const t=j.useRef(null),{selectedDepartmentType:n,apiDepartmentData:r,setSidebarOpen:s,openAddParentContainerModal:o}=et(),[i,a]=j.useState({x:0,y:0,scale:1}),[u,d]=j.useState(!1),[p,v]=j.useState(!1),[h,E]=j.useState({x:0,y:0}),[k,T]=j.useState(!1),[x,g]=j.useState({isDragging:!1,draggedContainer:null,draggedElement:null,floatingElement:null,originalParent:null,originalPosition:"",originalIndex:-1,mouseOffset:{x:0,y:0},isMobileDrag:!1,originalData:null}),[c,y]=j.useState(null),S=j.useRef({}),D=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"ontouchstart"in window||navigator.maxTouchPoints>0,_=8,O=()=>{try{const f=localStorage.getItem("med_map_anchor");return f?JSON.parse(f):[]}catch(f){return console.error("Error reading canvas states from localStorage:",f),[]}},H=(f,$,N,w)=>{try{const C=O(),I=C.findIndex(V=>V.department===f&&V.canvasType===$),W={department:f,canvasType:$,scale:N,position:w};I>=0?C[I]=W:C.push(W),localStorage.setItem("med_map_anchor",JSON.stringify(C))}catch(C){console.error("Error saving canvas state to localStorage:",C)}},le=(f,$)=>O().find(w=>w.department===f&&w.canvasType===$)||null;j.useEffect(()=>{if(n){const f=le(n,"drugCanvas");if(f)a({x:f.position.x,y:f.position.y,scale:f.scale});else{const $={x:0,y:0,scale:1};a($),H(n,"drugCanvas",$.scale,$)}}},[n]),j.useEffect(()=>{if(!n)return;const f=setTimeout(()=>{H(n,"drugCanvas",i.scale,{x:i.x,y:i.y})},500);return()=>clearTimeout(f)},[i,n]);const b=f=>["parent_container","sub_container","dispensing_shelves","store_shelves","grid_draw","list_draw","med_box"].includes(f),J=f=>({parent_container:["parent_container","調劑台","藥庫"],sub_container:["parent_container","sub_container"],dispensing_shelves:["dispensing_shelves","store_shelves","sub_container"],store_shelves:["dispensing_shelves","store_shelves","sub_container"],grid_draw:["grid_draw","list_draw","sub_container"],list_draw:["grid_draw","list_draw","sub_container"],med_box:["med_box","dispensing_shelves"]})[f]||[],q=f=>{const[$,N]=f.split(",").map(Number);return{row:$||0,col:N||0}},L=(f,$)=>`${f},${$}`,X=(f,$)=>{const N=(C,I=null)=>{if(C.GUID===f)return{container:C,parent:I};if(C.contents)for(const W of C.contents){const V=N(W,C);if(V)return V}return null},w=Pt();for(const C of w){const I=N(C);if(I)return I}return null},oe=(f,$)=>{if(!f.contents)return;const{sortedContents:N,maxRow:w,maxCol:C}=F(f.contents),I=$;if(!I)return;const W=q(I.gird_position);console.log(w),console.log(C),console.log(I),console.log(W);for(let V=0;V<N.length;V++){const U=N[V],A=q(U.gird_position);if(A.row===W.row&&A.col>W.col)U.gird_position=L(A.row,A.col-1),S.current[U.GUID]={GUID:U.GUID,MASTER_GUID:f.GUID,position:`${A.row},${A.col-1}`,serverName:f.serverName,serverType:f.serverType,type:U.type};else if(A.row>W.row){const ne=A.col===0?C:A.col-1,ee=A.col===0?A.row-1:A.row;U.gird_position=L(ee,ne),S.current[U.GUID]={GUID:U.GUID,MASTER_GUID:f.GUID,position:`${ee},${ne}`,serverName:f.serverName,serverType:f.serverType,type:U.type}}}return console.log("移除更新其餘容器",N),N},fe=(f,$,N,w,C)=>{f.contents||(f.contents=[]);let I=Math.max(1,...f.contents.map(U=>q(U.gird_position||"0,0").col+1)),W=Math.max(1,...f.contents.map(U=>q(U.gird_position||"0,0").row+1));console.log("--------",f),console.log("目標容器最大列",I),console.log("目標容器最大行",W),(f.type=="sub_container"||f.type=="parent_container"||f.type=="調劑台"||f.type=="藥庫")&&(I=+f.oriMaxCol+1),C!=null&&C==="right"&&$.type!=="med_box"&&w==I&&(N=N+1,f.contents.filter(A=>`${N},0`==A.gird_position).length>0?w=I-1:w=0),console.log(N),console.log(w);const V=f.contents.filter(U=>{const A=q(U.gird_position||"0,0");return A.row>N||A.row===N&&A.col>=w});V.sort((U,A)=>{const ne=q(U.gird_position||"0,0"),ee=q(A.gird_position||"0,0");return ne.row!==ee.row?ee.row-ne.row:ee.col-ne.col}),console.log("會做變更的目標容器",V),V.forEach(U=>{const A=q(U.gird_position||"0,0");let ne=A.row,ee=A.col;U.type==="med_box"||ee<I-1?ee+=1:(ne+=1,ee=0),U.gird_position=`${ne},${ee}`,S.current[U.GUID]={GUID:U.GUID,MASTER_GUID:f.GUID,position:`${ne},${ee}`,serverName:f.serverName,serverType:f.serverType,type:U.type},console.log(`Shifted container ${U.GUID} from ${A.row},${A.col} to ${ne},${ee}`)}),f.contents.length==0&&(N=0,w=0),$.gird_position=`${N},${w}`,$.MASTER_GUID=f.GUID,console.log(`Inserted container ${$.GUID} at position ${N},${w}`),f.contents.push($),S.current[$.GUID]={GUID:$.GUID,MASTER_GUID:f.GUID,position:`${N},${w}`,serverName:f.serverName,serverType:f.serverType,type:$.type},$.type==="dispensing_shelves"&&$.contents&&$.contents.forEach(U=>{U.type==="med_box"&&(S.current[U.GUID]={GUID:U.GUID,MASTER_GUID:U.MASTER_GUID,position:U.gird_position,serverName:f.serverName,serverType:f.serverType,type:U.type})})},P=(f,$,N)=>{const w=f.getBoundingClientRect(),C=w.left+w.width/2,I=w.top+w.height/2,W=$-C,V=N-I;return Math.abs(W)>Math.abs(V)?W>0?"right":"left":V>0?"bottom":"top"},m=(f,$,N)=>{if(!p||!b(f.type))return;S.current={},N.preventDefault(),N.stopPropagation();const w=D(),C="touches"in N?N.touches[0].clientX:("pointerId"in N,N.clientX),I="touches"in N?N.touches[0].clientY:("pointerId"in N,N.clientY),W=$.getBoundingClientRect(),V={x:C-W.left,y:I-W.top},U=X(f.GUID);if(!U)return;console.log("拖曳目標",f),console.log("拖曳目標",U);const A=$.cloneNode(!0);if(A.style.position="fixed",A.style.left=`${C-V.x}px`,A.style.top=`${I-V.y}px`,A.style.width=`${W.width}px`,A.style.height=`${W.height}px`,A.style.zIndex="9999",A.style.opacity="0.8",A.style.boxShadow="0 10px 25px rgba(0,0,0,0.3)",A.style.pointerEvents="none",document.body.appendChild(A),w){const ne=U.parent.contents.findIndex(ee=>ee.GUID===f.GUID);g({isDragging:!0,draggedContainer:f,draggedElement:$,floatingElement:A,originalParent:U.parent,originalPosition:f.gird_position,originalIndex:ne,mouseOffset:V,isMobileDrag:!0,originalData:JSON.parse(JSON.stringify(U))})}else{const ne=U.parent.contents.findIndex(be=>be.GUID===f.GUID);U.parent.contents.splice(ne,1),console.log(ne);const ee=U.parent,ge=oe(U.parent,f);U.parent.contents=ge,console.log(U.parent),g({isDragging:!0,draggedContainer:f,draggedElement:$,floatingElement:A,originalParent:ee,originalPosition:f.gird_position,originalIndex:ne,mouseOffset:V,isMobileDrag:!1,originalData:null})}},M=f=>{if(!x.isDragging||!x.floatingElement)return;const $="touches"in f?f.touches[0].clientX:f.clientX,N="touches"in f?f.touches[0].clientY:f.clientY;x.floatingElement.style.left=`${$-x.mouseOffset.x}px`,x.floatingElement.style.top=`${N-x.mouseOffset.y}px`;const w=document.elementFromPoint($,N),C=w==null?void 0:w.closest("[data-container-guid]");if(C){const I=C.getAttribute("data-container-guid"),W=X(I);if(W&&J(x.draggedContainer.type).includes(W.container.type)){const U=P(C,$,N);if(x.draggedContainer.type==="med_box"&&!["left","right"].includes(U)){y(null);return}y({container:W.container,direction:U,element:C});return}}y(null)},z=async f=>{if(!x.isDragging)return;x.floatingElement&&document.body.removeChild(x.floatingElement);let $=null,N=null,w=null;if(console.log("Drop Target:",c),console.log("Is Mobile Drag:",x.isMobileDrag),x.isMobileDrag)if(c){$=c.direction,w=c.container;const C=X(x.draggedContainer.GUID);if(C){const ne=C.parent.contents.findIndex(ge=>ge.GUID===x.draggedContainer.GUID);C.parent.contents.splice(ne,1);const ee=oe(C.parent,x.draggedContainer);C.parent.contents=ee}const I=q(c.container.gird_position||"0,0");let W=I.row,V=I.col;switch(c.direction){case"top":W=Math.max(0,I.row);break;case"bottom":W=I.row+1;break;case"left":V=Math.max(0,I.col);break;case"right":V=I.col+1;break}const U=X(c.container.MASTER_GUID||c.container.GUID);let A=(U==null?void 0:U.container)||c.container;if(x.draggedContainer.class!=c.class&&(A=c),x.draggedContainer.type==="med_box"&&c.container.type!=="med_box")if(console.log("藥盒移動目標到層架上"),A=c.container,A.contents.length>0){let ne=0,ee=0;A.contents.forEach(ge=>{const be=q(ge.gird_position||"0,0").row,tr=q(ge.gird_position||"0,0").col;ne>be&&(ne=be),ee>tr&&(ee=tr)});for(let ge=0;ge<=ee;ge++)for(let be=0;be<=ne;be++){const tr=`${ge},${be}`;A.contents.filter(qc=>qc.grid_position===tr).length===0&&(W=ge,V=be)}}else W=0,V=0;N=A,fe(A,x.draggedContainer,W,V,c.direction)}else $=null,w=null,N=x.originalParent;else if(c){$=c.direction,w=c.container;const C=q(c.container.gird_position||"0,0");let I=C.row,W=C.col;switch(c.direction){case"top":I=Math.max(0,C.row);break;case"bottom":I=C.row+1;break;case"left":W=Math.max(0,C.col);break;case"right":W=C.col+1;break}const V=X(c.container.MASTER_GUID||c.container.GUID);console.log("------目標容器",c),console.log("------拖曳容器",x.draggedContainer);let U=(V==null?void 0:V.container)||c.container;if(console.log(x.draggedContainer.class),console.log(c.container.class),console.log(x.draggedContainer.class!=c.container.class),x.draggedContainer.class!=c.container.class&&(U=c.container,console.log("------這邊顯示放到上層容器現象"),console.log("------目標容器",c),console.log("------拖曳容器",x.draggedContainer),console.log("------目標父容器",U)),x.draggedContainer.type==="med_box"&&c.container.type!=="med_box")if(console.log("藥盒移動目標到層架上"),U=c.container,U.contents.length>0){let A=0,ne=0;U.contents.forEach(ee=>{const ge=q(ee.gird_position||"0,0").row,be=q(ee.gird_position||"0,0").col;A>ge&&(A=ge),ne>be&&(ne=be)});for(let ee=0;ee<=ne;ee++)for(let ge=0;ge<=A;ge++){const be=`${ee},${ge}`;U.contents.filter(Si=>Si.grid_position===be).length===0&&(I=ee,W=ge)}}else I=0,W=0;N=U,fe(U,x.draggedContainer,I,W,c.direction)}else{$=null,w=null,N=x.originalParent,x.draggedContainer.gird_position=x.originalPosition;const C=q(x.originalPosition||"0,0").row,I=q(x.originalPosition||"0,0").col;fe(x.originalParent,x.draggedContainer,C,I,null)}g({isDragging:!1,draggedContainer:null,draggedElement:null,floatingElement:null,originalParent:null,originalPosition:"",originalIndex:-1,mouseOffset:{x:0,y:0},isMobileDrag:!1,originalData:null}),y(null),console.log("Drop Direction:",$),console.log("Parent Object:",N),console.log("Target Object:",w),console.log("API更新資料：",S),await nh(S)};j.useEffect(()=>{if(x.isDragging)if(D()){const $=C=>{C.preventDefault(),M(C)},N=C=>z(),w=C=>z();return document.addEventListener("pointermove",$,{passive:!1}),document.addEventListener("pointerup",N),document.addEventListener("pointercancel",w),()=>{document.removeEventListener("pointermove",$),document.removeEventListener("pointerup",N),document.removeEventListener("pointercancel",w)}}else{const $=I=>M(I),N=I=>z(),w=I=>{I.preventDefault(),M(I)},C=I=>z();return document.addEventListener("mousemove",$),document.addEventListener("mouseup",N),document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("touchend",C),()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",N),document.removeEventListener("touchmove",w),document.removeEventListener("touchend",C)}}},[x.isDragging,c]),j.useEffect(()=>{const f=N=>{N.code==="Space"&&!N.repeat&&(N.preventDefault(),T(!0))},$=N=>{N.code==="Space"&&(N.preventDefault(),T(!1),d(!1))};return window.addEventListener("keydown",f),window.addEventListener("keyup",$),()=>{window.removeEventListener("keydown",f),window.removeEventListener("keyup",$)}},[]);const R=j.useCallback(f=>{var N;if(p)return;if(f.altKey&&!navigator.userAgent.includes("Mac")||f.metaKey&&navigator.userAgent.includes("Mac")){f.preventDefault();const w=(N=t.current)==null?void 0:N.getBoundingClientRect();if(!w)return;const C=f.clientX-w.left,I=f.clientY-w.top,W=f.deltaY>0?.9:1.1,V=Math.max(.1,Math.min(5,i.scale*W)),U=V/i.scale,A=C-(C-i.x)*U,ne=I-(I-i.y)*U;a({x:A,y:ne,scale:V})}},[i,p]),B=j.useCallback(f=>{p||!k||(d(!0),E({x:f.clientX,y:f.clientY}),f.preventDefault())},[p,k]),Z=j.useCallback(f=>{if(!u||p)return;const $=f.clientX-h.x,N=f.clientY-h.y;a(w=>({...w,x:w.x+$,y:w.y+N})),E({x:f.clientX,y:f.clientY})},[u,h,p]),K=j.useCallback(()=>{d(!1)},[]),[se,te]=j.useState(null),[pe,me]=j.useState({x:0,y:0}),Ge=f=>{if(f.length<2)return null;const $=f[0],N=f[1];return Math.sqrt(Math.pow(N.clientX-$.clientX,2)+Math.pow(N.clientY-$.clientY,2))},je=f=>{if(f.length===1)return{x:f[0].clientX,y:f[0].clientY};const $=f[0],N=f[1];return{x:($.clientX+N.clientX)/2,y:($.clientY+N.clientY)/2}},kt=j.useCallback(f=>{if(!p){if(f.touches.length===2){const $=Ge(f.touches),N=je(f.touches);te($),me(N)}else if(f.touches.length===1){const $=f.touches[0];E({x:$.clientX,y:$.clientY}),d(!0)}}},[p]),tt=j.useCallback(f=>{var $;if(!p){if(f.preventDefault(),f.touches.length===2&&se!==null){const N=Ge(f.touches),w=je(f.touches);if(N&&se){const C=($=t.current)==null?void 0:$.getBoundingClientRect();if(!C)return;const I=N/se,W=Math.max(.1,Math.min(5,i.scale*I)),V=w.x-C.left,U=w.y-C.top,A=W/i.scale,ne=V-(V-i.x)*A,ee=U-(U-i.y)*A;a({x:ne,y:ee,scale:W}),te(N),me(w)}}else if(f.touches.length===1&&u){const N=f.touches[0],w=N.clientX-h.x,C=N.clientY-h.y;a(I=>({...I,x:I.x+w,y:I.y+C})),E({x:N.clientX,y:N.clientY})}}},[i,se,u,h,p]),mt=j.useCallback(()=>{te(null),d(!1)},[]);j.useEffect(()=>{const f=t.current;if(f)return f.addEventListener("wheel",R,{passive:!1}),()=>f.removeEventListener("wheel",R)},[R]);const Pt=()=>!r||r.length===0?[]:r,F=f=>{if(!f||f.length===0)return{sortedContents:[],maxRow:0,maxCol:0};const $=f.map(I=>({...I,gridPos:q(I.gird_position||"0,0")})),N=Math.max(...$.map(I=>I.gridPos.row),0),w=Math.max(...$.map(I=>I.gridPos.col),0);return{sortedContents:$.sort((I,W)=>I.gridPos.row!==W.gridPos.row?I.gridPos.row-W.gridPos.row:I.gridPos.col-W.gridPos.col),maxRow:N,maxCol:w}},Q=Pt(),re=Math.max(...Q.map(f=>q(f.gird_position||"0,0").row),0),ue=Math.max(...Q.map(f=>q(f.gird_position||"0,0").col),0),ie=f=>{const $=w=>{if(w.width&&Array.isArray(w.width)&&typeof w.width_index=="number"&&w.width_index>=0&&w.width_index<w.width.length){const I=parseFloat(w.width[w.width_index]);if(!isNaN(I)){const W=I*20;return Math.max(168,W)}}return 168},N=w=>{switch(w){case"parent_container":return"bg-pink-50 border-pink-300";case"sub_container":return"bg-blue-50 border-blue-300";case"dispensing_shelves":case"store_shelves":return"bg-green-50 border-green-300";case"med_box":return"bg-yellow-50 border-yellow-300";case"grid_draw":case"list_draw":return"bg-violet-50 border-violet-300";default:return"bg-gray-50 border-gray-300"}};switch(f.type){case"med_box":return $(f),l.jsxs("div",{"data-container-guid":f.GUID,className:`${f.type!=="sub_container"?"border-2 rounded-lg shadow-sm":""} ${N(f.type||0)} min-h-[80px] flex flex-col flex-shrink-0 h-full overflow-hidden`,children:[l.jsx("div",{onMouseDown:p&&b(f.type)&&!D()?w=>m(f,w.currentTarget.closest("[data-container-guid]"),w):void 0,onTouchStart:p&&b(f.type)&&!D()?w=>m(f,w.currentTarget.closest("[data-container-guid]"),w):void 0,onPointerDown:p&&b(f.type)&&D()?w=>m(f,w.currentTarget.closest("[data-container-guid]"),w):void 0,className:p&&b(f.type)?"cursor-move":"",children:l.jsx(as,{content:f})}),l.jsx("div",{className:"flex-1 p-1",children:de(f)})]},f.GUID);case"sub_container":case"parent_container":return l.jsxs("div",{"data-container-guid":f.GUID,className:`${N(f.type||0)} border-2 overflow-hidden rounded-lg shadow-sm min-h-[80px] flex flex-col h-full`,children:[l.jsx("div",{onMouseDown:p&&b(f.type)&&!D()?w=>m(f,w.currentTarget.closest("[data-container-guid]"),w):void 0,onTouchStart:p&&b(f.type)&&!D()?w=>m(f,w.currentTarget.closest("[data-container-guid]"),w):void 0,onPointerDown:p&&b(f.type)&&D()?w=>m(f,w.currentTarget.closest("[data-container-guid]"),w):void 0,className:p&&b(f.type)?"cursor-move":"",children:l.jsx(as,{content:f})}),l.jsx("div",{className:"flex-1  p-1",children:de(f)})]},f.GUID);case"grid_draw":return l.jsxs("div",{"data-container-guid":f.GUID,className:`${f.type!=="sub_container"?"border-2 rounded-lg shadow-sm":""} ${N(f.type||0)} min-h-[80px] flex flex-col h-full overflow-hidden`,children:[l.jsx("div",{onMouseDown:p&&b(f.type)&&!D()?w=>m(f,w.currentTarget.closest("[data-container-guid]"),w):void 0,onTouchStart:p&&b(f.type)&&!D()?w=>m(f,w.currentTarget.closest("[data-container-guid]"),w):void 0,onPointerDown:p&&b(f.type)&&D()?w=>m(f,w.currentTarget.closest("[data-container-guid]"),w):void 0,className:p&&b(f.type)?"cursor-move":"",children:l.jsx(as,{content:f})}),l.jsx("div",{className:"flex-1 p-1 flex items-center",children:de(f)})]},f.GUID);default:return l.jsxs("div",{"data-container-guid":f.GUID,className:`${f.type!=="sub_container"?"border-2 rounded-lg shadow-sm":""} ${N(f.type||0)} min-h-[80px] flex flex-col h-full overflow-hidden ${f.type=="none"?"opacity-0":""}`,children:[l.jsx("div",{onMouseDown:p&&b(f.type)&&!D()?w=>m(f,w.currentTarget.closest("[data-container-guid]"),w):void 0,onTouchStart:p&&b(f.type)&&!D()?w=>m(f,w.currentTarget.closest("[data-container-guid]"),w):void 0,onPointerDown:p&&b(f.type)&&D()?w=>m(f,w.currentTarget.closest("[data-container-guid]"),w):void 0,className:p&&b(f.type)?"cursor-move":"",children:l.jsx(as,{content:f})}),l.jsx("div",{className:"flex-1 p-1",children:de(f)})]},f.GUID)}},de=f=>{const $=(N,w,C)=>{const I=Array(w+1).fill(null).map(()=>Array(C+1).fill(!1)),W={};return N.forEach(V=>{const U=q(V.gird_position||"0,0");W[`${U.row},${U.col}`]=V,I[U.row][U.col]=!0}),l.jsx("table",{className:"w-full h-full",style:{borderCollapse:"none",borderSpacing:"0px"},children:l.jsx("tbody",{children:Array.from({length:w+1},(V,U)=>l.jsx("tr",{className:"h-full",style:{height:`${100/(w+1)}%`,minHeight:"80px"},children:Array.from({length:C+1},(A,ne)=>{const ee=`${U},${ne}`,ge=W[ee];return ge?l.jsxs("td",{className:"align-top bg-transparent",style:{width:`${100/(C+1)}%`,height:`${100/(w+1)}%`,minHeight:"80px",border:"none",position:"relative"},children:[ie(ge),(c==null?void 0:c.container.GUID)===ge.GUID&&l.jsx("div",{className:"absolute inset-0 pointer-events-none",children:l.jsx("div",{className:`absolute bg-blue-400 opacity-50 ${c.direction==="top"?"top-0 left-0 right-0 h-1":c.direction==="bottom"?"bottom-0 left-0 right-0 h-1":c.direction==="left"?"left-0 top-0 bottom-0 w-1":"right-0 top-0 bottom-0 w-1"}`})})]},ne):l.jsx("td",{className:"p-1 align-top bg-transparent",style:{width:`${100/(C+1)}%`,height:`${100/(w+1)}%`,minHeight:"80px",border:"none"},children:l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm",children:"空位"})},ne)})},U))})})};switch(f.type){case"parent_container":case"sub_container":if(f.contents&&f.contents.length>0){const{sortedContents:A,maxRow:ne,maxCol:ee}=F(f.contents);return $(A,ne,ee)}else return l.jsx("table",{className:"bg-transparent w-full h-full",style:{borderCollapse:"separate",borderSpacing:"1px"},children:l.jsx("tbody",{children:l.jsx("tr",{})})});case"dispensing_shelves":case"store_shelves":case"none":if(f.contents&&f.contents.length>0){const{sortedContents:A,maxRow:ne,maxCol:ee}=F(f.contents);return $(A,ne,ee)}else return l.jsx("table",{className:"bg-transparent w-full h-full",style:{borderCollapse:"separate",borderSpacing:"0px"},children:l.jsx("tbody",{children:l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center text-gray-500 bg-transparent",children:l.jsx("div",{className:"text-base",children:"無內容"})})})})});case"grid_draw":const N=Math.max(...f.Boxes.flat().map(A=>+A.Row+ +A.Height-1)),w=Math.max(...f.Boxes.flat().map(A=>+A.Column+ +A.Width-1)),C=N+1,I=w+1,W=f.Boxes.flat(),V=Array(C).fill(null).map(()=>Array(I).fill(!1)),U={};return W.forEach(A=>{A.Slave||(U[`${A.Row},${A.Column}`]=A)}),W.forEach(A=>{if(!A.Slave&&(A.Width>1||A.Height>1))for(let ne=A.Row;ne<A.Row+A.Height;ne++)for(let ee=A.Column;ee<A.Column+A.Width;ee++)(ne!==A.Row||ee!==A.Column)&&(V[ne][ee]=!0)}),l.jsxs("div",{className:"bg-violet-100 h-20 flex ml-2 mt-2 mb-6 rounded-xl border-2 border-violet-400 w-[140px] items-center justify-center",children:[l.jsx("div",{className:"h-[60%] bg-violet-400 w-[3%] rounded-xl"}),l.jsx("div",{className:"h-[80%] border-2 border-violet-400 w-[82%] mx-1",children:l.jsx("div",{className:"flex items-center justify-center text-base text-violet-400 h-[100%]"})}),l.jsx("div",{className:"h-[60%] bg-violet-400 w-[3%]"})]});case"list_draw":return l.jsxs("div",{className:"bg-violet-100 h-20 flex ml-2 mt-2 mb-6 rounded-xl border-2 border-violet-400 w-[140px] items-center justify-center",children:[l.jsx("div",{className:"h-[60%] bg-violet-400 w-[3%] rounded-xl"}),l.jsx("div",{className:"h-[80%] border-2 border-violet-400 w-[82%] mx-1",children:l.jsx("div",{className:"flex items-center justify-center text-base text-violet-400 h-[100%]"})}),l.jsx("div",{className:"h-[60%] bg-violet-400 w-[3%]"})]});case"med_box":return f.med_info&&f.med_info.length>0?l.jsxs("div",{className:"text-base text-center min-h-[40px] flex items-center justify-center flex-col",children:[l.jsx("div",{className:"w-full text-gray-700 font-semibold text-left px-1",children:f.name}),l.jsx("div",{className:"text-gray-700",children:f.med_info[0].code}),l.jsxs("div",{className:"text-gray-700 w-full flex justify-between px-1",children:[l.jsxs("div",{children:[f.box_type,"吋"]}),l.jsxs("div",{children:[f.width[f.width_index],"cm"]})]})]}):l.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:l.jsx("div",{className:"text-base",children:"空藥盒"})});default:return f.contents&&f.contents.length>0?l.jsx("div",{className:"space-y-2",children:f.contents.map(A=>ie(A))}):l.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:l.jsxs("div",{className:"text-base",children:["未知類型: ",f.type]})})}},ae=f=>{if(q(f.gird_position||"0,0"),f.type!=="調劑台"&&f.type!=="藥庫")return null;const $=N=>{if(!N||N.length===0)return l.jsx("table",{className:"w-full h-full border-none",children:l.jsx("tbody",{children:l.jsx("tr",{children:l.jsx("td",{className:"p-4 text-center text-gray-500",children:l.jsx("div",{className:"text-center",children:l.jsx("div",{className:"text-base",children:"內容將在此處顯示"})})})})})});const{sortedContents:w,maxRow:C,maxCol:I}=F(N),W=Array(C+1).fill(null).map(()=>Array(I+1).fill(!1)),V={};return w.forEach(U=>{const A=q(U.gird_position||"0,0");V[`${A.row},${A.col}`]=U,W[A.row][A.col]=!0}),l.jsx("table",{className:"w-full h-full",style:{borderCollapse:"none",borderSpacing:"0px"},children:l.jsx("tbody",{children:Array.from({length:C+1},(U,A)=>l.jsx("tr",{className:"h-full",children:Array.from({length:I+1},(ne,ee)=>{const ge=`${A},${ee}`,be=V[ge];return be?l.jsx("td",{className:"p-1 align-top bg-transparent",style:{width:`${100/(I+1)}%`,height:`${100/(C+1)}%`,minHeight:"120px",border:"none"},children:ie(be)},ee):l.jsx("td",{className:"p-1 align-top bg-transparent",style:{width:`${100/(I+1)}%`,height:`${100/(C+1)}%`,minHeight:"120px",border:"1px dashed #e5e7eb"},children:l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-sm",children:"空位"})},ee)})},A))})})};return l.jsxs("div",{"data-container-guid":f.GUID,className:"border-2 rounded-lg shadow-lg bg-orange-50 border-orange-300 min-h-[120px] flex flex-col overflow-hidden w-full h-full",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b-2 bg-orange-100 border-b-orange-200",children:[l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx("span",{className:"text-lg font-semibold text-gray-800",children:f.name})}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:N=>{N.stopPropagation(),console.log("🔘 點擊新增父容器按鈕"),console.log("📋 找到的部門資料:",f),f?(console.log("✅ 呼叫 openAddParentContainerModal"),o(f)):console.warn("⚠️ 未找到對應的部門資料")},title:"新增",children:l.jsx(wt,{className:"w-6 h-6 text-green-700"})}),l.jsx("button",{className:"p-1 hover:bg-black/10 rounded transition-colors",onClick:N=>{N.stopPropagation()},title:"編輯設定",children:l.jsx(at,{className:"w-6 h-6 text-gray-600"})})]})]}),l.jsx("div",{className:`flex-1 bg-orange-50 ${(c==null?void 0:c.container.GUID)===f.GUID?"ring-2 ring-blue-400 ring-inset":""}`,children:$(f.contents||[])})]},f.GUID)};return l.jsxs("div",{className:"relative w-full h-full overflow-hidden bg-gray-50",children:[l.jsx("div",{className:"absolute bottom-4 right-4 z-10 flex gap-2",children:l.jsx("button",{onClick:()=>v(!p),className:`rounded-lg shadow-lg p-2 transition-colors ${p?"bg-red-500 text-white hover:bg-red-600":"bg-white text-gray-700 hover:bg-gray-50"}`,title:p?"Unlock Canvas":"Lock Canvas",children:p?l.jsx(Jc,{className:"w-6 h-6"}):l.jsx(Zc,{className:"w-6 h-6"})})}),l.jsx("div",{ref:t,className:`w-full h-full relative ${k&&!p?"cursor-grab":"cursor-default"} ${u?"cursor-grabbing":""}`,onMouseDown:B,onMouseMove:Z,onMouseUp:K,onMouseLeave:K,onTouchStart:kt,onTouchMove:tt,onTouchEnd:mt,children:l.jsxs("div",{className:"absolute inset-0 origin-top-left",style:{transform:`translate(${i.x}px, ${i.y}px) scale(${i.scale})`,transformOrigin:"0 0"},children:[l.jsx("div",{className:"relative","data-canvas-content":!0,children:l.jsx("table",{className:"h-full",style:{borderCollapse:"separate",borderSpacing:`${_}px`,minWidth:"fit-content",minHeight:"fit-content"},children:l.jsx("tbody",{children:Array.from({length:re+1},(f,$)=>l.jsx("tr",{children:Array.from({length:ue+1},(N,w)=>{const C=Q.find(I=>{const W=q(I.gird_position||"0,0");return W.row===$&&W.col===w});return C?l.jsx("td",{className:"align-top",style:{minWidth:"150px",minHeight:"120px",border:"none"},children:ae(C)},w):l.jsx("td",{className:"align-top",style:{minWidth:"150px",minHeight:"120px",border:"none"},children:l.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-base"})},w)})},$))})})}),e]})})]})},nh=async e=>{if(console.log(e),Object.keys(e.current).length===0){console.log("沒有需要更新的容器資料");return}console.log("🚀 開始批次更新容器資料:",e.current);const t=[],n=[],r=[];Object.values(e.current).forEach(o=>{console.log("開始整理API REQ資料：",o);const i={GUID:o.GUID,position:o.position,MASTER_GUID:o.MASTER_GUID,serverName:o.serverName,serverType:o.serverType};switch(o.type){case"med_box":t.push(i);break;case"grid_draw":case"list_draw":n.push(i);break;case"dispensing_shelves":case"store_shelves":r.push(i);break;default:console.warn("未知的容器類型:",o.type)}});const s=[];if(t.length>0&&(console.log("📦 更新藥盒資料:",t),s.push(Pe.updateMedMapBox(t).then(o=>({type:"med_box",response:o,count:t.length})).catch(o=>({type:"med_box",error:o,count:t.length})))),n.length>0&&(console.log("🗂️ 更新抽屜資料:",n),s.push(Pe.updateMedMapDrawer(n).then(o=>({type:"drawer",response:o,count:n.length})).catch(o=>({type:"drawer",error:o,count:n.length})))),r.length>0&&(console.log("🏪 更新層架資料:",r),s.push(Pe.updateMedMapShelf(r).then(o=>({type:"shelf",response:o,count:r.length})).catch(o=>({type:"shelf",error:o,count:r.length})))),s.length===0){console.log("沒有需要呼叫的 API");return}try{const o=await Promise.all(s);let i=0,a=0;const u=[];o.forEach(d=>{var p,v;if(d.error)a+=d.count,u.push(`${d.type}: ${d.error.message||"網路錯誤"}`),console.error(`❌ ${d.type} API 失敗:`,d.error);else if(((p=d.response)==null?void 0:p.Code)===200)i+=d.count,console.log(`✅ ${d.type} API 成功:`,d.response);else{a+=d.count;const h=((v=d.response)==null?void 0:v.Result)||"未知錯誤";u.push(`${d.type}: ${h}`),console.error(`❌ ${d.type} API 失敗:`,d.response)}})}catch(o){console.error("💥 批次更新過程中發生錯誤:",o)}finally{console.log("完成更新")}},Vt=[{name:"2.13吋",box_type:"2.13",width:["7.5"],unit:"cm"},{name:"2.9吋",type:"2.9",width:["10","15","20"],unit:"cm"},{name:"4.2吋",type:"4.2",width:["11","16"],unit:"cm"}],rh=()=>{const{medBoxModalOpen:e,closeMedBoxModal:t,selectedMedBox:n,triggerRefresh:r,modalMode:s}=et(),{t:o}=Ye(),[i,a]=j.useState(0),[u,d]=j.useState({}),[p,v]=j.useState(""),[h,E]=j.useState(""),[k,T]=j.useState("N"),[x,g]=j.useState([]),[c,y]=j.useState(!1);j.useEffect(()=>{if(n&&e)if(s==="add"){a(0);const b={};Vt.forEach((J,q)=>{b[q]=0}),d(b),v("")}else{const b=Vt.findIndex(J=>J.box_type===n.box_type||J.type===n.box_type);if(b>=0){a(b);const q=Vt[b].width.findIndex(X=>{var oe;return X===((oe=n.width)==null?void 0:oe[n.width_index||0])}),L={};Vt.forEach((X,oe)=>{oe===b?L[oe]=q>=0?q:0:L[oe]=0}),d(L)}else{a(0);const J={};Vt.forEach((q,L)=>{J[L]=0}),d(J)}v(n.ip||"")}},[n,e,s]);const S=b=>{a(b)},D=(b,J)=>{d(q=>({...q,[b]:J}))},_=()=>{if(!n)return;const b=Vt[i],J=u[i]||0;if(s==="add"){const q={...n,box_type:b.box_type||b.type||b.name,width:b.width,width_index:J,ip:p,name:`新藥盒_${Date.now()}`};console.log("Adding new med box:",q)}else n.box_type=b.box_type||b.type||b.name,n.width=b.width,n.width_index=J,n.ip=p;r(),t()},O=()=>{t()},H=async()=>{y(!0);try{const b=await Pe.searchMedicine(h,k);g(b)}catch(b){console.error("Search failed:",b),g([])}finally{y(!1)}},le=b=>{n&&(n.med_info=[{id:b.GUID||`${Date.now()}_${Math.random()}`,name:b.NAME,cht_name:b.CHT_NAME,code:b.CODE}],r())};return!e||!n?null:l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:O}),l.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh"},onClick:b=>b.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(at,{className:"w-6 h-6 text-gray-600"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:o(s==="add"?"modal.addMedBox":"modal.medBoxSettings")})]}),l.jsx("button",{onClick:O,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:l.jsx(an,{className:"w-6 h-6"})})]}),l.jsx("div",{className:"flex-1 px-4 py-2 overflow-y-auto",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"gap-16 flex",children:[l.jsxs("div",{className:"space-y-1 min-w-[260px]",children:[l.jsx("h3",{className:"text-base font-medium text-gray-900",children:o("form.medBoxName")}),l.jsx("input",{type:"text",value:(n==null?void 0:n.name)||"",onChange:b=>v(b.target.value),placeholder:(n==null?void 0:n.name)||(n==null?void 0:n.ip)||o("placeholder.medBoxName"),className:"px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors w-64"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("h3",{className:"text-base font-medium text-gray-900",children:o("form.ipAddress")}),l.jsx("div",{className:"flex items-center",children:l.jsx("input",{type:"text",onChange:b=>v(b.target.value),placeholder:(n==null?void 0:n.ip)||(n==null?void 0:n.name)||o("placeholder.ipAddress"),className:"px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors w-64"})})]})]}),l.jsxs("div",{className:"flex gap-16",children:[l.jsxs("div",{className:"space-y-1 min-w-[260px]",children:[l.jsx("h3",{className:"text-base font-medium text-gray-900",children:o("form.medBoxType")}),l.jsx("div",{className:"flex gap-4 justify-between",children:Vt.map((b,J)=>l.jsxs("label",{className:`flex items-center px-4 py-2 border-2 rounded-lg cursor-pointer transition-all ${i===J?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[l.jsx("input",{type:"radio",name:"boxType",value:J,checked:i===J,onChange:()=>S(J),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 hidden"}),l.jsx("div",{children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.name})})]},J))})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("h3",{className:"text-base font-medium text-gray-900",children:o("form.widthSelection")}),Vt.map((b,J)=>l.jsx("div",{className:`flex gap-4 ${i===J?"block":"hidden"}`,children:b.width.map((q,L)=>l.jsxs("label",{className:`flex items-center justify-center px-4 py-2 border-2 rounded-lg cursor-pointer transition-all ${i===J&&(u[J]||0)===L?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[l.jsx("input",{type:"radio",name:`width-${J}`,value:L,checked:i===J&&(u[J]||0)===L,onChange:()=>D(J,L),className:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500 hidden"}),l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[q," ",b.unit]})})]},`${J}-${L}`))},J))]})]}),l.jsxs("div",{className:"flex gap-6",children:[s==="edit"&&l.jsxs("div",{className:"space-y-2 w-[50%]",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:o("form.drugInfo")}),l.jsx("div",{children:n!=null&&n.med_info&&n.med_info.length>0?l.jsx("div",{children:n.med_info.map((b,J)=>l.jsxs("div",{className:"space-y-2 p-4 border border-gray-200 rounded-lg min-h-[262px] max-h-[262px]",children:[l.jsxs("div",{children:[l.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[o("form.drugCode"),":"]}),l.jsx("div",{className:"text-base text-gray-900 mt-1",children:b.code||o("status.notSet")})]}),l.jsxs("div",{children:[l.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[o("form.drugName"),":"]}),l.jsx("div",{className:"text-base text-gray-900 mt-1",children:b.name||o("status.notSet")})]}),l.jsxs("div",{children:[l.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[o("form.chineseName"),":"]}),l.jsx("div",{className:"text-base text-gray-900 mt-1",children:b.cht_name||o("status.notSet")})]})]},J))}):l.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg py-8 px-4 text-center space-y-4",children:l.jsx("div",{className:"text-gray-500 text-base",children:o("status.noDrugData")})})})]}),s==="add"&&l.jsxs("div",{className:"space-y-2 w-[50%]",children:[l.jsx("h3",{className:"text-base font-medium text-gray-900",children:o("form.drugInfo")}),l.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg py-2 px-4 min-h-[262px] max-h-[262px]",children:l.jsx("div",{className:"text-center py-8 space-y-4",children:l.jsx("div",{className:"text-gray-500 text-base",children:o("status.newMedBoxNoDrug")})})})]}),l.jsxs("div",{className:"space-y-2 w-[50%]",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:o("form.drugSearch")}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx("input",{type:"text",value:h,onChange:b=>E(b.target.value),placeholder:o("placeholder.drugSearch"),className:"border rounded px-3 py-1 flex-1 min-w-0 focus:border-blue-500 focus:outline-none transition-colors"}),l.jsxs("select",{value:k,onChange:b=>T(b.target.value),className:"border rounded px-2 py-1 focus:border-blue-500 focus:outline-none transition-colors",title:"管制級別",children:[l.jsx("option",{value:"N",children:"N"}),l.jsx("option",{value:"1",children:"1"}),l.jsx("option",{value:"2",children:"2"}),l.jsx("option",{value:"3",children:"3"}),l.jsx("option",{value:"4",children:"4"})]}),l.jsxs("button",{onClick:H,disabled:c,className:"bg-blue-600 text-white px-4 py-1.5 rounded hover:bg-blue-700 transition-colors whitespace-nowrap disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[c&&l.jsx(Ct,{className:"w-4 h-4 animate-spin"}),o("button.search")]})]}),l.jsx("div",{className:"bg-white border rounded p-3 min-h-[220px] max-h-[220px] overflow-y-auto",children:c?l.jsxs("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:[l.jsx(Ct,{className:"w-5 h-5 animate-spin mr-2"}),o("status.searching")]}):x.length>0?l.jsx("div",{className:"space-y-1",children:x.map((b,J)=>l.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:b.NAME}),l.jsx("div",{className:"text-xs text-gray-500 truncate",children:b.CHT_NAME}),l.jsx("div",{className:"text-xs text-gray-400 font-mono",children:b.CODE})]}),l.jsx("button",{onClick:()=>le(b),className:"ml-2 p-1 text-green-600 hover:text-green-700 hover:bg-green-50 rounded transition-colors flex-shrink-0",title:o("button.add"),children:l.jsx(wt,{className:"w-4 h-4"})})]},b.GUID||J))}):l.jsx("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:o(h||k!=="N"?"status.noSearchResults":"status.searchResults")})})]})]})]})}),l.jsxs("div",{className:"flex items-center justify-end space-x-3 py-2 px-4 border-t border-gray-200",children:[l.jsx("button",{onClick:O,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:o("button.cancel")}),l.jsx("button",{onClick:_,className:"px-6 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:o(s==="add"?"button.add":"button.save")})]})]})]})},sh=()=>{const{listDrawModalOpen:e,closeListDrawModal:t,selectedListDraw:n,triggerRefresh:r}=et(),{t:s}=Ye(),[o,i]=j.useState(""),[a,u]=j.useState([]),[d,p]=j.useState(""),[v,h]=j.useState("N"),[E,k]=j.useState([]),[T,x]=j.useState(!1);j.useEffect(()=>{n&&e&&(i(n.name||""),u(n.med_info||[]))},[n,e]);const g=_=>{u(O=>O.filter(H=>H.code!==_))},c=async()=>{x(!0);try{const _=await Pe.searchMedicine(d,v);k(_)}catch(_){console.error("Search failed:",_),k([])}finally{x(!1)}},y=_=>{const O={id:_.GUID||`${Date.now()}_${Math.random()}`,name:_.NAME,cht_name:_.CHT_NAME,code:_.CODE};u(H=>H.some(b=>b.code===O.code)?H:[...H,O])},S=()=>{n&&(n.name=o,n.med_info=a,r(),t())},D=()=>{t()};return!e||!n?null:l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:D}),l.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh"},onClick:_=>_.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(at,{className:"w-6 h-6 text-gray-600"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s("modal.listDrawSettings")})]}),l.jsx("button",{onClick:D,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:l.jsx(an,{className:"w-6 h-6"})})]}),l.jsx("div",{className:"flex-1 px-4 py-1 overflow-y-auto",children:l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s("form.drawerName")}),l.jsx("input",{type:"text",value:o,onChange:_=>i(_.target.value),placeholder:(n==null?void 0:n.name)||s("placeholder.drawerName"),className:"w-full px-2 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors text-base"})]}),l.jsxs("div",{className:"flex gap-6",children:[l.jsxs("div",{className:"space-y-2 w-[50%]",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s("form.drugList")}),a.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-2",children:a.map(_=>l.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-1 hover:border-gray-300 transition-colors",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{children:[_.code&&l.jsx("div",{children:l.jsx("div",{className:"text-sm text-gray-900 font-mono",children:_.code})}),l.jsx("div",{children:l.jsx("div",{className:"text-sm text-gray-900 font-medium",children:_.name||s("status.notSet")})}),l.jsx("div",{children:l.jsx("div",{className:"text-sm text-gray-900",children:_.cht_name||s("status.notSet")})})]})}),l.jsx("button",{onClick:()=>g(_.code),className:"ml-3 p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors flex-shrink-0",title:s("button.remove"),children:l.jsx(an,{className:"w-5 h-5"})})]})},_.id))}):l.jsx("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg py-12",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-gray-500 text-lg mb-2",children:s("status.drawerNoDrug")}),l.jsx("div",{className:"text-gray-400 text-sm",children:s("status.drugListEmpty")})]})})]}),l.jsxs("div",{className:"space-y-2 w-[50%]",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s("form.drugSearch")}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx("input",{type:"text",value:d,onChange:_=>p(_.target.value),placeholder:s("placeholder.drugSearch"),className:"border rounded px-3 py-1 flex-1 min-w-0 focus:border-blue-500 focus:outline-none transition-colors"}),l.jsxs("select",{value:v,onChange:_=>h(_.target.value),className:"border rounded px-2 py-1 focus:border-blue-500 focus:outline-none transition-colors",title:"管制級別",children:[l.jsx("option",{value:"N",children:"N"}),l.jsx("option",{value:"1",children:"1"}),l.jsx("option",{value:"2",children:"2"}),l.jsx("option",{value:"3",children:"3"}),l.jsx("option",{value:"4",children:"4"})]}),l.jsxs("button",{onClick:c,disabled:T,className:"bg-blue-600 text-white px-4 py-1.5 rounded hover:bg-blue-700 transition-colors whitespace-nowrap disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[T&&l.jsx(Ct,{className:"w-4 h-4 animate-spin"}),s("button.search")]})]}),l.jsx("div",{className:"bg-white border rounded p-3 min-h-[300px] max-h-[300px] overflow-y-auto",children:T?l.jsxs("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:[l.jsx(Ct,{className:"w-5 h-5 animate-spin mr-2"}),s("status.searching")]}):E.length>0?l.jsx("div",{className:"space-y-1",children:E.map((_,O)=>l.jsxs("div",{className:"flex items-center justify-between p-2 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:_.NAME}),l.jsx("div",{className:"text-xs text-gray-500 truncate",children:_.CHT_NAME}),l.jsx("div",{className:"text-xs text-gray-400 font-mono",children:_.CODE})]}),l.jsx("button",{onClick:()=>y(_),className:"ml-2 p-1 text-green-600 hover:text-green-700 hover:bg-green-50 rounded transition-colors flex-shrink-0",title:s("button.add"),children:l.jsx(wt,{className:"w-4 h-4"})})]},_.GUID||O))}):l.jsx("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:s(d||v!=="N"?"status.noSearchResults":"status.searchResults")})})]})]})]})}),l.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 border-t border-gray-200",children:[l.jsx("button",{onClick:D,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:s("button.cancel")}),l.jsx("button",{onClick:S,className:"px-6 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:s("button.save")})]})]})]})},oh=()=>{const{gridDrawModalOpen:e,closeGridDrawModal:t,selectedGridDraw:n,triggerRefresh:r,apiDepartmentData:s,setApiDepartmentData:o,showNotification:i}=et(),{t:a}=Ye(),[u,d]=j.useState(""),[p,v]=j.useState(null),[h,E]=j.useState(!1),[k,T]=j.useState(!1),[x,g]=j.useState(null),[c,y]=j.useState(""),[S,D]=j.useState("N"),[_,O]=j.useState([]),[H,le]=j.useState(!1),[b,J]=j.useState(0),[q,L]=j.useState({x:0,y:0});j.useEffect(()=>{if(n&&e)if(d(n.name||""),n.drawer){if(!h){console.log("🔄 備份原始 drawer 資料:",n.drawer);const F=JSON.parse(JSON.stringify(n.drawer));v(F),E(!0),console.log("✅ 備份完成，備份資料:",F)}}else console.log("⚠️ 沒有 drawer 資料可備份"),v(null),E(!1)},[n,e,h]),j.useEffect(()=>{e||(E(!1),v(null),g(null))},[e]);const X=()=>{n&&mt()},oe=()=>{if(console.log("🔄 開始恢復原始資料..."),console.log("原始備份資料:",p),console.log("當前 selectedGridDraw:",n),n&&p&&h){console.log("📦 恢復 drawer 資料...");const F=JSON.parse(JSON.stringify(p));if(n.drawer=F,s){const Q=ue=>{ue.forEach(ie=>{ie.GUID===n.GUID&&(console.log("🎯 找到目標格線抽屜，更新資料"),ie.drawer=F),ie.contents&&Array.isArray(ie.contents)&&Q(ie.contents),ie.components&&Array.isArray(ie.components)&&Q(ie.components)})},re=JSON.parse(JSON.stringify(s));Q(re),o(re),console.log("🔄 已更新全域資料狀態")}console.log("✅ 資料已恢復:",n.drawer)}else console.log("⚠️ 無法恢復資料 - selectedGridDraw、originalDrawerData 或 hasBackup 為空"),console.log("selectedGridDraw:",!!n),console.log("originalDrawerData:",!!p),console.log("hasBackup:",h);g(null),E(!1),v(null),r(),t()},fe=(F,Q)=>{if(!x)return!1;const re=Math.min(x.startRow,x.endRow),ue=Math.max(x.startRow,x.endRow),ie=Math.min(x.startCol,x.endCol),de=Math.max(x.startCol,x.endCol);return F>=re&&F<=ue&&Q>=ie&&Q<=de},P=F=>{var $;if(!(($=n==null?void 0:n.drawer)!=null&&$.Boxes)||F.Slave)return{width:1,height:1};const re=n.drawer.Boxes.flat().filter(N=>N.Slave&&N.MasterBox_Row===F.Row&&N.MasterBox_Column===F.Column);if(re.length===0)return{width:1,height:1};const ue=[F,...re],ie=Math.min(...ue.map(N=>N.Row)),de=Math.max(...ue.map(N=>N.Row)),ae=Math.min(...ue.map(N=>N.Column));return{width:Math.max(...ue.map(N=>N.Column))-ae+1,height:de-ie+1}},m=()=>{var ae;if(!x||!((ae=n==null?void 0:n.drawer)!=null&&ae.Boxes))return[];const F=n.drawer.Boxes.flat(),Q=Math.min(x.startRow,x.endRow),re=Math.max(x.startRow,x.endRow),ue=Math.min(x.startCol,x.endCol),ie=Math.max(x.startCol,x.endCol),de=[];return F.forEach(f=>{if(!f.Slave){const $=P(f),N=f.Row+$.height-1,w=f.Column+$.width-1;f.Row>=Q&&N<=re&&f.Column>=ue&&w<=ie&&de.push(f)}}),de},M=(F,Q,re,ue)=>{var w;if(!x||!((w=n==null?void 0:n.drawer)!=null&&w.Boxes))return!1;const ie=n.drawer.Boxes.flat();let de=!0,ae=F,f=Q,$=re,N=ue;for(;de;)de=!1,ie.forEach(C=>{if(!C.Slave){const I=P(C),W=C.Row+I.height-1,V=C.Column+I.width-1;!(C.Row>f||W<ae||C.Column>N||V<$)&&(C.Row<ae&&(ae=C.Row,de=!0),W>f&&(f=W,de=!0),C.Column<$&&($=C.Column,de=!0),V>N&&(N=V,de=!0))}});return{minRow:ae,maxRow:f,minCol:$,maxCol:N}},z=()=>{var de;if(!x||!((de=n==null?void 0:n.drawer)!=null&&de.Boxes))return!1;const F=Math.min(x.startRow,x.endRow),Q=Math.max(x.startRow,x.endRow),re=Math.min(x.startCol,x.endCol),ue=Math.max(x.startCol,x.endCol),ie=n.drawer.Boxes.flat();for(let ae=F;ae<=Q;ae++)for(let f=re;f<=ue;f++){let $=!1;for(const N of ie)if(!N.Slave){const w=P(N),C=N.Row+w.height-1,I=N.Column+w.width-1;if(ae>=N.Row&&ae<=C&&f>=N.Column&&f<=I){$=!0;break}}if(!$)return!1}return!0},R=()=>{var w,C;const F=m();if(!x)return{canMerge:!1,canUnmerge:!1};if(F.length===0)return{canMerge:!1,canUnmerge:!1};const Q=((C=(w=n==null?void 0:n.drawer)==null?void 0:w.Boxes)==null?void 0:C.flat())||[],re=F.some(I=>Q.filter(V=>V.Slave&&V.MasterBox_Row===I.Row&&V.MasterBox_Column===I.Column).length>0),ue=Math.min(x.startRow,x.endRow),ie=Math.max(x.startRow,x.endRow),de=Math.min(x.startCol,x.endCol),ae=Math.max(x.startCol,x.endCol),f=Q.some(I=>I.Slave&&I.Row>=ue&&I.Row<=ie&&I.Column>=de&&I.Column<=ae);return{canMerge:F.length>1&&z(),canUnmerge:re||f}},{canMerge:B,canUnmerge:Z}=R(),K=async()=>{le(!0);try{const F=await Pe.searchMedicine(c,S);O(F)}catch(F){console.error("Search failed:",F),O([])}finally{le(!1)}},se=F=>{var ue;if(!x||!((ue=n==null?void 0:n.drawer)!=null&&ue.Boxes))return;console.log(F);const Q=m();if(Q.length===0)return;const re=Q[0];re.GUID=F.GUID,re.GUID=F.GUID,re.GUID=F.GUID,re.GUID=F.GUID,re.Code=F.CODE,re.Name=F.NAME,re.ChineseName=F.CHT_NAME,r()},te=(F,Q,re)=>{re.preventDefault(),re.stopPropagation(),"touches"in re&&(J(Date.now()),L({x:re.touches[0].clientX,y:re.touches[0].clientY})),T(!0),g({startRow:F,startCol:Q,endRow:F,endCol:Q})},pe=(F,Q)=>{if(!k||!x)return;const re=Math.min(x.startRow,F),ue=Math.max(x.startRow,F),ie=Math.min(x.startCol,Q),de=Math.max(x.startCol,Q),ae=M(re,ue,ie,de);ae&&g(f=>f?{startRow:f.startRow,startCol:f.startCol,endRow:F>=f.startRow?ae.maxRow:ae.minRow,endCol:Q>=f.startCol?ae.maxCol:ae.minCol}:null)},me=()=>{if(k&&(T(!1),x&&(n!=null&&n.Boxes))){const F=Math.min(x.startRow,x.endRow),Q=Math.max(x.startRow,x.endRow),re=Math.min(x.startCol,x.endCol),ue=Math.max(x.startCol,x.endCol),ie=M(F,Q,re,ue);ie&&g({startRow:ie.minRow,startCol:ie.minCol,endRow:ie.maxRow,endCol:ie.maxCol})}},Ge=()=>{var F;!B||!((F=n==null?void 0:n.drawer)!=null&&F.Boxes)||!x||tt()},je=()=>{var F;!Z||!((F=n==null?void 0:n.drawer)!=null&&F.Boxes)||!x||(console.log(x),kt())},kt=async()=>{var F;if(!(!x||!((F=n==null?void 0:n.drawer)!=null&&F.Boxes)))try{const Q=Math.min(x.startRow,x.endRow),re=Math.max(x.startRow,x.endRow),ue=Math.min(x.startCol,x.endCol),ie=Math.max(x.startCol,x.endCol),ae=n.drawer.Boxes.flat().filter(C=>C.Row>=Q&&C.Row<=re&&C.Column>=ue&&C.Column<=ie),f=[],$=[];ae.forEach(C=>{f.push(C.Column.toString()),$.push(C.Row.toString())});const N={ServerName:n.serverName,ServerType:n.serverType,ValueAry:[`SelectColumns=${f.join(",")}`,`SelectRows=${$.join(",")}`],Data:{IP:n.ip,Boxes:n.Boxes}};console.log("🚀 發送 API 請求:",N);const w=await Pe.request("/api/device/separate_drawer_boxes",{method:"POST",body:JSON.stringify(N)});if(console.log("📡 API 回應:",w),w.Code===200&&w.Data){if(w.Data.Boxes&&Array.isArray(w.Data.Boxes)&&(n.Boxes=w.Data.Boxes,n.drawer=w.Data,console.log("✅ 資料已更新"),s)){const C=W=>{W.forEach(V=>{V.GUID===n.GUID&&(console.log("🎯 找到目標格線抽屜，更新資料"),V.drawer=n.drawer),V.contents&&Array.isArray(V.contents)&&C(V.contents),V.components&&Array.isArray(V.components)&&C(V.components)})},I=JSON.parse(JSON.stringify(s));C(I),o(I)}}else console.error("❌ API 回應錯誤:",w),i(`取消合併失敗：${w.Result||"未知錯誤"}`,"error")}catch(Q){console.error("💥 API 調用失敗:",Q),i("取消合併失敗：網路錯誤","error")}finally{console.log("更新後資料：",n),console.log("更新後最深層資料：",s),g(null),r()}},tt=async()=>{var F;if(!(!x||!((F=n==null?void 0:n.drawer)!=null&&F.Boxes)))try{const Q=Math.min(x.startRow,x.endRow),re=Math.max(x.startRow,x.endRow),ue=Math.min(x.startCol,x.endCol),ie=Math.max(x.startCol,x.endCol),ae=n.drawer.Boxes.flat().filter(C=>C.Row>=Q&&C.Row<=re&&C.Column>=ue&&C.Column<=ie),f=[],$=[];ae.forEach(C=>{f.push(C.Column.toString()),$.push(C.Row.toString())});const N={ServerName:n.serverName,ServerType:n.serverType,ValueAry:[`SelectColumns=${f.join(",")}`,`SelectRows=${$.join(",")}`],Data:{IP:n.ip,Boxes:n.Boxes}};console.log("🚀 發送 API 請求:",N);const w=await Pe.request("/api/device/combine_drawer_boxes",{method:"POST",body:JSON.stringify(N)});if(console.log("📡 API 回應:",w),w.Code===200&&w.Data){if(w.Data.Boxes&&Array.isArray(w.Data.Boxes)&&(n.Boxes=w.Data.Boxes,n.drawer=w.Data,console.log("✅ 資料已更新"),s)){const C=W=>{W.forEach(V=>{V.GUID===n.GUID&&(console.log("🎯 找到目標格線抽屜，更新資料"),V.drawer=n.drawer),V.contents&&Array.isArray(V.contents)&&C(V.contents),V.components&&Array.isArray(V.components)&&C(V.components)})},I=JSON.parse(JSON.stringify(s));C(I),o(I)}}else console.error("❌ API 回應錯誤:",w),i(`取消合併失敗：${w.Result||"未知錯誤"}`,"error")}catch(Q){console.error("💥 API 調用失敗:",Q),i("取消合併失敗：網路錯誤","error")}finally{console.log("更新後資料：",n),console.log("更新後最深層資料：",s),g(null),r()}},mt=async()=>{var F;if(n)try{n.name=u;const Q={ServerName:n.serverName,ServerType:n.serverType,Data:{IP:n.ip,Name:n.name,Boxes:((F=n.drawer)==null?void 0:F.Boxes)||[]}};console.log("🚀 發送確認更新 API 請求:",Q);const re=await Pe.request("/api/device/update_epd583_drawers",{method:"POST",body:JSON.stringify(Q)});if(console.log("📡 確認更新 API 回應:",re),re.Code===200){if(console.log("✅ 抽屜資料更新成功"),i("抽屜資料更新成功","success"),s){const ue=de=>{de.forEach(ae=>{ae.GUID===n.GUID&&(console.log("🎯 找到目標格線抽屜，更新名稱"),ae.name=n.name),ae.contents&&Array.isArray(ae.contents)&&ue(ae.contents),ae.components&&Array.isArray(ae.components)&&ue(ae.components)})},ie=JSON.parse(JSON.stringify(s));ue(ie),o(ie)}E(!1),v(null),r(),t()}else console.error("❌ 抽屜資料更新失敗:",re),i(`抽屜資料更新失敗：${re.Result||"未知錯誤"}`,"error")}catch(Q){console.error("💥 抽屜資料更新 API 調用失敗:",Q),i("抽屜資料更新失敗：網路錯誤","error")}},Pt=()=>{var $;if(!(($=n==null?void 0:n.drawer)!=null&&$.Boxes)||n.drawer.Boxes.length===0)return l.jsx("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-lg py-12",children:l.jsxs("div",{className:"text-center",children:[l.jsx(Kc,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("div",{className:"text-gray-500 text-lg mb-2",children:a("status.gridDrawNotConfigured")}),l.jsx("div",{className:"text-gray-400 text-sm",children:a("status.noDrugInfo")})]})});const F=n.drawer.Boxes.flat(),Q=N=>{if(N.Slave)return{width:1,height:1};const w=F.filter(A=>A.Slave&&A.MasterBox_Row===N.Row&&A.MasterBox_Column===N.Column);if(w.length===0)return{width:1,height:1};const C=[N,...w],I=Math.min(...C.map(A=>A.Row)),W=Math.max(...C.map(A=>A.Row)),V=Math.min(...C.map(A=>A.Column));return{width:Math.max(...C.map(A=>A.Column))-V+1,height:W-I+1}},re=Math.max(...F.map(N=>N.Row+1-1)),ue=Math.max(...F.map(N=>N.Column+1-1)),ie=re+1,de=ue+1,ae=Array(ie).fill(null).map(()=>Array(de).fill(!1)),f={};return F.forEach(N=>{if(!N.Slave){const w=Q(N);f[`${N.Row},${N.Column}`]=N,N.calculatedWidth=w.width,N.calculatedHeight=w.height}}),F.forEach(N=>{if(!N.Slave&&(N.calculatedWidth>1||N.calculatedHeight>1))for(let w=N.Row;w<N.Row+N.calculatedHeight;w++)for(let C=N.Column;C<N.Column+N.calculatedWidth;C++)(w!==N.Row||C!==N.Column)&&(ae[w][C]=!0)}),l.jsx("div",{className:"rounded-lg",children:l.jsx("table",{className:"w-full",children:l.jsx("tbody",{children:Array.from({length:ie},(N,w)=>l.jsx("tr",{children:Array.from({length:de},(C,I)=>{if(ae[w][I])return null;const W=`${w},${I}`,V=f[W];return V?l.jsx("td",{className:`border border-gray-400 pt-1 pl-1 align-top cursor-pointer select-none ${fe(w,I)?"bg-blue-200":"bg-white hover:bg-gray-100"}`,style:{width:`${100/de}%`,minHeight:"40px",height:`${50*V.calculatedHeight}px`,maxHeight:`${50*V.calculatedHeight}px`},colSpan:V.calculatedWidth,rowSpan:V.calculatedHeight,onMouseDown:U=>te(w,I,U),onMouseEnter:()=>pe(w,I),onMouseUp:me,onTouchStart:U=>te(w,I,U),onTouchMove:U=>{if(U.preventDefault(),!k)return;const A=U.touches[0],ne=document.elementFromPoint(A.clientX,A.clientY),ee=ne==null?void 0:ne.closest("td");if(ee){const ge=parseInt(ee.getAttribute("data-row")||"0"),be=parseInt(ee.getAttribute("data-col")||"0");pe(ge,be)}},onTouchEnd:me,"data-row":w,"data-col":I,children:l.jsx("div",{className:"h-full flex flex-col",children:V.Code||V.Name||V.ChineseName?l.jsxs(l.Fragment,{children:[V.Code&&l.jsx("div",{className:"text-xs font-mono text-gray-600",children:V.Code}),V.Name&&l.jsx("div",{className:"text-xs font-medium text-gray-900",children:V.Name}),V.ChineseName&&l.jsx("div",{className:"text-xs text-gray-700",children:V.ChineseName})]}):l.jsx("div",{className:"h-full flex justify-center items-center text-xs text-gray-400 italic text-center",children:a("status.notAdded")})})},I):l.jsx("td",{className:`border border-gray-300 p-2 align-top cursor-pointer select-none ${fe(w,I)?"border-1 border-blue-500 bg-blue-100":"bg-gray-50 hover:bg-gray-100"}`,style:{width:`${100/de}%`,minWidth:"80px",minHeight:"80px"},onMouseDown:U=>te(w,I,U),onMouseEnter:()=>pe(w,I),onMouseUp:me,onTouchStart:U=>te(w,I,U),onTouchMove:U=>{if(U.preventDefault(),!k)return;const A=U.touches[0],ne=document.elementFromPoint(A.clientX,A.clientY),ee=ne==null?void 0:ne.closest("td");if(ee){const ge=parseInt(ee.getAttribute("data-row")||"0"),be=parseInt(ee.getAttribute("data-col")||"0");pe(ge,be)}},onTouchEnd:me,"data-row":w,"data-col":I,children:l.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 text-xs",children:a("status.notAdded")})},I)})},w))})})})};return!e||!n?null:l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:oe}),l.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh"},onClick:F=>F.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(at,{className:"w-6 h-6 text-gray-600"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:a("modal.gridDrawSettings")})]}),l.jsx("button",{onClick:oe,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:l.jsx(an,{className:"w-6 h-6"})})]}),l.jsxs("div",{className:"flex-1 px-4 py-2 overflow-y-auto",children:[l.jsxs("div",{className:"space-y-4 pt-2",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("h3",{className:"text-lg whitespace-nowrap font-medium text-gray-900",children:a("form.drawerName")}),l.jsx("input",{type:"text",value:u,onChange:F=>d(F.target.value),disabled:!0,placeholder:(n==null?void 0:n.name)||a("placeholder.gridDrawName"),className:"px-2 py-1 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none transition-colors text-base"})]}),l.jsx("div",{className:"space-y-1",children:Pt()})]}),l.jsxs("div",{className:"py-2 flex space-x-4",children:[l.jsx("div",{className:"grid grid-cols-1 gap-2 w-[10%]",children:l.jsxs("div",{className:"grid grid-cols-1 gap-2 items-strat",children:[l.jsx("button",{onClick:Ge,disabled:!B,className:`px-4 py-2 rounded transition-colors ${B?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:a("button.merge")}),l.jsx("button",{onClick:je,disabled:!Z,className:`px-4 py-2 rounded transition-colors ${Z?"bg-red-600 text-white hover:bg-red-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:a("button.unmerge")})]})}),l.jsx("div",{className:"space-y-2 w-[30%]",children:(()=>{const F=m(),Q=F.find(re=>!re.Slave);return Q&&(Q.Code||Q.Name||Q.ChineseName)?l.jsxs("div",{className:"border border-blue-200 rounded-lg p-2 space-y-1 h-full",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-900 mb-1",children:a("form.drugCode")}),l.jsx("div",{className:"text-base text-gray-900",children:Q.Code||"-"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-900  mb-1",children:a("form.drugName")}),l.jsx("div",{className:"text-base text-gray-900",children:Q.Name||"-"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-900 mb-1",children:a("form.chineseName")}),l.jsx("div",{className:"text-base text-gray-900",children:Q.ChineseName||"-"})]})]}):l.jsx("div",{className:"bg-gray-50 border h-full border-gray-200 rounded-lg p-3 text-center",children:l.jsx("div",{className:"text-gray-500 h-full w-full flex justify-center items-center",children:x&&F.length>0?a("status.selectedCellsNoDrug"):a("status.selectCellsForDrug")})})})()}),l.jsxs("div",{className:"w-[60%]",children:[l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx("input",{type:"text",value:c,onChange:F=>y(F.target.value),placeholder:a("placeholder.drugSearch"),className:"border rounded px-3 py-1 flex-1 min-w-0 focus:border-blue-500 focus:outline-none transition-colors"}),l.jsxs("select",{value:S,onChange:F=>D(F.target.value),className:"border rounded px-2 py-1 focus:border-blue-500 focus:outline-none transition-colors",title:"管制級別",children:[l.jsx("option",{value:"N",children:"N"}),l.jsx("option",{value:"1",children:"1"}),l.jsx("option",{value:"2",children:"2"}),l.jsx("option",{value:"3",children:"3"}),l.jsx("option",{value:"4",children:"4"})]}),l.jsxs("button",{onClick:K,disabled:H,className:"bg-blue-600 text-white px-4 py-1.5 rounded hover:bg-blue-700 transition-colors whitespace-nowrap disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:[H&&l.jsx(Ct,{className:"w-4 h-4 animate-spin"}),a("button.search")]})]}),l.jsx("div",{className:"bg-white border rounded p-3 min-h-[150px] max-h-[150px] overflow-y-auto",children:H?l.jsxs("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:[l.jsx(Ct,{className:"w-5 h-5 animate-spin mr-2"}),a("status.searching")]}):_.length>0?l.jsx("div",{className:"space-y-1",children:_.map((F,Q)=>l.jsxs("div",{className:"flex items-center justify-between p-1 border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:F.NAME}),l.jsx("div",{className:"text-xs text-gray-500 truncate",children:F.CHT_NAME}),l.jsx("div",{className:"text-xs text-gray-400 font-mono",children:F.CODE})]}),l.jsx("button",{onClick:()=>se(F),className:"ml-2 p-1 text-green-600 hover:text-green-700 hover:bg-green-50 rounded transition-colors flex-shrink-0",title:a("button.add"),children:l.jsx(wt,{className:"w-4 h-4"})})]},F.GUID||Q))}):l.jsx("div",{className:"text-gray-500 text-center flex items-center justify-center h-full",children:a(c||S!=="N"?"status.noSearchResults":"status.searchResults")})})]})]}),l.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 border-t border-gray-200",children:[l.jsx("button",{onClick:oe,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:a("button.cancel")}),l.jsx("button",{onClick:X,className:"px-6 py-2 text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:a("button.save")})]})]}),l.jsx("div",{className:"fixed inset-0 pointer-events-none",onMouseUp:me,onMouseLeave:me,onTouchEnd:me,onTouchCancel:me})]})]})},lh=()=>{var q;const{addParentContainerModalOpen:e,closeAddParentContainerModal:t,selectedDepartmentForAdd:n,selectedDepartmentType:r,setApiDepartmentData:s,setIsLoadingMedMap:o,showNotification:i,triggerRefresh:a,setSidebarOpen:u}=et(),{t:d}=Ye(),[p,v]=j.useState(null),[h,E]=j.useState(0),[k,T]=j.useState(0),[x,g]=j.useState(!1);j.useEffect(()=>{e&&(v(null),E(0),T(0),g(!1))},[e]),j.useEffect(()=>{p&&(E(p.row),T(p.col))},[p]);const c=()=>{const L=new Set;return n!=null&&n.contents&&n.contents.forEach(X=>{X.type==="parent_container"&&X.gird_position&&L.add(X.gird_position)}),L},y=()=>{const L=c(),X=[];if(L.size===0)return X.push({row:0,col:0}),X;const oe=[];L.forEach(P=>{const[m,M]=P.split(",").map(Number);oe.push({row:m,col:M})});const fe=new Set;return oe.forEach(({row:P,col:m})=>{fe.add(`${P},${m+1}`),fe.add(`${P+1},${m}`),m>0&&fe.add(`${P},${m-1}`),P>0&&fe.add(`${P-1},${m}`)}),fe.forEach(P=>{if(!L.has(P)){const[m,M]=P.split(",").map(Number);m>=0&&M>=0&&X.push({row:m,col:M})}}),L.has("0,1")||X.some(m=>m.row===0&&m.col===1)||X.push({row:0,col:1}),L.has("1,0")||X.some(m=>m.row===1&&m.col===0)||X.push({row:1,col:0}),X.sort((P,m)=>P.row===m.row?P.col-m.col:P.row-m.row)},S=L=>{v(L)},D=L=>{E(L),v({row:L,col:k})},_=L=>{T(L),v({row:h,col:L})},O=p&&!c().has(`${p.row},${p.col}`)&&p.row>=0&&p.col>=0,H=async()=>{if(!(!p||!n||!O)){g(!0);try{const L=`${p.row},${p.col}`,X=await Pe.addMedMapSection(n.GUID,L);X.Code===200?(i("新增成功","success"),t(),u(!1),await le()):i(`新增失敗：${X.Result||"未知錯誤"}`,"error")}catch(L){console.error("Add parent container failed:",L),i("新增失敗：網路錯誤","error")}finally{g(!1)}}},le=async()=>{if(!r){console.warn("⚠️ 沒有選中的部門類型，無法重新獲取資料");return}console.log("🔄 重新獲取藥品地圖資料，部門類型:",r),o(!0);try{const L=await Pe.getMedMapByDepartment(r);if(L.Code===200&&L.Data){console.log("📡 API 回傳成功，開始轉換資料");const X=Lt.convertMedMapApiToFakeData(L.Data);if(!Lt.validateConvertedData(X)){console.error("❌ 轉換後的資料驗證失敗"),i("資料更新失敗：資料格式錯誤","error");return}s(X),console.log("✅ 藥品地圖資料已更新")}else console.error("❌ API 回傳錯誤:",L),i("資料更新失敗：API 錯誤","error")}catch(L){console.error("💥 重新獲取藥品地圖資料失敗:",L),i("資料更新失敗：網路錯誤","error")}finally{o(!1)}},b=()=>{t()},J=()=>{const L=c(),X=y(),oe=[...L].map(B=>{const[Z,K]=B.split(",").map(Number);return{row:Z,col:K}}).concat(X);oe.length===0&&oe.push({row:0,col:0});const fe=Math.max(...oe.map(B=>B.row)),P=Math.max(...oe.map(B=>B.col)),m=Math.min(...oe.map(B=>B.row)),M=Math.min(...oe.map(B=>B.col)),z=fe-m+1,R=P-M+1;return l.jsxs("div",{className:"space-y-2",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"座標選擇"}),l.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:l.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${R}, 1fr)`},children:Array.from({length:z*R},(B,Z)=>{const K=Math.floor(Z/R)+m,se=Z%R+M,te=`${K},${se}`,pe=L.has(te),me=X.some(je=>je.row===K&&je.col===se),Ge=(p==null?void 0:p.row)===K&&(p==null?void 0:p.col)===se;return l.jsx("button",{onClick:()=>me&&S({row:K,col:se}),disabled:pe||!me,className:`
                    w-16 h-16 border-2 rounded-lg transition-all duration-200 flex items-center justify-center text-sm font-medium
                    ${pe?"bg-red-100 border-red-300 text-red-600 cursor-not-allowed":Ge?"bg-blue-500 border-blue-600 text-white shadow-lg":me?"bg-green-100 border-green-300 text-green-700 hover:bg-green-200 hover:border-green-400 cursor-pointer":"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed"}
                  `,title:pe?"已占用":me?"可選擇":"不可用",children:pe?"占用":`${K},${se}`},te)})})})]})};return!e||!n?null:l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:b}),l.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh",maxWidth:"800px"},onClick:L=>L.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(wt,{className:"w-6 h-6 text-green-600"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"新增櫃體"})]}),l.jsx("button",{onClick:b,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:l.jsx(an,{className:"w-6 h-6"})})]}),l.jsx("div",{className:"flex-1 px-6 py-4 overflow-y-auto",children:l.jsxs("div",{className:"space-y-6",children:[J(),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"手動輸入座標"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"行 (Row):"}),l.jsx("input",{type:"number",min:"0",value:h,onChange:L=>D(parseInt(L.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"列 (Column):"}),l.jsx("input",{type:"number",min:"0",value:k,onChange:L=>_(parseInt(L.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]})]}),p&&l.jsx("div",{className:`text-sm p-2 rounded ${O?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:O?`已選擇位置：${p.row},${p.col}`:`位置 ${p.row},${p.col} 已被占用或無效`})]}),l.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"部門資訊"}),l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsxs("div",{children:["部門名稱：",(n==null?void 0:n.name)||"未知"]}),l.jsxs("div",{children:["部門類型：",(n==null?void 0:n.type)||"未知"]}),l.jsxs("div",{children:["現有父容器數量：",((q=n==null?void 0:n.contents)==null?void 0:q.filter(L=>L.type==="parent_container").length)||0]})]})]})]})}),l.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 border-t border-gray-200",children:[l.jsx("button",{onClick:b,disabled:x,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d("button.cancel")}),l.jsxs("button",{onClick:H,disabled:!O||x,className:"px-6 py-2 text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[x&&l.jsx(Ct,{className:"w-4 h-4 animate-spin"}),l.jsx("span",{children:x?"新增中...":"新增"})]})]})]})]})},Ra=[{value:"dispensing_shelves",label:"藥盒層架",icon:l.jsx(Gp,{className:"w-5 h-5"}),isShelf:!0},{value:"store_shelves",label:"藥品層架",icon:l.jsx(Ip,{className:"w-5 h-5"}),isShelf:!0},{value:"list_draw",label:"清單抽屜",icon:l.jsx(_l,{className:"w-5 h-5"}),isShelf:!1},{value:"grid_draw",label:"格線抽屜",icon:l.jsx(Kc,{className:"w-5 h-5"}),isShelf:!1}],ih=()=>{var z;const{addShelfDrawContainerModalOpen:e,closeAddShelfDrawContainerModal:t,selectedSubContainerForAdd:n,selectedDepartmentType:r,setApiDepartmentData:s,setIsLoadingMedMap:o,showNotification:i,triggerRefresh:a,setSidebarOpen:u}=et(),{t:d}=Ye(),[p,v]=j.useState("dispensing_shelves"),[h,E]=j.useState("1"),[k,T]=j.useState("1"),[x,g]=j.useState(""),[c,y]=j.useState(null),[S,D]=j.useState(0),[_,O]=j.useState(0),[H,le]=j.useState(!1);j.useEffect(()=>{e&&(v("dispensing_shelves"),E("1"),T("1"),g(""),y(null),D(0),O(0),le(!1))},[e]),j.useEffect(()=>{c&&(D(c.row),O(c.col))},[c]);const b=()=>{const R=new Set;return n!=null&&n.contents&&n.contents.forEach(B=>{B.gird_position&&R.add(B.gird_position)}),R},J=()=>{const R=b(),B=[];if(R.size===0)return B.push({row:0,col:0}),B;const Z=[];R.forEach(se=>{const[te,pe]=se.split(",").map(Number);Z.push({row:te,col:pe})});const K=new Set;return Z.forEach(({row:se,col:te})=>{K.add(`${se},${te+1}`),K.add(`${se+1},${te}`),te>0&&K.add(`${se},${te-1}`),se>0&&K.add(`${se-1},${te}`)}),K.forEach(se=>{if(!R.has(se)){const[te,pe]=se.split(",").map(Number);te>=0&&pe>=0&&B.push({row:te,col:pe})}}),R.has("0,1")||B.some(te=>te.row===0&&te.col===1)||B.push({row:0,col:1}),R.has("1,0")||B.some(te=>te.row===1&&te.col===0)||B.push({row:1,col:0}),B.sort((se,te)=>se.row===te.row?se.col-te.col:se.row-te.row)},q=R=>{y(R)},L=R=>{D(R),y({row:R,col:_})},X=R=>{O(R),y({row:S,col:R})},oe=c&&!b().has(`${c.row},${c.col}`)&&c.row>=0&&c.col>=0,fe=async()=>{if(!(!c||!n||!oe)){le(!0);try{const R=`${c.row},${c.col}`,B=Ra.find(K=>K.value===p);let Z;B!=null&&B.isShelf?Z=await Pe.addMedMapShelf({Master_GUID:n.GUID,position:R,width:h,height:k,ip_light:x,type:p}):Z=await Pe.addMedMapDrawer({Master_GUID:n.GUID,position:R,width:h,height:k,ip_drawer:x,type:p}),Z.Code===200?(i("新增成功","success"),t(),u(!1),await P()):i(`新增失敗：${Z.Result||"未知錯誤"}`,"error")}catch(R){console.error("Add container failed:",R),i("新增失敗：網路錯誤","error")}finally{le(!1)}}},P=async()=>{if(!r){console.warn("⚠️ 沒有選中的部門類型，無法重新獲取資料");return}console.log("🔄 重新獲取藥品地圖資料，部門類型:",r),o(!0);try{const R=await Pe.getMedMapByDepartment(r);if(R.Code===200&&R.Data){console.log("📡 API 回傳成功，開始轉換資料");const B=Lt.convertMedMapApiToFakeData(R.Data);if(!Lt.validateConvertedData(B)){console.error("❌ 轉換後的資料驗證失敗"),i("資料更新失敗：資料格式錯誤","error");return}s(B),console.log("✅ 藥品地圖資料已更新")}else console.error("❌ API 回傳錯誤:",R),i("資料更新失敗：API 錯誤","error")}catch(R){console.error("💥 重新獲取藥品地圖資料失敗:",R),i("資料更新失敗：網路錯誤","error")}finally{o(!1)}},m=()=>{t()},M=()=>{const R=b(),B=J(),Z=[...R].map(je=>{const[kt,tt]=je.split(",").map(Number);return{row:kt,col:tt}}).concat(B);Z.length===0&&Z.push({row:0,col:0});const K=Math.max(...Z.map(je=>je.row)),se=Math.max(...Z.map(je=>je.col)),te=Math.min(...Z.map(je=>je.row)),pe=Math.min(...Z.map(je=>je.col)),me=K-te+1,Ge=se-pe+1;return l.jsxs("div",{className:"space-y-2",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"座標選擇"}),l.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:l.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${Ge}, 1fr)`},children:Array.from({length:me*Ge},(je,kt)=>{const tt=Math.floor(kt/Ge)+te,mt=kt%Ge+pe,Pt=`${tt},${mt}`,F=R.has(Pt),Q=B.some(ue=>ue.row===tt&&ue.col===mt),re=(c==null?void 0:c.row)===tt&&(c==null?void 0:c.col)===mt;return l.jsx("button",{onClick:()=>Q&&q({row:tt,col:mt}),disabled:F||!Q,className:`
                    w-16 h-16 border-2 rounded-lg transition-all duration-200 flex items-center justify-center text-sm font-medium
                    ${F?"bg-red-100 border-red-300 text-red-600 cursor-not-allowed":re?"bg-blue-500 border-blue-600 text-white shadow-lg":Q?"bg-green-100 border-green-300 text-green-700 hover:bg-green-200 hover:border-green-400 cursor-pointer":"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed"}
                  `,title:F?"已占用":Q?"可選擇":"不可用",children:F?"占用":`${tt},${mt}`},Pt)})})})]})};return!e||!n?null:l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:m}),l.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh",maxWidth:"1000px"},onClick:R=>R.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(wt,{className:"w-6 h-6 text-green-600"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"新增層架/抽屜"})]}),l.jsx("button",{onClick:m,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:l.jsx(an,{className:"w-6 h-6"})})]}),l.jsx("div",{className:"flex-1 px-6 py-4 overflow-y-auto",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"容器類型"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:Ra.map(R=>l.jsxs("label",{className:`flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer transition-all ${p===R.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[l.jsx("input",{type:"radio",name:"containerType",value:R.value,checked:p===R.value,onChange:B=>v(B.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 hidden"}),l.jsxs("div",{className:"flex items-center space-x-3",children:[R.icon,l.jsx("span",{className:"font-medium text-gray-900",children:R.label})]})]},R.value))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"寬度"}),l.jsx("input",{type:"number",min:"1",value:h,onChange:R=>E(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"高度"}),l.jsx("input",{type:"number",min:"1",value:k,onChange:R=>T(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"IP 位址"}),l.jsx("input",{type:"text",value:x,onChange:R=>g(R.target.value),placeholder:"請輸入 IP 位址",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]}),M(),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"手動輸入座標"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"行 (Row):"}),l.jsx("input",{type:"number",min:"0",value:S,onChange:R=>L(parseInt(R.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"列 (Column):"}),l.jsx("input",{type:"number",min:"0",value:_,onChange:R=>X(parseInt(R.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]})]}),c&&l.jsx("div",{className:`text-sm p-2 rounded ${oe?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:oe?`已選擇位置：${c.row},${c.col}`:`位置 ${c.row},${c.col} 已被占用或無效`})]}),l.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"子容器資訊"}),l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsxs("div",{children:["容器名稱：",(n==null?void 0:n.name)||"未知"]}),l.jsxs("div",{children:["容器類型：",(n==null?void 0:n.type)||"未知"]}),l.jsxs("div",{children:["現有內容數量：",((z=n==null?void 0:n.contents)==null?void 0:z.length)||0]})]})]})]})}),l.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 border-t border-gray-200",children:[l.jsx("button",{onClick:m,disabled:H,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d("button.cancel")}),l.jsxs("button",{onClick:fe,disabled:!oe||H,className:"px-6 py-2 text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[H&&l.jsx(Ct,{className:"w-4 h-4 animate-spin"}),l.jsx("span",{children:H?"新增中...":"新增"})]})]})]})]})},ah=()=>{var q;const{addSubContainerModalOpen:e,closeAddSubContainerModal:t,selectedParentContainerForAdd:n,selectedDepartmentType:r,setApiDepartmentData:s,setIsLoadingMedMap:o,showNotification:i,triggerRefresh:a,setSidebarOpen:u}=et(),{t:d}=Ye(),[p,v]=j.useState(null),[h,E]=j.useState(0),[k,T]=j.useState(0),[x,g]=j.useState(!1);j.useEffect(()=>{e&&(v(null),E(0),T(0),g(!1))},[e]),j.useEffect(()=>{p&&(E(p.row),T(p.col))},[p]);const c=()=>{const L=new Set;return n!=null&&n.contents&&n.contents.forEach(X=>{X.type==="sub_container"&&X.gird_position&&L.add(X.gird_position)}),L},y=()=>{const L=c(),X=[];if(L.size===0)return X.push({row:0,col:0}),X;const oe=[];L.forEach(P=>{const[m,M]=P.split(",").map(Number);oe.push({row:m,col:M})});const fe=new Set;return oe.forEach(({row:P,col:m})=>{fe.add(`${P},${m+1}`),fe.add(`${P+1},${m}`),m>0&&fe.add(`${P},${m-1}`),P>0&&fe.add(`${P-1},${m}`)}),fe.forEach(P=>{if(!L.has(P)){const[m,M]=P.split(",").map(Number);m>=0&&M>=0&&X.push({row:m,col:M})}}),L.has("0,1")||X.some(m=>m.row===0&&m.col===1)||X.push({row:0,col:1}),L.has("1,0")||X.some(m=>m.row===1&&m.col===0)||X.push({row:1,col:0}),X.sort((P,m)=>P.row===m.row?P.col-m.col:P.row-m.row)},S=L=>{v(L)},D=L=>{E(L),v({row:L,col:k})},_=L=>{T(L),v({row:h,col:L})},O=p&&!c().has(`${p.row},${p.col}`)&&p.row>=0&&p.col>=0,H=async()=>{if(!(!p||!n||!O)){g(!0);try{const L=`${p.row},${p.col}`,X=await Pe.addSubSection(n.GUID,L);X.Code===200?(i("新增成功","success"),t(),u(!1),await le()):i(`新增失敗：${X.Result||"未知錯誤"}`,"error")}catch(L){console.error("Add sub container failed:",L),i("新增失敗：網路錯誤","error")}finally{g(!1)}}},le=async()=>{if(!r){console.warn("⚠️ 沒有選中的部門類型，無法重新獲取資料");return}console.log("🔄 重新獲取藥品地圖資料，部門類型:",r),o(!0);try{const L=await Pe.getMedMapByDepartment(r);if(L.Code===200&&L.Data){console.log("📡 API 回傳成功，開始轉換資料");const X=Lt.convertMedMapApiToFakeData(L.Data);if(!Lt.validateConvertedData(X)){console.error("❌ 轉換後的資料驗證失敗"),i("資料更新失敗：資料格式錯誤","error");return}s(X),console.log("✅ 藥品地圖資料已更新")}else console.error("❌ API 回傳錯誤:",L),i("資料更新失敗：API 錯誤","error")}catch(L){console.error("💥 重新獲取藥品地圖資料失敗:",L),i("資料更新失敗：網路錯誤","error")}finally{o(!1)}},b=()=>{t()},J=()=>{const L=c(),X=y(),oe=[...L].map(B=>{const[Z,K]=B.split(",").map(Number);return{row:Z,col:K}}).concat(X);oe.length===0&&oe.push({row:0,col:0});const fe=Math.max(...oe.map(B=>B.row)),P=Math.max(...oe.map(B=>B.col)),m=Math.min(...oe.map(B=>B.row)),M=Math.min(...oe.map(B=>B.col)),z=fe-m+1,R=P-M+1;return l.jsxs("div",{className:"space-y-2",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"座標選擇"}),l.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:l.jsx("div",{className:"grid gap-2",style:{gridTemplateColumns:`repeat(${R}, 1fr)`},children:Array.from({length:z*R},(B,Z)=>{const K=Math.floor(Z/R)+m,se=Z%R+M,te=`${K},${se}`,pe=L.has(te),me=X.some(je=>je.row===K&&je.col===se),Ge=(p==null?void 0:p.row)===K&&(p==null?void 0:p.col)===se;return l.jsx("button",{onClick:()=>me&&S({row:K,col:se}),disabled:pe||!me,className:`
                    w-16 h-16 border-2 rounded-lg transition-all duration-200 flex items-center justify-center text-sm font-medium
                    ${pe?"bg-red-100 border-red-300 text-red-600 cursor-not-allowed":Ge?"bg-blue-500 border-blue-600 text-white shadow-lg":me?"bg-green-100 border-green-300 text-green-700 hover:bg-green-200 hover:border-green-400 cursor-pointer":"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed"}
                  `,title:pe?"已占用":me?"可選擇":"不可用",children:pe?"占用":`${K},${se}`},te)})})})]})};return!e||!n?null:l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:b}),l.jsxs("div",{className:"relative flex flex-col bg-white rounded-xl shadow-2xl border border-gray-200",style:{width:"90vw",height:"90vh",maxWidth:"800px"},onClick:L=>L.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(wt,{className:"w-6 h-6 text-green-600"}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"新增虛擬容器"})]}),l.jsx("button",{onClick:b,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:l.jsx(an,{className:"w-6 h-6"})})]}),l.jsx("div",{className:"flex-1 px-6 py-4 overflow-y-auto",children:l.jsxs("div",{className:"space-y-6",children:[J(),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"手動輸入座標"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"行 (Row):"}),l.jsx("input",{type:"number",min:"0",value:h,onChange:L=>D(parseInt(L.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"列 (Column):"}),l.jsx("input",{type:"number",min:"0",value:k,onChange:L=>_(parseInt(L.target.value)||0),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none transition-colors"})]})]}),p&&l.jsx("div",{className:`text-sm p-2 rounded ${O?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:O?`已選擇位置：${p.row},${p.col}`:`位置 ${p.row},${p.col} 已被占用或無效`})]}),l.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"父容器資訊"}),l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsxs("div",{children:["容器名稱：",(n==null?void 0:n.name)||"未知"]}),l.jsxs("div",{children:["容器類型：",(n==null?void 0:n.type)||"未知"]}),l.jsxs("div",{children:["現有子容器數量：",((q=n==null?void 0:n.contents)==null?void 0:q.filter(L=>L.type==="sub_container").length)||0]})]})]})]})}),l.jsxs("div",{className:"flex items-center justify-end space-x-3 px-6 py-4 border-t border-gray-200",children:[l.jsx("button",{onClick:b,disabled:x,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d("button.cancel")}),l.jsxs("button",{onClick:H,disabled:!O||x,className:"px-6 py-2 text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center space-x-2",children:[x&&l.jsx(Ct,{className:"w-4 h-4 animate-spin"}),l.jsx("span",{children:x?"新增中...":"新增"})]})]})]})]})},uh=({isOpen:e,onLoginSuccess:t})=>{const{t:n}=Ye(),[r,s]=j.useState(""),[o,i]=j.useState(""),[a,u]=j.useState(!1),[d,p]=j.useState(!1),[v,h]=j.useState(""),E=async T=>{if(T.preventDefault(),!r.trim()||!o.trim()){h("Please enter both ID and password");return}p(!0),h("");try{const x=await Pe.login({ID:r.trim(),Password:o});if(x.Code===200&&x.Data){const g={...x.Data,loginTime:new Date().toISOString()};sessionStorage.setItem("user_session",JSON.stringify(g)),t(g)}else h(x.Result||"Login failed")}catch(x){console.error("Login failed:",x),h("Network error. Please try again.")}finally{p(!1)}},k=T=>{T.key==="Enter"&&!d&&E(T)};return e?l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900",children:[l.jsx("div",{className:"absolute inset-0 bg-white"}),l.jsxs("div",{className:"relative z-10 w-full max-w-md mx-4",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:n("login.title")}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-4 md:p-6",children:[v&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-600 text-sm",children:v})}),l.jsxs("form",{onSubmit:E,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"userId",className:"block text-sm font-medium text-gray-700 mb-2",children:n("login.userId")}),l.jsx("input",{id:"userId",type:"text",value:r,onChange:T=>s(T.target.value),onKeyPress:k,placeholder:n("login.userIdPlaceholder"),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",disabled:d,autoComplete:"username"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:n("login.password")}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{id:"password",type:a?"text":"password",value:o,onChange:T=>i(T.target.value),onKeyPress:k,placeholder:n("login.passwordPlaceholder"),className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",disabled:d,autoComplete:"current-password"}),l.jsx("button",{type:"button",onClick:()=>u(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:d,children:a?l.jsx(zp,{className:"w-5 h-5"}):l.jsx(Op,{className:"w-5 h-5"})})]})]}),l.jsx("button",{type:"submit",disabled:d||!r.trim()||!o.trim(),className:"w-full flex items-center justify-center px-4 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:d?l.jsxs(l.Fragment,{children:[l.jsx(Ct,{className:"w-5 h-5 animate-spin mr-2"}),n("login.loggingIn")]}):l.jsx(l.Fragment,{children:n("login.loginButton")})})]})]})]})]}):null},ch=({isVisible:e,message:t})=>{const{t:n}=Ye();return e?l.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[l.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),l.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center p-8",children:l.jsxs("div",{className:"bg-white/95 backdrop-blur-sm border border-gray-200/50 rounded-2xl shadow-2xl px-8 py-6 flex flex-col items-center space-y-4 min-w-[280px]",children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:l.jsx(Ni,{className:"w-8 h-8 text-blue-600"})}),l.jsx("div",{className:"text-xl font-semibold text-gray-900",children:n("nav.title")})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(Ct,{className:"w-8 h-8 text-blue-600 animate-spin"}),l.jsx("div",{className:"text-lg font-medium text-gray-700",children:t||n("status.loadingMedMapData")})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full animate-pulse",style:{width:"100%"}})}),l.jsx("div",{className:"text-sm text-gray-500 text-center max-w-xs",children:n("status.loadingMedMapHint")})]})})]}):null},dh=({message:e,type:t,isVisible:n,onClose:r,duration:s=3e3})=>{const[o,i]=j.useState(!1);return j.useEffect(()=>{if(n){i(!0);const a=setTimeout(()=>{r()},s);return()=>clearTimeout(a)}else{const a=setTimeout(()=>{i(!1)},300);return()=>clearTimeout(a)}},[n,s,r]),o?l.jsx("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-[9999] transition-all duration-300 ease-in-out ${n?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"}`,children:l.jsxs("div",{className:`flex items-center space-x-3 px-4 py-3 rounded-lg shadow-lg border ${t==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:[t==="success"?l.jsx($p,{className:"w-5 h-5 text-green-600"}):l.jsx(Wp,{className:"w-5 h-5 text-red-600"}),l.jsx("span",{className:"text-sm font-medium",children:e}),l.jsx("button",{onClick:r,className:`p-1 rounded-full hover:bg-black/10 transition-colors ${t==="success"?"text-green-600":"text-red-600"}`,children:l.jsx(an,{className:"w-4 h-4"})})]})}):null};function fh(){const{selectedDepartmentType:e,viewMode:t,isAuthenticated:n,setIsAuthenticated:r,setCurrentUser:s,isLoadingMedMap:o,notification:i,hideNotification:a,addParentContainerModalOpen:u,closeAddParentContainerModal:d,selectedDepartmentForAdd:p}=et();j.useEffect(()=>{(()=>{try{const E=sessionStorage.getItem("user_session");if(E){const k=JSON.parse(E);k.GUID&&k.ID&&k.Name?(s(k),r(!0)):sessionStorage.removeItem("user_session")}}catch(E){console.error("Error checking session:",E),sessionStorage.removeItem("user_session")}})()},[r,s]);const v=h=>{s(h),r(!0)};return n?l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx(Xp,{}),l.jsx(Yp,{}),l.jsx(Jp,{}),l.jsx("div",{className:"fixed inset-0",children:l.jsx("div",{className:"w-full h-full",children:t==="department"?l.jsx(eh,{}):l.jsx(th,{})})}),l.jsx(Zp,{}),l.jsx(rh,{}),l.jsx(sh,{}),l.jsx(oh,{}),l.jsx(lh,{}),l.jsx(ih,{}),l.jsx(ah,{}),l.jsx(ch,{isVisible:o}),l.jsx(dh,{message:i.message,type:i.type,isVisible:i.isVisible,onClose:a})]}):l.jsx(uh,{isOpen:!0,onLoginSuccess:v})}function ph(){return l.jsx(Pp,{children:l.jsx(Dp,{children:l.jsx(fh,{})})})}Hc(document.getElementById("root")).render(l.jsx(j.StrictMode,{children:l.jsx(ph,{})}));
